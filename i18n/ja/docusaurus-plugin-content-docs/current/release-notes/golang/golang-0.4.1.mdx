---
id: golang-0_4_1
title: Go Agent v0.4.1
toc_max_heading_level: 2
pagination_next: release-notes/golang/golang-0_4_0
displayed_sidebar: releaseSidebar
---

2024年08月28日

- <Status priority='1'>New</Status> Standard outputのログ収集機能を追加

  ```ini title="whatap.conf"
  logsink_enabled=true
  logsink_stdout_enabled=true
  logsink_zip_enabled=true # optional
  ```

  :::note

  `logsink_zip_enabled`オプションを適用すると、ログ データを適量にまとめて圧縮転送できます。

  :::

- <Status priority='1'>New</Status>エージェント設定ファイル(*whatap.conf*)より環境変数を優先処理するオプションを追加

  - 既存のエージェント設定は*whatap.conf*、環境変数の順に適用します。

  - `use_env_first`(既定値`false`)オプションを設定すると*whatap.conf*ファイルの設定よりも環境変数を優先します。

    ```ini title="whatap.conf"
    use_env_first=true
    ```

  - `WHATAP_USE_ENV_FIRST=true`形式で環境変数を利用して設定できます。

- <Status priority='1'>Changed</Status>次のエージェントオプションの既定値を修正

  - TCP read timeoutの時間を30秒から120秒に変更します。

    ```ini title="whatap.conf"
    net_so_time=120000
    ```

  - TCP write bufferの値を8Mbから2Mbに変更します。

    ```ini title="whatap.conf"
    net_write_buffer_size=2*1024*1024
    ```

- <Status priority='0'>Fixed</Status>`OKIND`環境変数の認識エラーを修正

  `OKIND`または`WHATAP_OKIND`環境変数として`okind`を設定できます。

:::info

**ダウンロード**

- go-api(import library)

  ```bash
  go get github.com/whatap/go-api@latest
  ```

- サービスエージェント

  | OS名                             |  ファイル形式  | アーキテクチャ |                                      ダウンロード                                      |
  | ------------------------------- | :------: | :-----: | :------------------------------------------------------------------------------: |
  | Red Hat / CentOS / Amazon linux |    RPM   | x86 x64 |  [ダウンロード](https://repo.whatap.io/centos/6/x86_64/whatap-agent-0.4-1.x86_64.rpm)  |
  | \^                              |    \^    | aarch64 | [ダウンロード](https://repo.whatap.io/centos/7/aarch64/whatap-agent-0.4-1.aarch64.rpm) |
  | Ubuntu 12 and above / Debian    |    DEB   |  amd64  |   [ダウンロード](https://repo.whatap.io/debian/unstable/whatap-agent_0.4.1_amd64.deb)  |
  | \^                              |    \^    |  arm64  |   [ダウンロード](https://repo.whatap.io/debian/unstable/whatap-agent_0.4.1_arm64.deb)  |
  | Alpine linux                    | tar gzip | x86 x64 |     [ダウンロード](https://repo.whatap.io/alpine/x86_64/whatap-agent-0.4.1.tar.gz)     |
  | \^                              |    \^    | aarch64 |     [ダウンロード](https://repo.whatap.io/alpine/aarch64/whatap-agent-0.4.1.tar.gz)    |

:::
