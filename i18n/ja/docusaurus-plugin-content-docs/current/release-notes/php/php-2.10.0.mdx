---
id: php-2_10_0
title: PHP Agent v2.10.0
toc_max_heading_level: 2
pagination_next: release-notes/php/php-2_9_0
displayed_sidebar: releaseSidebar
---

2025年02月11日

- <Status priority='1'>New</Status> PHP Extensionで機能別に収集中止できるオプションを追加

  - `whatap.ext.trace_enabled` (デフォルト値: `true`): トランザクションの情報収集を非活性化

  - `whatap.ext.profile_enabled` (デフォルト値: `true`): トランザクションの基本情報収集を非活性化

  - `whatap.ext.profile_sql_enabled` (デフォルト値: `true`): SQLプロファイル収集を非活性化

  - `whatap.ext.profile_httpc_enabled` (デフォルト値: `true`): HTTP呼び出しプロファイルの収集を非活性化

  - `whatap.ext.profile_socket_enabled` (デフォルト値: `true`): ソケット関連プロファイル収集を非活性化

  :::note

  特定のURLのみ停止したい場合は、PHPスクリプトから`ini_set()`関数を使用します。 

  ```php
  <?php
  // プロファイル停止設定
  ini_set("whatap.ext_profile_enabled", 0);
  ```

  :::

- <Status priority='1'>New</Status> 特定のURIに基づいて収集を中止するオプションを追加

  - `whatap.ext.ignore_uris`: トランザクション情報を収集しないURIを登録(コンマ区分)

    - 例: `whatap.ext.ignore_uris=/aaa/bbb.php, /ccc/ddd.php`

  - `whatap.ext.ignore_profile_uris`: トランザクションの基本情報は収集するが、詳細プロファイル情報を収集しないURIを登録 (コンマ区分)

    - 例: `whatap.ext.ignore_profile_uris=/aaa/bbb.php, /ccc/ddd.php`

  :::note 

  オプション設定後Apacheまたはphp-fpmを再起動します。 

  :::

- <Status priority='1'>New</Status> トランザクション追加情報を収集

  - `peak-memory`: PHP実行中peak memoryを収集

  - `elapsed-utime`: ユーザーCPU使用量を収集

  - `elapsed-stime`: システムCPU使用量を収集

  - `external-func-count`: ユーザー関数の実行件数

  - `prof-external-func-count`: WhaTapモニタリングが追跡したユーザー関数の件数

  - `internal-func-count`: PHP internal関数の実行件数

  - `prof-internal-func-count`: WhaTapモニタリングが追跡したinternal関数の件数

- <Status priority='0'>Fixed</Status> arm64(aarch64)環境でトランザクションIDが一意に発行されないため、プロファイル照会時に間違ったプロファイルを照会する現象を修正

- <Status priority='0'>Fixed</Status> システムリソース収集オプションの中止設定にもかかわらず、不必要に情報が収集されCPU負荷が発生する現象を修正

:::info

**ダウンロード**

| OS名                             |  ファイル形式  | アーキテクチャ |                                      ダウンロード                                     |
| ------------------------------- | :------: | :-----: | :-----------------------------------------------------------------------------: |
| Red Hat / CentOS / Amazon linux |    RPM   | x86 x64 |  [ダウンロード](https://repo.whatap.io/centos/6/x86_64/whatap-php-2.10-0.x86_64.rpm)  |
| \^                              |    \^    | aarch64 | [ダウンロード](https://repo.whatap.io/centos/7/aarch64/whatap-php-2.10-0.aarch64.rpm) |
| Ubuntu 12 and above / Debian    |    DEB   |  amd64  |   [ダウンロード](https://repo.whatap.io/debian/unstable/whatap-php_2.10.0_amd64.deb)  |
| \^                              |    \^    |  arm64  |   [ダウンロード](https://repo.whatap.io/debian/unstable/whatap-php_2.10.0_arm64.deb)  |
| Alpine linux                    | tar gzip | x86 x64 |     [ダウンロード](https://repo.whatap.io/alpine/x86_64/whatap-php-2.10.0.tar.gz)     |
| \^                              |    \^    | aarch64 |     [ダウンロード](https://repo.whatap.io/alpine/aarch64/whatap-php-2.10.0.tar.gz)    |
| Freebsd 10以降                    |    TXZ   | x86 x64 |        [ダウンロード](https://repo.whatap.io/freebsd/10/whatap-php-2.10.0.txz)        |

:::
