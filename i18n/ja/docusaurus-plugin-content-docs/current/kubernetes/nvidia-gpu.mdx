---
id: nvidia-gpu
title: NVIDIA GPU対応
description: KubernetesエージェントのGPU収集方法を案内します。
keywords:
  - Kubernetes
  - Kubernetesモニタリング
  - サポート環境
  - GPU
---

## WhaTap KubernetesエージェントのGPUメトリクス収集方法

WhaTap Kubernetesノード エージェントは、データセンターGPU管理者(DCGM) Exporterを使って NVIDIA GPUの性能メトリクスを収集し、モニタリングします。 その過程は、サイドカー(Sidecar) パターンを活用して構成されます。

- **サイドカーパターン**

  DCGM Exporterは、主アプリケーションコンテナとともに同じPod内で実行される補助コンテナとして設定されます。 このサイドカーパターンは、DCGM ExporterがGPU状態情報を効率的に収集できるようにサポートします。

- **DCGM Exporter** 

  `dcgm-exporter`コンテナは、NVIDIAのデータセンターGPU管理者(DCGM)を通じてGPUの状態と性能関連指標を収集します。 

{/* 여기에 GPU의 온도, 사용량, 메모리 상태, 전력 소비 등의 다양한 메트릭이 포함됩니다. */}

- **メトリクスの収集と転送** 

  `whatap-node-agent`コンテナは、`dcgm-exporter`のHTTPエンドポイントを通じてGPUメトリクスを要請し、これを収集します。 

  :::note 

  `dcgm-exporter`のHTTPエンドポイントは、通常、ポート9400を使用します。

  :::

## 収集範囲

WhaTap Kubernetesエージェントは、ノードに配布された各コンテナのGPU使用量を効率的にモニタリングし、管理することに重点を置いています。

{/* 와탭 쿠버네티스 에이전트는 컨테이너와 노드 수준에서 GPU 사용량을 모니터링하여 다음과 같은 정보를 제공합니다.  */}

- **コンテナ**

  WhaTapノードエージェントは、各コンテナのGPUメトリクスを収集し、各コンテナがGPUリソースをどれだけ使用しているかを明確に把握できるようにします。 このデータは、リソースの割り当てを最適化するのに役立ちます。

{/* 이 데이터는 리소스 할당을 최적화하는 데 유용합니다. */}

- **ノード**

  ノード全体のGPU使用量をモニタリングしてノード全般のGPUリソース活用度を評価できます。 この情報は、クラスターの全体的な性能分析に役立ちますが、個々のプロセスレベルの詳細は提供されません。

{/* 와탭 쿠버네티스 에이전트는 노드에 배포된 각 컨테이너의 GPU 사용량을 효율적으로 모니터링하고 관리하는 데 집중합니다.

- **コンテナレベル**: WhaTapノードエージェントは、コンテナレベルでGPUメトリクスを収集します。 これは、各コンテナがどれだけ多くのGPUリソースを使用しているかを把握するのに役立ちます。

- **ノードレベル**: GPUメトリクスはノード全体のGPU使用量をモニタリングできますが、個別プロセスレベルの詳細情報は提供されません。 */}

## 収集メトリクス

以下は、DCGM Exporterを通じて収集される主なGPUメトリクスの項目です。 

### ノードレベルメトリクス

Kubernetesノード全体でのGPU状態のモニタリングに重点を置いています。 このメトリクスは、クラスターの全体的なGPU活用度を評価するのに役立ちます。

- **DCGM_FI_DEV_GPU_UTIL** <span class='type'>Gauge</span> 

  - GPU使用率を表すメトリクスで、現在のGPUの使用量をパーセンテージで表示します。 

  - ノード全体でGPUの使用状況をリアルタイムでモニタリングし、リソースの適切な配分と負荷の分散をサポートします。

  {/* 이 메트릭은 GPU가 얼마나 활발히 작동하고 있는지를 평가에 사용됩니다. */}

- **DCGM_FI_DEV_MEM_COPY_UTIL** <span class='type'>Gauge</span>

  - メモリ使用率を表すメトリクスで、GPUメモリ帯域幅の使用量をパーセントで提供します。 

  - GPUメモリリソースの使用量をモニタリングし、メモリ帯域幅のボトルネック現象を感知して解決するのに役立ちます。

{/* GPU의 메모리 전송 작업 효율성 평가에 사용됩니다. */}

- **DCGM_FI_DEV_POWER_USAGE** <span class='type'>Gauge</span>

  - 現在のGPUの電力消費量をワット(W) 単位で表示するメトリクスです。 

  - GPUの電力使用状況をモニタリングすることで、電力効率を改善し、運用コストを最適化できます。

{/* GPU의 실시간 전력 소비를 평가하여 효율적인 전력 관리를 지원합니다. */}

- **DCGM_FI_DEV_TOTAL_ENERGY_CONSUMPTION** <span class='type'>Counter</span>

  - システム起動後に蓄積されたGPUの総エネルギー消費量をミリジュール(mJ) 単位で測定します。 

  - ノード全体のエネルギー使用量を追跡し、長期的なエネルギー効率の改善と運用戦略を策定できます。

{/* 장기적인 에너지 소비 패턴을 파악하는 데 유용합니다. */}

### コンテナレベルメトリクス

個別コンテナ内でのGPUリソース使用状態のモニタリングに重点を置いています。 各コンテナが割り当てられたリソースを効果的に使用しているかを評価します。

- **DCGM_FI_DEV_FB_FREE及びDCGM_FI_DEV_FB_USED** <span class='type'>Gauge</span>

  - 使用可能なフレームバッファ(Frame Buffer) メモリの容量と現在使用中のフレームバッファメモリの容量をメビバイト(MiB) 単位で示します。 

  - 各コンテナのGPUメモリの使用状態をモニタリングすることで、メモリリソースの割り当てを最適化し、リソース不足による性能低下を防止することができます。

{/* GPU 메모리의 가용성과 사용량을 동시에 파악할 수 있습니다. */}

- **DCGM_FI_DEV_SM_CLOCK及びDCGM_FI_DEV_MEM_CLOCK** <span class='type'>Gauge</span>

  - 各GPUのストリーミングマルチプロセッサ(SM) クロック周波数とメモリクロック周波数をMHz単位で示します。 

  - 各コンテナのGPUクロック速度をモニタリングし、性能最適化及び適切な周波数設定をサポートします。 これにより、各アプリケーションのニーズに合った性能を提供できます。

{/* GPU의 클럭 속도를 실시간으로 모니터링하여 성능을 평가합니다. */}

- **DCGM_FI_DEV_GPU_TEMP及びDCGM_FI_DEV_MEMORY_TEMP** <span class='type'>Gauge</span>

  - 各GPUの温度とメモリ温度を摂氏(C) 単位で測定します。 

  - 各コンテナのGPU温度をモニタリングして過熱を防止し、安定した運用を保証できます。 これにより、システムの寿命を延ばし、ダウンタイムを軽減できます。

{/* GPU와 메모리의 열적 상태를 실시간으로 평가하여 시스템의 안정성을 확보합니다. */}
