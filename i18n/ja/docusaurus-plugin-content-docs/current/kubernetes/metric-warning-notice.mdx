---
id: metric-warning-notice
title: メトリクスアラートの通知
description: 特定の複雑なイベントを設定するには、メトリクスイベント設定を使用します。
keywords:
  - アラート通知
  - メトリックスイベント
  - Kubernetesモニタリング
---

import Metricswarningnotice from "../common-items/_metrics-warning-notice.mdx";

<Metricswarningnotice />

import Compositemetricswarningnotice from "../common-items/_composite-metrics-warning-notice.mdx";

<Compositemetricswarningnotice />

import Metricseventmodifydelete from "../common-items/_metrics-event-modify-delete.mdx";

<Metricseventmodifydelete />

import Metricseventconditionselecttargetguide from "../common-items/_metrics-event-condition-select-target-guide.mdx";

<Metricseventconditionselecttargetguide />

## テンプレート {#template}

### メトリクスイベントテンプレート

:::note 

クバネティスイベントの`reason`フィールドの詳細については、[クバネティス公式文書](https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/events/event.go#L27)を参照してください。 

:::

#### **_BackOff_**

Kubernetesイベントの`reason`フィールド情報中`BackOff`が0を超える場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。 

> Kubernetesイベント(Kube Event `${message}`)

#### **_Evicted_**

Kubernetesイベントの`reason`フィールド情報が`Evicted`が0回以上取得された場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Kubernetesイベント(Kube Event `${message}`)

#### **_FailedCreatePodSandBox_**

Kubernetesイベントの`reason`フィールド情報が`FailedCreatePodSandBox`が0回以上取得された場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Kubernetesイベント(Kube Event `${message}`)

#### **_FailedMount_**

Kubernetesイベントの`reason`フィールド情報が`FailedMount`が0回以上収集された場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Kubernetesイベント(Kube Event `${message}`)

#### **_FailedScheduling_**

Kubernetesイベントの`reason`フィールド情報が`FailedScheduling`が0回以上収集された場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Kubernetesイベント(Kube Event `${message}`)

#### **_FailedSync_**

Kubernetesイベントの`reason`フィールド情報が`FailedSync`が0回以上収集された場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Kubernetesイベント(Kube Event `${message}`)

#### **_NodeNotReady_**

Kubernetesイベントの`reason`フィールド情報が`NodeNotReady`が0回以上収集された場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Kubernetesイベント(Kube Event `${message}`)

#### **_Unhealthy_**

Kubernetesイベントの`reason`フィールド情報が`Unhealthy`が0回以上収集された場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Kubernetesイベント(Kube Event `${message}`)

#### **_コンテナCPU割当てによる使用率アラート_**

コンテナのCPU Limit基準CPU全使用量(`${cpu_per_quota}`)が70%以上の場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> `${okindName}`の`${oname}`コンテナのCPU使用率が「`${cpu_per_quota}`% >= 70%」でです。

#### **_コンテナメモリ失敗回数_**

コンテナメモリLimit到達件数が1 回以上の場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> `${okindName}`の`${oname}`コンテナが limitを超えたため、`${mem_failcnt}`が増加しました。

#### **_コンテナメモリ使用率_**

コンテナメモリLimit基準使用量(`${container.mem_percent}`)が90%以上の場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> `${okindName}`の`${oname}`コンテナのメモリ使用率は「`${container.mem_percent}`% >= 90%」です。

#### **_コンテナDEAD状態の通知_**

コンテナステータスコードが`100`の場合、通知が発生します。ステータスコード`100`は、`DEAD`を意味します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> `${oname}`コンテナが`DEAD`状態です。

#### **_クラスタCPU Request通知_**

ノードに割り当て可能なCPU量をLimit CPUの総合で割った値に100を掛けた値が80%以上の場合、通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> クラスタのCPUクォータに対してCPU Request(最低要求リソース)が80％を超えました。

#### **_クラスタMemory Request通知_**

ノードに割り当て可能なメモリ量をLimit Memory総合で割った値に100を掛けた値が80%以上の場合、通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> クラスタのMemoryクォータに対してMemory Request(最低要求リソース)が 80%を超えました。

#### **_クラスタCPU Request通知_**

ノードに割り当て可能なCPU量をLimit CPUの総合で割った値に100を掛けた値が60%以上の場合、通知がが発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> クラスタのCPUクォータに対してCPU Request(最低要求リソース)が60％を超えました。

#### **_クラスタMemory Request通知_**

ノードに割り当て可能なメモリ量をLimit Memory総合で割った値に100を掛けた値が60%以上の場合、通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> クラスタのMemoryクォータに対してMemory Request(最低要求リソース)が 60%を超えました。

#### **_クラスタPod数の通知_**

ノードに割り当て可能なPodが存在しない場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> マスターに割当てできるPodの数は0です。

#### **_ノードCPU使用率のアラート通知_**

ノードのCPU使用率(`${cpu}`)が70%以上の場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> `${oname}`のCPU使用率が「`${cpu}`% >= 70%」です。

#### **_ノードメモリ使用率のアラート通知_**

ノードのメモリ使用率(`${memory_pused}`)が90%以上の場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> `${oname}`のメモリ使用率が「`${memory_pused}`% >= 90%」です。

#### **_割り当てできないノード通知_**

ノードに割り当て可能なPod数が 0以下の場合、通知が発生します。 

#### **_APDEX_**

トランザクションが存在し、APDEXスコアが0.7点未満の場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

ノードに割り当て可能なPod数が0個以下の場合、その通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> APDEXが0.7未満です (`${oname}`)

{/* 

#### **_HPA CPUの使用率通知_**

現在実行中のPodの数がリソース内の最大Pod数と同じで、CPU使用率が70%以上の場合、通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> HPA Podが生成可能な最大値に達して、CPU使用率が >= 70% の状況です。

#### **_HPAメモリの使用率通知_**

実行中のPod数がリソースの許容可能な最大Pod数と同じで、メモリ使用率が90%以上の場合、通知が発生します。 

> HPA Podの生成が最大値に達していて、メモリ使用率が「>=90%」です。

*/}

### 複合メトリクスのイベントテンプレート

#### **_Inactive agents has been found_**

動作中のエージェント数が指定された条件より少ない時に通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。 

> `${ip}` `${okindName}` The number of active agents has decreased to `${num_of_current_agents}`. 

#### **_TPS has changed by more than 30% compared to the previous week_**

アプリケーションのTPSが前週と比べ30%以上変化した時に通知が発生します。メッセージの例は次のとおりです。

> `${okindName}` a week ago : `${prev_week_tps_display}`, current : `${current_tps_display}`,  difference : `${one_week_diff_display}`

#### **_Very slow active transactions detected_**

アプリケーションの8秒超過区間のトランザクション数が平均10個を超えた時に通知が発生します。メッセージの例は次のとおりです。

> `${okindName}` `${very_slow_tx_cnt_m5_avg_display}` active transactions performed for more than 8 seconds were detected.

#### **_APDEX score dropped_**

APDEX点数が70未満になると通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> The average apdex of `${pname}` in the last 5 seconds is `${apdex_display}`

#### **_CPU % is too high_**

ノードのCPU使用率が80%を超えると通知が発生します。メッセージの例は次のとおりです。

> CPU utilization rate of the `${oname}` in the last minute > `${_rule_}` %

#### **_CPU User % is too high_**

ユーザーが使用するCPU使用率が50%を超えると通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> CPU User utilization rate of the `${oname}` in the last minute > `${_rule_}` %

#### **_The number of agents with high CPU SYS % is too large_**

システムが使用するCPU使用率が50%を超えると通知が発生します。メッセージの例は次のとおりです。 

> The number of agents with a CPU SYS of 70% or more in the last minute > `${_rule_}` %

#### **_The Disk I/O is too high_**

ディスクI/O使用率が10%を超えると通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> In the last minute, `${oname}`'s Disk I/O > `${_rule_}` %

#### **_The Disk Used % is too high_**

ファイル システムの使用率が90%を超えると通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> In the last minute, `${oname}`'s Disk Used > `${_rule_}` %

#### **_Network Traffic I/O is too high_**

ネットワークのインバウンドトラフィックまたはアウトバウンドトラフィックが10%を超えると通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> In the last minute, `${oname}`'s Network Traffic I/O > `${_rule_}` %

#### **_Network Packet I/O is too high_**

ネットワークのインバウンドパケットまたはアウトバウンドパケットが10%を超えると通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> In the last minute, `${oname}`'s Network Packet I/O > `${_rule_}` %

#### **_Network Error I/O is too high_**

ネットワークのインバウンドエラーまたはアウトバウンドエラーが10%を超えると通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> In the last minute, The maximum value of the `${oname}`'s Network Error I/O > `${_rule_}` %

#### **_The kube-apiserver latency over 10 second_**

コントロールプレーンコンポーネントのうち、kube-apiserverのlatencyが10秒を超えると通知が発生します。ただし、WATCH行為は除きます。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Latency of the `${verb}` verb in `${instance}` of kube-apiserver exceeded `${metricValue}` seconds.

#### **_The kube-apiserver response increase/decrease rate for error codes_**

コントロールプレーンコンポーネントのうち、kube-apiserverのエラーレスポンスが50件を超え、増減率が50%以上変化した場合、通知が発生します。<Cmdname sid="message" className="uitext" />例は次のとおりです。

> Rate of increase in the number of requests for code `${code}` on instance `${instance}` of kube-apiserver exceeded `${metricValue}`.
