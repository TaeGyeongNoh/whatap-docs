"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([["60210"],{65180:function(e,t,n){n.r(t),n.d(t,{metadata:()=>s,contentTitle:()=>l,default:()=>h,assets:()=>a,toc:()=>d,frontMatter:()=>c});var s=JSON.parse('{"id":"release-notes/golang/golang-0_1_8","title":"Go Agent v0.1.8","description":"Release data: 2022-01-19","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/release-notes/golang/golang-0.1.8.mdx","sourceDirName":"release-notes/golang","slug":"/release-notes/golang/golang-0_1_8","permalink":"/en/release-notes/golang/golang-0_1_8","draft":false,"unlisted":false,"editUrl":"undefined/docs/release-notes/golang/golang-0.1.8.mdx","tags":[],"version":"current","frontMatter":{"id":"golang-0_1_8","title":"Go Agent v0.1.8","toc_max_heading_level":2,"displayed_sidebar":"releaseSidebar","isTranslationMissing":false},"sidebar":"releaseSidebar"}'),r=n("85893"),i=n("50065");n("37016"),n("13348");let c={id:"golang-0_1_8",title:"Go Agent v0.1.8",toc_max_heading_level:2,displayed_sidebar:"releaseSidebar",isTranslationMissing:!1},l=void 0,a={},d=[{value:"Beta - update",id:"beta---update",level:2},{value:"Adding the concurrent user collection setting",id:"adding-the-concurrent-user-collection-setting",level:3},{value:"Configuration",id:"configuration",level:4},{value:"Active Status",id:"active-status",level:3},{value:"Collecting the internal metrics",id:"collecting-the-internal-metrics",level:3},{value:"Collecting the runtime metrics",id:"collecting-the-runtime-metrics",level:3},{value:"Collected metrics",id:"collected-metrics",level:4},{value:"Supporting RoundTripper by the NET/HTTP library",id:"supporting-roundtripper-by-the-nethttp-library",level:3}];function o(e){let t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Release data: 2022-01-19"}),"\n",(0,r.jsx)(t.section,{className:"remark-sectionize-h2",children:(0,r.jsx)(t.h2,{id:"beta---update",children:"Beta - update"})}),"\n",(0,r.jsxs)(t.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(t.h3,{id:"adding-the-concurrent-user-collection-setting",children:"Adding the concurrent user collection setting"}),(0,r.jsx)(t.p,{children:"The concurrent user metric displays the number of unique users from 5 minutes ago. The total number of users for 5 minutes appears. Unique user data is processed with the HyperLogLog algorithm."}),(0,r.jsx)(t.p,{children:"Unique user data is initially set as IP. In addition, the user identification data can be set as the values for HTTP header and cookie."})]}),"\n",(0,r.jsxs)(t.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(t.h4,{id:"configuration",children:"Configuration"}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"trace_user_header_ticket"})}),"\n",(0,r.jsx)(t.p,{children:'#Default : ""#'}),"\n",(0,r.jsx)(t.p,{children:"#Type: string#"}),"\n",(0,r.jsx)(t.p,{children:"Select the set HTTP header value as the unique user data."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"trace_user_cookie_keys"})}),"\n",(0,r.jsx)(t.p,{children:'#Default : ""#'}),"\n",(0,r.jsx)(t.p,{children:"#Type: string#"}),"\n",(0,r.jsx)(t.p,{children:"Select the set cookie value as the unique user data. With comma (,) as the delimiter, multiple names can be set. Search in the set order."}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(t.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(t.h3,{id:"active-status",children:"Active Status"}),(0,r.jsx)(t.p,{children:"The active status function has been added."}),(0,r.jsx)(t.p,{children:"The active status graph appears on the dashboard screen. Status includes general function, SQL, DB connection, external HTTP connection, and socket connection. The counts of active requests for each status appears on the graph."}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://img.whatap.io/media/agent_php/rease/tinified/active_status.png",alt:""})})]}),"\n",(0,r.jsxs)(t.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(t.h3,{id:"collecting-the-internal-metrics",children:"Collecting the internal metrics"}),(0,r.jsx)(t.p,{children:"Run a separate goroutine to collect metrics at an interval of 5 seconds."})]}),"\n",(0,r.jsxs)(t.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(t.h3,{id:"collecting-the-runtime-metrics",children:"Collecting the runtime metrics"}),(0,r.jsxs)(t.p,{children:["In ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.em,{children:"Analysis"})})," > ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.em,{children:"Metrics Chart"})}),", you can select the category, ",(0,r.jsx)(t.code,{children:"go_runtime"})," for inquiry."]})]}),"\n",(0,r.jsxs)(t.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(t.h4,{id:"collected-metrics",children:"Collected metrics"}),(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric name"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"NumCpu"}),(0,r.jsx)(t.td,{children:"Number of logical CPUs that can be used in the current process"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"NumCgoCall"}),(0,r.jsx)(t.td,{children:"Number of CGO calls in the current process"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"NumGoroutine"}),(0,r.jsx)(t.td,{children:"Number of the current go routines"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Alloc"}),(0,r.jsx)(t.td,{children:"Bytes of the allocated heap object"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"TotalAlloc"}),(0,r.jsx)(t.td,{children:"Cumulative bytes that has been allocated to the heap object"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Sys"}),(0,r.jsx)(t.td,{children:"Total bytes of the memory obtained from OS"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Lookups"}),(0,r.jsx)(t.td,{children:"-"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Mallocs"}),(0,r.jsx)(t.td,{children:"Cumulative number of the allocated heap objects"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Frees"}),(0,r.jsx)(t.td,{children:"Cumulative number of the freed heap objects"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HeapAlloc"}),(0,r.jsx)(t.td,{children:"Bytes of the allocated heap object"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HeapSys"}),(0,r.jsx)(t.td,{children:"Bytes of the heap memory obtained from OS"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HeapIdel"}),(0,r.jsx)(t.td,{children:"Unused bytes"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HeapInuse"}),(0,r.jsx)(t.td,{children:"Used bytes"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HeapReleased"}),(0,r.jsx)(t.td,{children:"Bytes of the physical memory returned to OS"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HeapObjects"}),(0,r.jsx)(t.td,{children:"Number of the allocated heap objects"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"StackInuse"}),(0,r.jsx)(t.td,{children:"Used stack bytes"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"StackSys"}),(0,r.jsx)(t.td,{children:"Bytes of the stack memory obtained from OS"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"MSpanInuse"}),(0,r.jsx)(t.td,{children:"Bytes of the allocated MSPAN"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"MSpanSys"}),(0,r.jsx)(t.td,{children:"Bytes of the memory obtained from OS for MSPAN"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"MCacheInuse"}),(0,r.jsx)(t.td,{children:"Bytes of the allocated MCache"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"MCacheSys"}),(0,r.jsx)(t.td,{children:"MCache bytes of the memory obtained from OS"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"BuckHashSys"}),(0,r.jsx)(t.td,{children:"Bytes of the memory profiling the bucket hash table"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"GCSys"}),(0,r.jsx)(t.td,{children:"Memory bytes of the garbage collection metadata"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"OtherSys"}),(0,r.jsx)(t.td,{children:"Bytes of other off-heap memories (runtime allocation)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"NextGC"}),(0,r.jsx)(t.td,{children:"Target heap size of the next GC cycle"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"LastGC"}),(0,r.jsx)(t.td,{children:"Time in which the last garbage collection has ended (unixstamp nanosecond)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"PauseTotalNs"}),(0,r.jsx)(t.td,{children:"Cumulative nanoseconds of GC"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"NumGC"}),(0,r.jsx)(t.td,{children:"Number of completed GC cycles"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"NumForcedGC"}),(0,r.jsx)(t.td,{children:"Number of forced GC cycles"})]})]})]})]}),"\n",(0,r.jsxs)(t.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(t.h3,{id:"supporting-roundtripper-by-the-nethttp-library",children:"Supporting RoundTripper by the NET/HTTP library"}),(0,r.jsxs)(t.p,{children:["It supports to use RoundTripper in the HTTP transport. Use the ",(0,r.jsx)(t.code,{children:"whatapsql.OpenContext"})," function instead of the ",(0,r.jsx)(t.code,{children:"sql.Open"})," function from the database/sql package. It is recommended to use the functions that pass the context, such as ",(0,r.jsx)(t.code,{children:"PrepareContext"}),", ",(0,r.jsx)(t.code,{children:"QueryContext"}),", and ",(0,r.jsx)(t.code,{children:"ExecContext"}),"."]}),(0,r.jsxs)(t.p,{children:["The context to be delivered must have the whatap TraceCtx data through ",(0,r.jsx)(t.code,{children:"trace.Start()"}),"."]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",metastring:"title='Install guide '",children:'import (\n  "github.com/whatap/go-api/instrumentation/net/http/whataphttp"\n)\n\nfunc main() {\n  config := make(map[string]string)\n  trace.Init(config)\n  defer trace.Shutdown()\n  \n  ctx, _ := trace.Start(context.Background(), "Http call")\n  defer trace.End(ctx, nil)\n\n  callUrl := "http://aaa.com/xxx"\n  client := http.DefaultClient\n      \n  // Use the WhaTap RoundTripper. Deliver the context that has the whatap\'s TraceCtx. \n  client.Transport = whataphttp.NewRoundTrip(ctx, http.DefaultTransport)\n      \n  resp, err := client.Get(callUrl)\n  if err != nil {\n      ...\n  }\n  defer resp.Body.Close()\n\n  ...\n}\n'})}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/whatap/go-api-example/tree/main/net/http/client",children:"Reference example"})})]})]})}function h(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},37016:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(85893);function r(e){let{children:t,priority:n}=e;return n?(0,s.jsx)("code",{className:t,type:n,children:t}):(0,s.jsx)("code",{className:t,children:t})}n(67294)},13348:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(85893);function r(e){let{children:t}=e;return(0,s.jsx)("span",{className:"uitext",children:t})}n(67294)},50065:function(e,t,n){n.d(t,{Z:function(){return l},a:function(){return c}});var s=n(67294);let r={},i=s.createContext(r);function c(e){let t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);