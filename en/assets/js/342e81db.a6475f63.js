"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([["24870"],{66095:function(e,n,t){t.r(n),t.d(n,{metadata:()=>r,contentTitle:()=>c,default:()=>d,assets:()=>l,toc:()=>p,frontMatter:()=>o});var r=JSON.parse('{"id":"release-notes/golang/golang-0_1_14","title":"Go Agent v0.1.14","description":"December 14, 2022","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/release-notes/golang/golang-0.1.14.mdx","sourceDirName":"release-notes/golang","slug":"/release-notes/golang/golang-0_1_14","permalink":"/en/release-notes/golang/golang-0_1_14","draft":false,"unlisted":false,"editUrl":"undefined/docs/release-notes/golang/golang-0.1.14.mdx","tags":[],"version":"current","frontMatter":{"id":"golang-0_1_14","title":"Go Agent v0.1.14","toc_max_heading_level":2,"displayed_sidebar":"releaseSidebar","isTranslationMissing":false},"sidebar":"releaseSidebar"}'),i=t("85893"),a=t("50065"),s=t("37016");t("13348");let o={id:"golang-0_1_14",title:"Go Agent v0.1.14",toc_max_heading_level:2,displayed_sidebar:"releaseSidebar",isTranslationMissing:!1},c=void 0,l={},p=[{value:"December 14, 2022",id:"december-14-2022",level:4}];function h(e){let n={a:"a",code:"code",h4:"h4",li:"li",p:"p",pre:"pre",section:"section",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,i.jsx)(n.h4,{id:"december-14-2022",children:"December 14, 2022"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(s.Z,{children:"Fixed"})," Fixed the problem where the CPU usage increases while the UDP server is stopped."]}),"\n",(0,i.jsx)(n.p,{children:"While the UDP server is stopped (whatap-agent service stopped), the CPU load of the application with the Go monitoring applied increases. As the UDP server access and shutdown processes were repeated, multiple UDP connections were maintained, resulting in the increase of CPU usage."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(s.Z,{children:"New"})," The k8s.io/client-go/kubernetes library has been supported."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/whatap/go-api-example/tree/main/k8s.io/client-go/kubernetes",children:"Reference example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",metastring:"title='golang'",children:'import (\n  "k8s.io/client-go/rest"\n)\n\nfunc main() {\n  // Init whatap trace\n  config := make(map[string]string)\n  trace.Init(config)\n  defer trace.Shutdown()\n\n  ...\n\n  config, err := clientcmd.BuildConfigFromFlags("", *kubeconfig)\n  if err != nil {\n    return nil, err\n  }\n\n  // Set the whatap roundTripper function. \n  config.WrapTransport = wRT.WrapRoundTripper()\n\n  clientset, err := kubernetes.NewForConfig(config)\n  if err != nil {\n    return nil, err\n  }\n\n  deploymentsClient := clientset.AppsV1().Deployments(conf.Server.Namespace)\n\n  ...\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(s.Z,{children:"New"})," The github.com/gofiber/fiber/v2 library has been supported."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/whatap/go-api-example/tree/main/github.com/gofiber/fiber",children:"Reference example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",metastring:"title='golang'",children:'import (\n  "github.com/whatap/go-api/instrumentation/github.com/gofiber/fiber/v2/whatapfiber"\n)\n\nfunc main() {\n  // Init whatap trace\n  config := make(map[string]string)\n  trace.Init(config)\n  defer trace.Shutdown()\n\n  ...\n\n  r := fiber.New(fiber.Config{\n    StrictRouting: true,\n    Views:         engine,\n  })\n\n  r.Use(recover.New())\n\n  // Register the middleware of whatapfiber.\n  r.Use(whatapfiber.Middleware())\n  \n  ...\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(s.Z,{children:"New"})," The github.com/valyala/fasthttp library has been supported."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/whatap/go-api-example/tree/main/github.com/valyala/fasthttp",children:"Reference example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",metastring:"title='golang'",children:'import (\n  "github.com/whatap/go-api/instrumentation/github.com/valyala/fasthttp/whatapfasthttp"\n)\n\nfunc main() {\n  // Init whatap trace\n  config := make(map[string]string)\n  trace.Init(config)\n  defer trace.Shutdown()\n\n  ...\n    \n  r := fiber.New(fiber.Config{\n    StrictRouting: true,\n    Views:         engine,\n  })\n\n  r.Use(recover.New())\n\n  // Use the wrapper function, whatapfasthttp.Func. \n  r.GET("/", whatapfasthttp.Func(func(ctx *fasthttp.RequestCtx) {\n    ...\n  }))\n  r.GET("/hello/{name}", whatapfasthttp.Func(func(ctx *fasthttp.RequestCtx) {\n    fmt.Fprintf(ctx, "Hello, %s!\\n", ctx.UserValue("name"))\n    ctx.SetContentType("text/html;charset=utf8")\n  }))\n}\n'})}),"\n"]}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},37016:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(85893);function i(e){let{children:n,priority:t}=e;return t?(0,r.jsx)("code",{className:n,type:t,children:n}):(0,r.jsx)("code",{className:n,children:n})}t(67294)},13348:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(85893);function i(e){let{children:n}=e;return(0,r.jsx)("span",{className:"uitext",children:n})}t(67294)},50065:function(e,n,t){t.d(n,{Z:function(){return o},a:function(){return s}});var r=t(67294);let i={},a=r.createContext(i);function s(e){let n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);