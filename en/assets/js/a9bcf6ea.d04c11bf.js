"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([["72301"],{88128:function(n,e,s){s.r(e),s.d(e,{metadata:()=>t,contentTitle:()=>l,default:()=>h,assets:()=>a,toc:()=>c,frontMatter:()=>o});var t=JSON.parse('{"id":"aws-log/install-aws-log-vpc","title":"Configuring VPC in WhaTap Forwarder","description":"It guides you to additional settings for WhaTap Forwarder to be available in the VPC environment.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/aws-log/install-aws-log-vpc.mdx","sourceDirName":"aws-log","slug":"/aws-log/install-aws-log-vpc","permalink":"/en/aws-log/install-aws-log-vpc","draft":false,"unlisted":false,"editUrl":"undefined/docs/aws-log/install-aws-log-vpc.mdx","tags":[],"version":"current","frontMatter":{"id":"install-aws-log-vpc","title":"Configuring VPC in WhaTap Forwarder","description":"It guides you to additional settings for WhaTap Forwarder to be available in the VPC environment.","toc_max_heading_level":2,"keywords":["AWS Log","Installation"],"isTranslationMissing":false},"sidebar":"awslogSidebar","previous":{"title":"Installation","permalink":"/en/aws-log/install-aws-log"},"next":{"title":"\uC790\uC6D0 \uC0AD\uC81C\uD558\uAE30","permalink":"/en/aws-log/delete-aws-resource"}}'),i=s("85893"),r=s("50065");let o={id:"install-aws-log-vpc",title:"Configuring VPC in WhaTap Forwarder",description:"It guides you to additional settings for WhaTap Forwarder to be available in the VPC environment.",toc_max_heading_level:2,keywords:["AWS Log","Installation"],isTranslationMissing:!1},l=void 0,a={},c=[{value:"Modifying the Lambda execution role",id:"modifying-the-lambda-execution-role",level:2},{value:"VPC configuration",id:"vpc-configuration",level:2}];function d(n){let e={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,r.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsxs)(e.p,{children:["This document guides you to additional settings required in the ",(0,i.jsx)("span",{class:"vpcbold",children:"VPC"})," environment to use ",(0,i.jsx)(e.strong,{children:"WhaTap Forwarder"}),". First install ",(0,i.jsx)(e.strong,{children:"WhaTap Forwarder"}),". For more information, see ",(0,i.jsx)(e.a,{href:"../aws-log/install-aws-log#install-whatap-forwarder",children:"the following"}),"."]})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"WhaTap Forwarder"})," collects the AWS logs for AWS Cloudwatch LogGroup and S3. Use the AWS Lambda function for installation. AWS Lambda does not start from ",(0,i.jsx)("span",{class:"vpcbold",children:"VPC"})," (Virtual Private Cloud) by default. However, with the following additional settings, ",(0,i.jsx)(e.strong,{children:"WhaTap Forwarder"})," can be started in the ",(0,i.jsx)("span",{class:"vpcbold",children:"VPC"})," environment."]}),"\n",(0,i.jsxs)(e.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(e.h2,{id:"modifying-the-lambda-execution-role",children:"Modifying the Lambda execution role"}),(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["On the AWS Lambda Function console, select ",(0,i.jsx)(e.strong,{children:"WhaTap Forwarder"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["On the ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Configuration"})})," tab, select ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Execution role"})})," in ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Permissions"})})," to go to the AWS IAM console."]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Lambda Execution Role",src:s(63639).Z+"",width:"1200",height:"665"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Go to ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Permissions policies"})})," under the IAM console's ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Permissions"})})," tab."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Select ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"forwarderpolicy"})})," in the policy list to go to the policy editing screen."]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"IAM Console",src:s(61988).Z+"",width:"1184",height:"970"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Select ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"JSON"})})," tab and then copy and paste the following policy. The policy creates, defines, and deletes ",(0,i.jsx)(e.em,{children:"ENI"}),"."]}),"\n"]}),"\n"]}),(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",metastring:"title='IAM Policy'",children:'\n{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Action": [\n                "logs:CreateLogGroup",\n                "logs:CreateLogStream",\n                "logs:PutLogEvents"\n            ],\n            "Resource": "arn:aws:logs:{AWS REGION}:{AWS ACCOUNT ID}:log-group:/aws/lambda/*",\n            "Effect": "Allow"\n        },\n        \n            "Action": [\n                "s3:Get*",\n                "s3:List*",\n                "s3-object-lambda:Get*",\n                "s3-object-lambda:List*"\n            ],\n            "Resource": "*",\n            "Effect": "Allow"\n        },\n        {\n            "Action": [\n                "ec2:CreateNetworkInterface",\n                "ec2:DescribeNetworkInterfaces",\n                "ec2:DeleteNetworkInterface"\n            ],\n            "Resource": "*",\n            "Effect": "Allow"\n        }\n    ]\n}\n\n'})})]}),"\n",(0,i.jsxs)(e.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(e.h2,{id:"vpc-configuration",children:"VPC configuration"}),(0,i.jsx)("div",{class:"vpcb",children:(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["On the AWS Lambda Function console, select ",(0,i.jsx)(e.strong,{children:"WhaTap Forwarder"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["In ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"VPC"})})," under the ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Configuration"})})," tab, select ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Edit"})})," to go to the VPC editing screen."]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"VPC Editing",src:s(93237).Z+"",width:"1200",height:"788"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Seeing the following, set ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"VPC"})}),", ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Subnets"})}),", and ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Security groups"})}),", and then select ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.em,{children:"Save"})})," to save the results."]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Subnet and Security Group",src:s(24625).Z+"",width:"1200",height:"1634"})}),"\n",(0,i.jsxs)(e.admonition,{type:"note",children:[(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Subnets"})}),(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Access the Internet through ",(0,i.jsx)(e.strong,{children:"IGW"})," with ",(0,i.jsx)(e.strong,{children:"Public IP"})," of the ",(0,i.jsx)(e.strong,{children:"NAT Gateway"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["To connect the Internet via ",(0,i.jsx)(e.strong,{children:"IGW"}),", ",(0,i.jsx)(e.strong,{children:"Public IP"})," is required. ",(0,i.jsx)(e.em,{children:"ENI"})," of Lambda cannot allocate ",(0,i.jsx)(e.strong,{children:"Public IP"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["The request is not sent to ",(0,i.jsx)(e.strong,{children:"Private Subnet"}),", the Internet gateway. Accordingly, select a subnet on which outbound traffic is routed to ",(0,i.jsx)(e.strong,{children:"NAT Gateway"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"WhatTap Forwarder"})," in ",(0,i.jsx)(e.strong,{children:"Private Subnet"})," and ",(0,i.jsx)(e.strong,{children:"Public Subnet"})]}),"\n"]}),"\n"]}),(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Subnet sc",src:s(69877).Z+"",width:"1966",height:"1598"})})]}),"\n",(0,i.jsxs)(e.admonition,{type:"note",children:[(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Security groups"})}),(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["A security group with the ",(0,i.jsx)(e.strong,{children:"outbound"})," open is required."]}),"\n"]})]}),"\n"]}),"\n"]})})]})]})}function h(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},69877:function(n,e,s){s.d(e,{Z:function(){return t}});let t=s.p+"assets/images/whatap-forwarder-subnet-819daf45d92178f9b4f78e4f7e564274.png"},61988:function(n,e,s){s.d(e,{Z:function(){return t}});let t=s.p+"assets/images/whatap-forwarder-vpc-aws-iam-9571fc082f4ccc3d33a4aaf6a5a2b661.png"},93237:function(n,e,s){s.d(e,{Z:function(){return t}});let t=s.p+"assets/images/whatap-forwarder-vpc-edit-a23f3f0901f183706bdabf3525bae2af.png"},63639:function(n,e,s){s.d(e,{Z:function(){return t}});let t=s.p+"assets/images/whatap-forwarder-vpc-lambda-b775b4eba6d4079e51782ad4f18f269f.png"},24625:function(n,e,s){s.d(e,{Z:function(){return t}});let t=s.p+"assets/images/whatap-forwarder-vpc-sg-607b7df3b79ad74b450215bd39edb8ad.png"},50065:function(n,e,s){s.d(e,{Z:function(){return l},a:function(){return o}});var t=s(67294);let i={},r=t.createContext(i);function o(n){let e=t.useContext(r);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);