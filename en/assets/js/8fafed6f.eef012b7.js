"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([["63638"],{98965:function(e,n,s){s.d(n,{ZP:function(){return l},d$:function(){return i}});var o=s(85893),t=s(50065);let i=[{value:"Applying to the server-installed DB",id:"applying-to-the-server-installed-db",level:2},{value:"Applying to the AWS RDS logs",id:"applying-to-the-aws-rds-logs",level:2},{value:"Configuration for monitoring AWS RDS logs",id:"configuration-for-monitoring-aws-rds-logs",level:3},{value:"Checking the roles",id:"checking-the-roles",level:3},{value:"Installation and configuration",id:"installation-and-configuration",level:3},{value:"Checking the created resourced",id:"checking-the-created-resourced",level:3},{value:"Checking the filters and rules",id:"checking-the-filters-and-rules",level:3},{value:"Starting the log monitoring",id:"starting-the-log-monitoring",level:2}];function r(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,t.a)(),...e.components},{Cmdname:i,ImgLang:r,InDoc:l,Link:c,Xclude:d}=n;return!i&&a("Cmdname",!0),!r&&a("ImgLang",!0),!l&&a("InDoc",!0),!c&&a("Link",!0),!d&&a("Xclude",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["WhaTap provides the database log monitoring service. You can collect logs from server-installed databases and AWS RDS that is a cloud service. Through this, you can check the scattered logs in the database at a glance in ",(0,o.jsx)(i,{sid:"side_logTail",className:"uitext"})," and ",(0,o.jsx)(i,{sid:"side_logExplorer",className:"uitext"})," for log monitoring."]}),"\n",(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsxs)(n.p,{children:["After log monitoring has been applied, installed DB is displayed as ",(0,o.jsx)(n.code,{children:"#DB"}),", AWS RDS as ",(0,o.jsx)(n.code,{children:"#RDS_LOG"}),", and ",(0,o.jsx)(n.code,{children:"#RDS_EVENT"})," in ",(0,o.jsx)(i,{sid:"category",className:"uitext"})," of each menu and the log list."]}),(0,o.jsx)(r,{img:"db-log-category.png",desc:"Category",className:"width-200"})]}),"\n",(0,o.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,o.jsx)(n.h2,{id:"applying-to-the-server-installed-db",children:"Applying to the server-installed DB"}),(0,o.jsxs)(n.p,{children:["To monitor logs in server-installed databases, apply the following options in ",(0,o.jsx)(n.em,{children:"xos.conf"})," file."]}),(0,o.jsx)(l,{product:"mysql",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",metastring:"title='xos.conf'",children:"file=/var/log/mysqld.log\nfile1=/var/log/mysql_history.log\nfile2=/var/lib/mysql/dbx-database-slow.log\n"})})}),(0,o.jsx)(l,{product:"postgresql",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",metastring:"title='xos.conf'",children:"file=/opt/postgresql/logs/postgresql.log\nfile1=/opt/postgresql/data/logs/pg10/postgresql-Sun.log\nfile2=/opt/postgresql/data/logs/pg10/postgresql-Mon.log\nfile3=/opt/postgresql/data/logs/pg10/postgresql-Tue.log\n"})})}),(0,o.jsx)(l,{product:"oracle,oracle-pro",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",metastring:"title='xos.conf'",children:"file=/home/oracle/diag/rdbms/ora18/ORA18/trace/alert_ORA18.log\n"})})}),(0,o.jsx)(l,{product:"redis",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",metastring:"title='xos.conf'",children:"file=/var/log/redis.log\n"})})}),(0,o.jsx)(l,{product:"mongodb",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",metastring:"title='xos.conf'",children:"file=/var/log/mongodb/mongodb.log\n"})})}),(0,o.jsx)(l,{product:"altibase",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",metastring:"title='xos.conf'",children:"file=/home/altibase/altibase-server-x.y.z/trc/altibase_boot.log\n"})})}),(0,o.jsx)(l,{product:"cubrid",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",metastring:"title='xos.conf'",children:"file=/cubrid-11.0/log/server/demodb_latest.err\n"})})}),(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsx)(l,{product:"mysql,postgresql,oracle,altibase,redis,mongodb,cubrid",children:(0,o.jsxs)(n.p,{children:["Before application, install the XOS agent and then proceed with agent configuration. For more information, see ",(0,o.jsx)(n.a,{href:"agent-xos-settings",children:"the following"}),"."]})}),(0,o.jsx)(l,{product:"oracle-pro",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Oracle Pro"})," products come with the built-in XOS agent, eliminating the need for a separate installation process."]})})]}),(0,o.jsxs)(d,{product:"altibase,cubrid",children:[(0,o.jsx)(n.h2,{id:"applying-to-the-aws-rds-logs",children:"Applying to the AWS RDS logs"}),(0,o.jsx)(n.h3,{id:"configuration-for-monitoring-aws-rds-logs",children:"Configuration for monitoring AWS RDS logs"}),(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"AWS RDS Log",src:s(63094).Z+"",width:"800",height:"443"})}),(0,o.jsxs)(n.p,{children:["AWS provides various information for RDS monitoring. To check information, directly access the AWS console. However, WhaTap's ",(0,o.jsx)(n.strong,{children:"AWS RDS Log"})," provides logs and events from RDS in ",(0,o.jsx)(i,{sid:"side_log",className:"uitext"})," under Database Monitoring."]}),(0,o.jsxs)(n.p,{children:["WhaTap's ",(0,o.jsx)(n.strong,{children:"AWS RDS Log"})," can be installed through ",(0,o.jsx)(n.strong,{children:"AWS CloudFormation"}),". For more information about ",(0,o.jsx)(n.strong,{children:"AWS CloudFormation"}),", see ",(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/Welcome.html",children:"the following link"}),"."]}),(0,o.jsx)(n.h3,{id:"checking-the-roles",children:"Checking the roles"}),(0,o.jsxs)(n.p,{children:["To install WhaTap's ",(0,o.jsx)(n.strong,{children:"AWS RDS Log"})," via ",(0,o.jsx)(n.strong,{children:"AWS CloudFormation"}),", first check the required IAM roles."]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Action": [\n        "cloudformation:CreateStack",\n        "cloudformation:UpdateStack",\n        "cloudformation:DeleteStack",\n        "cloudformation:DescribeStacks",\n        "cloudformation:DescribeStackEvents",\n        "cloudformation:DescribeStackResource"\n      ],\n      "Resource": "*"\n    },\n    {\n      "Effect": "Allow",\n      "Action": [\n        "s3:CreateBucket",\n        "s3:PutBucketVersioning",\n        "s3:PutBucketPublicAccessBlock"\n      ],\n      "Resource": "*"\n    },\n    {\n      "Effect": "Allow",\n      "Action": [\n        "lambda:CreateFunction",\n        "lambda:UpdateFunctionCode",\n        "lambda:UpdateFunctionConfiguration",\n        "lambda:DeleteFunction",\n        "lambda:AddPermission"\n      ],\n      "Resource": "*"\n    },\n    {\n      "Effect": "Allow",\n      "Action": [\n        "iam:CreateRole",\n        "iam:GetRole",\n        "iam:AttachRolePolicy"\n      ],\n      "Resource": "*"\n    }\n  ]\n}\n'})}),(0,o.jsx)(n.h3,{id:"installation-and-configuration",children:"Installation and configuration"}),(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["It can be installed using the ",(0,o.jsx)(n.strong,{children:"AWS CloudFormation"})," template provided by WhaTap. Access the following link and then enter the following items in the ",(0,o.jsx)(n.strong,{children:"Parameters"})," section."]}),"\n",(0,o.jsx)(c,{to:"https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/quickcreate?stackName=WhaTapRDSLogAndEvent&templateURL=https://s3.ap-northeast-2.amazonaws.com/repo.whatap.io/agent/db/WhaTapRDSLogInstall.template",target:"_blank",className:"ext-link",children:"AWS CloudFormation Install"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Host"}),": Address of the WhaTap collection server. It can be viewed in ",(0,o.jsx)(i,{sid:"side_management",className:"uitext"})," > ",(0,o.jsx)(i,{sid:"side_agentInstall",className:"uitext"})," under the WhaTap project. e.g. 13.124.11.223 / 13.209.172.35"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"MemorySize"}),": WhaTapRDSLog's memory size. Enter a value between 128 MB and 10,240 MB."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Pcode"}),": Project code of a WhaTap project. Check the ",(0,o.jsx)(i,{sid:"pcode",className:"uitext"})," in ",(0,o.jsx)(i,{sid:"side_management",className:"uitext"})," > ",(0,o.jsx)(i,{sid:"side_projectManagement",className:"uitext"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"ProjectAccessKey"}),": Access key of a WhaTap project. Check the ",(0,o.jsx)(i,{sid:"project_access_key",className:"uitext"})," in ",(0,o.jsx)(i,{sid:"side_management",className:"uitext"})," > ",(0,o.jsx)(i,{sid:"side_projectManagement",className:"uitext"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"TimeOut"}),": Maximum time in which the installed WhatTapRDSLog is maintained while running."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"UseReservedConcurrency"}),": Whether or not to use the reserved concurrency for WhatTapRDS."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"ReservedConcurrency"}),": Maximum number of instances that WhatapRDS can run at the same time when using the reserved concurrency."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Access the following link for log monitoring configuration details."}),"\n",(0,o.jsx)(c,{to:"https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/quickcreate?stackName=WhatapRDSLogAndEventSettings&templateURL=https://s3.ap-northeast-2.amazonaws.com/repo.whatap.io/agent/db/WhaTapRDSLogSetting.template",target:"_blank",className:"ext-link",children:"AWS CloudFormation Setting"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In the ",(0,o.jsx)(n.strong,{children:"Parameters"})," section, enter the following:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"AwsRdsNames"}),": List of names of RDS clusters and instances to receive events"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"e.g. database-1, seoul-pro-db-01, seoul-pro-db-01-writer \u2026"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Enter ",(0,o.jsx)(n.code,{children:"none"})," if you do not want to create an event rule."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"RdsLogGroupName"})," (",(0,o.jsx)(n.strong,{children:"1-9"}),"): RDS CloudWatchLogGroup name from which you want to receive logs"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"e.g. /aws/rds/seoul-pro-db-01"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Enter ",(0,o.jsx)(n.code,{children:"none"})," if you do not want to create a subscription filter."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"You can connect up to 9 CloudWatch log groups."})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"WhaTapRDSLogArn"}),": WhataTapRDSLogArn generated in the previous step"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"AWS CloudFormation output",src:s(46995).Z+"",width:"1200",height:"221"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),(0,o.jsx)(n.h3,{id:"checking-the-created-resourced",children:"Checking the created resourced"}),(0,o.jsxs)(n.p,{children:["Check the resources installed through ",(0,o.jsx)(n.strong,{children:"AWS CloudFormation"}),"."]}),(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"AWS RDS Log",src:s(23079).Z+"",width:"1200",height:"853"})}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"S3"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Bucket: AWS S3 bucket (CopyZips) that stores executable files of WhaTap ",(0,o.jsx)(n.strong,{children:"AWS RDS Log"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Lambda"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Function"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"CopyZipsFunction: AWS Lambda function that moves executable files from the WhaTap AWS S3 bucket to your environment"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"WhaTapRDSLog: AWS Lambda function for AWS RDS monitoring"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Permission"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"CWPermission: Permission to run WhataTapRDSLog when logs are created in RDS CloudWatchLogGroup"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"EventBridgePermission: Permission to run WhataTapRDSLog in EventBridge when RDS events occur"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Role"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Role required for CopyZipsFunction to get files from WhaTap's S3 and put them into CopyZips"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Role required for WhatTapRDSLog to leave logs in CloudWatchLogGroup"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),(0,o.jsx)(n.h3,{id:"checking-the-filters-and-rules",children:"Checking the filters and rules"}),(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"AWS CloudFormation",src:s(81643).Z+"",width:"800",height:"580"})}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"WS CloudWatchLogGroup"})}),"\n",(0,o.jsx)(n.p,{children:"SubscriptionFilter (1-9): Filter that executes WhatapRDSLog when logs come into the CloudWatch LogGroup of RDS."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"AWS EventBridge"})}),"\n",(0,o.jsx)(n.p,{children:"Rule: Rule that triggers WhatapRDSLog when RDS events occur among AWS events"}),"\n"]}),"\n"]})]})]}),"\n",(0,o.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,o.jsx)(n.h2,{id:"starting-the-log-monitoring",children:"Starting the log monitoring"}),(0,o.jsxs)(n.p,{children:["After configuring all settings, go to ",(0,o.jsx)(i,{sid:"side_log",className:"uitext"})," > ",(0,o.jsx)(i,{sid:"side_logSetting",className:"uitext"})," to activate the log monitoring."]}),(0,o.jsx)(d,{product:"oracle-pro",children:(0,o.jsx)(r,{img:"log-start-db.png",desc:"Start Log Monitoring"})}),(0,o.jsx)(l,{product:"oracle-pro",children:(0,o.jsx)(r,{img:"log-start-db-oracle-pro.png",desc:"Start Log Monitoring"})})]})]})}function l(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(r,{...e})}):r(e)}function a(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},20437:function(e,n,s){s.r(n),s.d(n,{metadata:()=>o,contentTitle:()=>a,default:()=>g,assets:()=>c,toc:()=>d,frontMatter:()=>l});var o=JSON.parse('{"id":"oracle-pro/log-db","title":"Application","description":"It guides you how to collect logs from the database and AWS RDS.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/oracle-pro/log-db.mdx","sourceDirName":"oracle-pro","slug":"/oracle-pro/log-db","permalink":"/en/oracle-pro/log-db","draft":false,"unlisted":false,"editUrl":"undefined/docs/oracle-pro/log-db.mdx","tags":[],"version":"current","frontMatter":{"id":"log-db","title":"Application","description":"It guides you how to collect logs from the database and AWS RDS.","keywords":["Log Monitoring","DATABASE","Oracle Pro"],"isTranslationMissing":false},"sidebar":"dboracledmaSidebar","previous":{"title":"Log","permalink":"/en/oracle-pro/log-main"},"next":{"title":"Live Tail","permalink":"/en/oracle-pro/log-lt"}}'),t=s("85893"),i=s("50065"),r=s("98965");let l={id:"log-db",title:"Application",description:"It guides you how to collect logs from the database and AWS RDS.",keywords:["Log Monitoring","DATABASE","Oracle Pro"],isTranslationMissing:!1},a=void 0,c={},d=[...r.d$];function h(e){return(0,t.jsx)(r.ZP,{})}function g(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},81643:function(e,n,s){s.d(n,{Z:function(){return o}});let o=s.p+"assets/images/aws-rds-log-check-resources-6c15f78e80ce34df398743986f07b87e.png"},63094:function(e,n,s){s.d(n,{Z:function(){return o}});let o=s.p+"assets/images/aws-rds-log-diagram-38a4751e83f4b9f4f855b857bd1041ed.png"},23079:function(e,n,s){s.d(n,{Z:function(){return o}});let o=s.p+"assets/images/aws-rds-log-resource-baf3c017246828c34b2cd78d74de0ad6.png"},46995:function(e,n,s){s.d(n,{Z:function(){return o}});let o=s.p+"assets/images/aws-rds-log-setting-output-13f6fa4f96ba78330f40e7552e319975.png"},50065:function(e,n,s){s.d(n,{Z:function(){return l},a:function(){return r}});var o=s(67294);let t={},i=o.createContext(t);function r(e){let n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);