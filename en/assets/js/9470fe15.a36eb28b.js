"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([["87300"],{17030:function(e,t,n){n.r(t),n.d(t,{metadata:()=>a,contentTitle:()=>c,default:()=>o,assets:()=>d,toc:()=>l,frontMatter:()=>s});var a=JSON.parse('{"id":"release-notes/php/php-2_4_0","title":"PHP Agent v2.4.0","description":"Release date: 2021-12-16","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/release-notes/php/php-2.4.0.mdx","sourceDirName":"release-notes/php","slug":"/release-notes/php/php-2_4_0","permalink":"/en/release-notes/php/php-2_4_0","draft":false,"unlisted":false,"editUrl":"undefined/docs/release-notes/php/php-2.4.0.mdx","tags":[],"version":"current","frontMatter":{"id":"php-2_4_0","title":"PHP Agent v2.4.0","toc_max_heading_level":2,"displayed_sidebar":"releaseSidebar","isTranslationMissing":false},"sidebar":"releaseSidebar"}'),i=n("85893"),r=n("50065");n("37016"),n("13348");let s={id:"php-2_4_0",title:"PHP Agent v2.4.0",toc_max_heading_level:2,displayed_sidebar:"releaseSidebar",isTranslationMissing:!1},c=void 0,d={},l=[{value:"Change (update)",id:"change-update",level:2},{value:"PHP 8.1",id:"php-81",level:3},{value:"Fixed (bug fixing)",id:"fixed-bug-fixing",level:2},{value:"cURL header setting data initialization error",id:"curl-header-setting-data-initialization-error",level:3}];function h(e){let t={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",section:"section",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Release date: 2021-12-16"}),"\n",(0,i.jsx)(t.section,{className:"remark-sectionize-h2",children:(0,i.jsx)(t.h2,{id:"change-update",children:"Change (update)"})}),"\n",(0,i.jsxs)(t.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(t.h3,{id:"php-81",children:"PHP 8.1"}),(0,i.jsx)(t.p,{children:"PHP 8.1 is supported."})]}),"\n",(0,i.jsx)(t.section,{className:"remark-sectionize-h2",children:(0,i.jsx)(t.h2,{id:"fixed-bug-fixing",children:"Fixed (bug fixing)"})}),"\n",(0,i.jsxs)(t.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(t.h3,{id:"curl-header-setting-data-initialization-error",children:"cURL header setting data initialization error"}),(0,i.jsxs)(t.p,{children:["When setting the HTTP header (CURLOPT_HTTPHEADER) through the ",(0,i.jsx)(t.code,{children:"curl_setopt"})," and ",(0,i.jsx)(t.code,{children:"curl_setopt_array"})," functions, if duplicate settings are made, the previous data is initialized and the new data is set."]}),(0,i.jsxs)(t.p,{children:["When the multi-transaction (",(0,i.jsx)(t.code,{children:"whatap.mtrace_enabled=true"}),") setting is enabled, there is an error in which the previous user header data is initialized by setting the Whatap Header data before the ",(0,i.jsx)(t.code,{children:"curl_exec()"})," function."]}),(0,i.jsxs)(t.p,{children:["The function to set the WhaTap Header has been removed before calling the ",(0,i.jsx)(t.code,{children:"curl_exec()"})," function and it has been modified to set it after calling the ",(0,i.jsx)(t.code,{children:"curl_init()"})," function."]}),(0,i.jsxs)(t.p,{children:["If the user header is set before the ",(0,i.jsx)(t.code,{children:"curl_exec()"})," function is called, the WhatTap header set in advance is deleted."]}),(0,i.jsx)(t.p,{children:"To do multi-transaction, add the WhatTap header directly in the PHP source code according to the following guide."}),(0,i.jsx)(t.p,{children:"Sample source code /usr/whatap/php/lib/Whatap/sample_mtrace.php"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",metastring:"title='php'",children:'// Whatap installation directory (/usr/whatap/php/lib/Whatap/Whatap.php)  \n// Load Whatap.php. \ninclude_once \'./Whatap.php\';\n\n...\n\n// User header information\n$headers = array();\narray_push($headers, "aaaa:bbbb");\n\n// Add the Whatap header \n$whatap_mtrace = Whatap::whatap_get_mtrace();\nforeach ($whatap_mtrace as $key => $value){\n	//echo $key."=".$value."<br/>";\n	array_push($headers, "$key:$value");\n}\nunset($value);\n\ncurl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n...\n'})}),(0,i.jsx)(t.p,{children:"You can adjust the automatic setup function with the following settings:"}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"whatap.mtrace_auto_inject_enabled=true"})}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["After calling the ",(0,i.jsx)(t.code,{children:"curl_init()"})," function, the whatap header is set while internally calling ",(0,i.jsx)(t.code,{children:"curl_setopt()"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"false"}),": The automatic setting for the WhaTap header is stopped."]}),"\n"]})]})]})}function o(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},37016:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(85893);function i(e){let{children:t,priority:n}=e;return n?(0,a.jsx)("code",{className:t,type:n,children:t}):(0,a.jsx)("code",{className:t,children:t})}n(67294)},13348:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(85893);function i(e){let{children:t}=e;return(0,a.jsx)("span",{className:"uitext",children:t})}n(67294)},50065:function(e,t,n){n.d(t,{Z:function(){return c},a:function(){return s}});var a=n(67294);let i={},r=a.createContext(i);function s(e){let t=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);