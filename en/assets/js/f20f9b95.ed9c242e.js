"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([["41946"],{84478:function(e,r,n){n.d(r,{ZP:function(){return t},d$:function(){return o}});var s=n(85893),i=n(50065);let o=[{value:"Firewall configuration checking",id:"firewall-configuration-checking",level:2}];function a(e){let r={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",section:"section",strong:"strong",...(0,i.a)(),...e.components};return(0,s.jsxs)(r.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(r.h2,{id:"firewall-configuration-checking",children:"Firewall configuration checking"}),(0,s.jsxs)(r.p,{children:["If the TCP outbound policy for the WhaTap data collection server has not been set, monitoring data cannot be transferred. ",(0,s.jsx)(r.strong,{children:"Deselect"})," the ",(0,s.jsx)(r.strong,{children:"firewall blocking"}),"."]}),(0,s.jsxs)(r.p,{children:["Use the ",(0,s.jsx)(r.code,{children:"telnet"}),' command to check "Connected to ',(0,s.jsx)(r.code,{children:"IP"}),'."']}),(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sh",children:"$ telnet 52.193.60.176 6600\nTrying 52.193.60.176...\nConnected to 52.193.60.176.\nEscape character is '^]'.\n"})}),(0,s.jsx)(r.admonition,{type:"note",children:(0,s.jsxs)(r.p,{children:["For the connection server details, select a desired project in ",(0,s.jsx)(r.a,{href:"https://service.whatap.io/",children:"WhaTap Monitoring Service"}),", and then check in ",(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.em,{children:"Management"})})," > ",(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.em,{children:"Agent Installation"})}),"."]})})]})}function t(e={}){let{wrapper:r}={...(0,i.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},79866:function(e,r,n){n.r(r),n.d(r,{metadata:()=>s,contentTitle:()=>b,default:()=>A,assets:()=>S,toc:()=>y,frontMatter:()=>v});var s=JSON.parse('{"id":"java/agent-troubleshooting","title":"Troubleshooting","description":"The following provides various problems that may occur during installation of a Java agent and detailed instructions for resolving them. It provides solutions to various issues such as firewall settings, SpringBoot and Tomcat JMX settings, server settings for use of the OSGI framework, Log Manager and MBeanServerBuilder errors, Permission errors, and Sigar library problems.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/java/agent-troubleshooting.mdx","sourceDirName":"java","slug":"/java/agent-troubleshooting","permalink":"/en/java/agent-troubleshooting","draft":false,"unlisted":false,"editUrl":"undefined/docs/java/agent-troubleshooting.mdx","tags":[],"version":"current","frontMatter":{"id":"agent-troubleshooting","title":"Troubleshooting","description":"The following provides various problems that may occur during installation of a Java agent and detailed instructions for resolving them. It provides solutions to various issues such as firewall settings, SpringBoot and Tomcat JMX settings, server settings for use of the OSGI framework, Log Manager and MBeanServerBuilder errors, Permission errors, and Sigar library problems.","toc_max_heading_level":2,"keywords":["Java","Troubleshooting","Troubleshooting"],"isTranslationMissing":false},"sidebar":"javaSidebar","previous":{"title":"Installation checking items","permalink":"/en/java/install-check"},"next":{"title":"Agent CONFIG.","permalink":"/en/java/set-agent"}}'),i=n("85893"),o=n("50065"),a=n("84478");function t(e){let r={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",section:"section",...(0,o.a)(),...e.components};return(0,i.jsxs)(r.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(r.h2,{id:"springboot-22-or-later-tomcat-jmx-off",children:"SpringBoot 2.2 or later, Tomcat JMX off"}),(0,i.jsxs)(r.p,{children:["If the embedded Tomcat is used in SpringBoot 2.2 or later, the JMX functions do not work with the default settings. In this case, activate the JMX functions. ",(0,i.jsx)(r.a,{href:"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2-Release-Notes#jmx-now-disabled-by-default",children:"Related link"})]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-properties",metastring:"title='application.properties'",children:"spring.jmx.enabled=true\nserver.tomcat.mbeanregistry.enabled=true # tomcat embedded\uC778 \uACBD\uC6B0 #\n"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yml",metastring:"title='application.yml'",children:"spring:\n  jmx:\n    enabled: true\nserver:\n  tomcat:\n    mbeanregistry:\n      enabled: true #tomcat embedded\n"})})]})}function l(e={}){let{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}function c(e){let r={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",section:"section",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(r.h2,{id:"in-case-of-the-application-server-using-the-osgi-framework",children:"In case of the application server using the OSGI framework"}),(0,i.jsx)(r.p,{children:"Register any agent package prefix (whatap) in the JVM options for an OSGI framework-based application server."}),(0,i.jsx)(r.p,{children:"The application server is available in Jboss EAP 6.0 or later, Jboss AS 7.0 or later, Wildfly 8.0 or later, IBM WebSphere AS 7.0 or later, and such."})]}),"\n",(0,i.jsxs)(r.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(r.h3,{id:"jboss-as-wildfly-jboss-eap-60-or-later",children:"JBoss AS, Wildfly, JBoss EAP 6.0 or later"}),(0,i.jsx)(r.p,{children:"Register a prefix in the following file:"}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-apacheconf",metastring:"title='$JBOSS_HOME/bin/standalone.conf(domain.conf)'",children:"-Djboss.modules.system.pkgs=whatap\n"})}),(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{src:"https://img.whatap.io/media/agent_java/install/410.png",alt:"JBOSS EAP 7.0"})})]}),"\n",(0,i.jsxs)(r.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(r.h3,{id:"websphere",children:"WebSphere"}),(0,i.jsx)(r.p,{children:"As an JVM option, add the following."}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"-Dcom.ibm.ws.classloader.server.alwaysAllowedPackages=whatap\n"})}),(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:'If "*" is specified as the default value, no additional setting is required.'}),"\n",(0,i.jsxs)(r.li,{children:["For the setting location, see ",(0,i.jsx)(r.a,{href:"add-jvm-opt/websphere",children:"WebSphere"}),"."]}),"\n"]}),(0,i.jsxs)(r.p,{children:["Add the ",(0,i.jsx)(r.em,{children:"security.policy"})," role as follows:"]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",metastring:"title='$WEBSPHERE_HOME/properties/server.policy || $WEBSPHERE_PROFILE_HOME/properties/server.policy'",children:'grant codeBase "file:$WHATAP_HOME/-"\n{\n   permission java.security.AllPermission;\n};\n'})})]})]})}function d(e={}){let{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}function h(e){let r={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",section:"section",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(r.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(r.h2,{id:"errors-of-log-manager",children:"Errors of Log Manager"}),(0,i.jsx)(r.p,{children:"If any Log Manager error occurs in JBoss AS 7.0 or later and JBoss EAP 6.0 or later, add the JVM options."}),(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Set the package name of Log Manager in ",(0,i.jsx)(r.code,{children:"-Djava.util.logging.manager"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["Set the JBoss Log Manager JAR file in ",(0,i.jsx)(r.code,{children:"-Xbootclassloader"}),"."]}),"\n"]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-apacheconf",metastring:"title='(JBoss_Path)/bin/standalone.conf(domain.conf)' {4,12,13} showLineNumbers",children:'# Specify the exact Java VM executable to use.\n#\nif [ "x$JBOSS_MODULES_SYSTEM_PKGS" = "x" ]; then\n    JBOSS_MODULES_SYSTEM_PKGS="org.jboss.byteman,org.jboss.logmanager,whatap"\nfi\n\n...\n# Specify options to pass to the Java VM.\n#\nif [ "x$JAVA_OPTS" = "x" ]; then\n    JAVA_OPTS="-Xms1303m -Xmx1303m -Djava.net.preferIPv4Stack=true"\n    JAVA_OPTS="$JAVA_OPTS -Djboss.modules.system.pkgs=$JBOSS_MODULES_SYSTEM_PKGS -Djava.awt.headless=true"\n    JAVA_OPTS="$JAVA_OPTS -Djava.util.logging.manager=org.jboss.logmanager.LogManager -Xbootclasspath/p:/home/vagrant/EAP-7.0.0/modules/system/layers/base/org/jboss/logmanager/main/jboss-logmanager-2.0.3.Final-redhat-1.jar"\nelse\n    echo "JAVA_OPTS already set in environment; overriding default settings with values: $JAVA_OPTS"\nfi\n'})})]})}function p(e={}){let{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}function g(e){let r={code:"code",h2:"h2",p:"p",pre:"pre",section:"section",...(0,o.a)(),...e.components};return(0,i.jsxs)(r.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(r.h2,{id:"in-case-the-mbeanserverbuilder-error-occurs",children:"In case the MBeanServerBuilder error occurs"}),(0,i.jsx)(r.p,{children:"If any MBeanServerBuilder-related error is output in JBoss 5.0 or earlier, add the JVM options."}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-apacheconf",metastring:"title='(JBoss_Path)/bin/run.conf' {5} showLineNumbers",children:'# Specify options to pass to the Java VM.\n#\nif [ "x$JAVA_OPTS" = "x" ]; then\n   JAVA_OPTS="-Xms128m -Xmx512m -XX:MaxPermSize=256m -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000"\n   JAVA_OPTS="$JAVA_OPTS -Djboss.platform.mbeanserver"\nfi\n'})})]})}function u(e={}){let{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}function m(e){let r={code:"code",em:"em",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",section:"section",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(r.h2,{id:"in-case-of-occurrence-of-a-permission-error",children:"In case of occurrence of a permission error"}),(0,i.jsxs)(r.p,{children:["If any Java security policy-related error occurs, add the role setting in ",(0,i.jsx)(r.em,{children:"$JAVA_HOME/jre/lib/security/java.policy"}),"."]}),(0,i.jsxs)(r.p,{children:["To apply all roles collectively, add the setting in ",(0,i.jsx)(r.em,{children:"java.policy"})," as follows:"]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",metastring:"title='$JAVA_HOME/jre/lib/security/java.policy'",children:"grant {\n   permission java.security.AllPermission;\n};\n"})})]}),"\n",(0,i.jsxs)(r.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(r.h3,{id:"in-case-of-occurrence-of-the-javaiofilepermission-error",children:"In case of occurrence of the java.io.FilePermission error"}),(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"java.io.FilePermision error",src:n(43349).Z+"",width:"883",height:"185"})}),(0,i.jsxs)(r.p,{children:["Add the setting in ",(0,i.jsx)(r.em,{children:"java.policy"}),"."]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",metastring:"title='$JAVA_HOME/jre/lib/security/java.policy'",children:'grant {\n   ...\n   permission java.io.FilePermission {package path seen in the error message}, "read"\n};\n'})})]}),"\n",(0,i.jsxs)(r.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(r.h3,{id:"in-case-of-occurrence-of-the-javautilpropertypermission-error",children:"In case of occurrence of the java.util.PropertyPermission error"}),(0,i.jsxs)(r.p,{children:["Add the setting in ",(0,i.jsx)(r.em,{children:"java.policy"}),"."]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",metastring:"title='$JAVA_HOME/jre/lib/security/java.policy'",children:'grant {\n   ...\n   permission java.util.PropertyPermission {package path see in the error message}, "read"\n};\n'})})]})]})}function j(e={}){let{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}function f(e){let r={code:"code",em:"em",h2:"h2",img:"img",p:"p",pre:"pre",section:"section",...(0,o.a)(),...e.components};return(0,i.jsxs)(r.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(r.h2,{id:"in-case-the-sigar-library-cannot-be-loaded",children:"In case the sigar library cannot be loaded"}),(0,i.jsxs)(r.p,{children:["Check whether the execution role for ",(0,i.jsx)("em",{children:"$WHATAP_HOME/lib1/*.so"})," exists. If no permission, give the execution role."]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"$ sudo chmod +x *.so\n"})}),(0,i.jsxs)(r.p,{children:["If under ",(0,i.jsx)(r.em,{children:"$WHATAP_HOME/lib1"})," of AIX 7, ",(0,i.jsx)(r.em,{children:"libsigar-ppc64-aix-7.so"})," does not exist and the error occurs, copy the file."]}),(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"Sigar library error on AIX 7",src:n(4762).Z+"",width:"883",height:"185"})}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"$ cp libsigar-ppc64-aix-5.so libsigar-ppc64-aix-7.so\n"})})]})}function x(e={}){let{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(f,{...e})}):f(e)}let v={id:"agent-troubleshooting",title:"Troubleshooting",description:"The following provides various problems that may occur during installation of a Java agent and detailed instructions for resolving them. It provides solutions to various issues such as firewall settings, SpringBoot and Tomcat JMX settings, server settings for use of the OSGI framework, Log Manager and MBeanServerBuilder errors, Permission errors, and Sigar library problems.",toc_max_heading_level:2,keywords:["Java","Troubleshooting","Troubleshooting"],isTranslationMissing:!1},b=void 0,S={},y=[...a.d$,{value:"SpringBoot 2.2 or later, Tomcat JMX off",id:"springboot-22-or-later-tomcat-jmx-off",level:2},{value:"In case of the application server using the OSGI framework",id:"in-case-of-the-application-server-using-the-osgi-framework",level:2},{value:"JBoss AS, Wildfly, JBoss EAP 6.0 or later",id:"jboss-as-wildfly-jboss-eap-60-or-later",level:3},{value:"WebSphere",id:"websphere",level:3},{value:"Errors of Log Manager",id:"errors-of-log-manager",level:2},{value:"In case the MBeanServerBuilder error occurs",id:"in-case-the-mbeanserverbuilder-error-occurs",level:2},{value:"In case of occurrence of a permission error",id:"in-case-of-occurrence-of-a-permission-error",level:2},{value:"In case of occurrence of the java.io.FilePermission error",id:"in-case-of-occurrence-of-the-javaiofilepermission-error",level:3},{value:"In case of occurrence of the java.util.PropertyPermission error",id:"in-case-of-occurrence-of-the-javautilpropertypermission-error",level:3},{value:"In case the sigar library cannot be loaded",id:"in-case-the-sigar-library-cannot-be-loaded",level:2}];function w(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.ZP,{}),"\n","\n",(0,i.jsx)(l,{}),"\n","\n",(0,i.jsx)(d,{}),"\n","\n",(0,i.jsx)(p,{}),"\n","\n",(0,i.jsx)(u,{}),"\n","\n",(0,i.jsx)(j,{}),"\n","\n",(0,i.jsx)(x,{})]})}function A(e={}){let{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(w,{...e})}):w(e)}},43349:function(e,r,n){n.d(r,{Z:function(){return s}});let s=n.p+"assets/images/troubleshooting-permission-error-4d8210609932d8b7a2d2121045758cd9.png"},4762:function(e,r,n){n.d(r,{Z:function(){return s}});let s=n.p+"assets/images/troubleshooting-sigar-error-4d8210609932d8b7a2d2121045758cd9.png"},50065:function(e,r,n){n.d(r,{Z:function(){return t},a:function(){return a}});var s=n(67294);let i={},o=s.createContext(i);function a(e){let r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);