"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([["12113"],{25687:function(e,n,t){t.d(n,{ZP:function(){return o},d$:function(){return r}});var i=t(85893),s=t(50065);let r=[];function a(e){let n={a:"a",p:"p",...(0,s.a)(),...e.components},{Xclude:t}=n;return!t&&function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Xclude",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["To use the WhaTap monitoring service, after ",(0,i.jsx)(n.a,{href:"https://www.whatap.io/en/signup/",children:"Sign in"}),", create a project and install the agent to the target server. For more information about registration as a member, see ",(0,i.jsx)(n.a,{href:"../account/account-manage",children:"the following"}),"."]}),"\n",(0,i.jsx)(t,{product:"oracle-pro,oracle",children:(0,i.jsx)(n.p,{children:"See the following video guide."})})]})}function o(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},67033:function(e,n,t){t.d(n,{ZP:function(){return o},d$:function(){return r}});var i=t(85893),s=t(50065);let r=[{value:"Next steps",id:"next-steps",level:2}];function a(e){let n={a:"a",em:"em",h2:"h2",li:"li",p:"p",section:"section",strong:"strong",ul:"ul",...(0,s.a)(),...e.components},{Cmdname:t,InDoc:r,Xclude:a}=n;return!t&&l("Cmdname",!0),!r&&l("InDoc",!0),!a&&l("Xclude",!0),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),(0,i.jsx)(a,{product:"nodejs",children:(0,i.jsx)("div",{className:"nextstep",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Checking the installation"})}),"\n",(0,i.jsx)(n.p,{children:"If you have applied all for project creation and agent installation, check the checklist in [the following] (install-check)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Installation troubleshooting"})}),"\n",(0,i.jsxs)(n.p,{children:["It provides various problems that may occur when installing the agent and specific instructions for resolving them. For more information, see ",(0,i.jsx)(n.a,{href:"agent-troubleshooting",children:"the following"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Agent setting"})}),"\n",(0,i.jsxs)(n.p,{children:["It provides various features for monitoring by applying some options to the agent configuration file (",(0,i.jsx)(n.em,{children:"whatap.conf"}),"). It includes basic configuration, configuration for server connection and data transfer, how to manage the configuration files for multiple application servers, and transaction tracing, and more. For more information, see ",(0,i.jsx)(n.a,{href:"set-agent",children:"the following"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Starting the monitoring"})}),"\n",(0,i.jsxs)(n.p,{children:["After all settings are made, restart the application server. The agent starts collecting data. First, check whether the monitoring data has been collected in ",(0,i.jsx)(t,{sid:"side_appDashboard",className:"uitext"}),". For more information about ",(0,i.jsx)(t,{sid:"side_appDashboard",className:"uitext"}),", see ",(0,i.jsx)(n.a,{href:"dashboard",children:"the following"}),"."]}),"\n"]}),"\n"]})})}),(0,i.jsx)(r,{product:"nodejs",children:(0,i.jsx)("div",{className:"nextstep",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Checking the installation"})}),"\n",(0,i.jsx)(n.p,{children:"If you have applied all for project creation and agent installation, check the checklist in [the following] (install-check)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Agent setting"})}),"\n",(0,i.jsxs)(n.p,{children:["It provides various features for monitoring by applying some options to the agent configuration file (",(0,i.jsx)(n.em,{children:"whatap.conf"}),"). It includes basic configuration, configuration for server connection and data transfer, how to manage the configuration files for multiple application servers, and transaction tracing, and more. For more information, see ",(0,i.jsx)(n.a,{href:"set-agent",children:"the following"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Starting the monitoring"})}),"\n",(0,i.jsxs)(n.p,{children:["After all settings are made, restart the application server. The agent starts collecting data. First, check whether the monitoring data has been collected in ",(0,i.jsx)(t,{sid:"side_appDashboard",className:"uitext"}),". For more information about ",(0,i.jsx)(t,{sid:"side_appDashboard",className:"uitext"}),", see ",(0,i.jsx)(n.a,{href:"dashboard",children:"the following"}),"."]}),"\n"]}),"\n"]})})})]})}function o(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}function l(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},10174:function(e,n,t){t.d(n,{ZP:function(){return o},d$:function(){return r}});var i=t(85893),s=t(50065);let r=[{value:"Checking the access key",id:"check-accesskey",level:2}];function a(e){let n={admonition:"admonition",h2:"h2",p:"p",section:"section",strong:"strong",...(0,s.a)(),...e.components},{Cmdname:t,InDoc:r}=n;return!t&&l("Cmdname",!0),!r&&l("InDoc",!0),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"check-accesskey",children:"Checking the access key"}),(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"access key"})," is the unique ID to enable the WhaTap service."]}),(0,i.jsxs)(n.p,{children:["In the installation guide section, select ",(0,i.jsx)(t,{sid:"issue_project_access_key",className:"uitext"}),". After the ",(0,i.jsx)(n.strong,{children:"access key"})," has been issued automatically, proceed to the next step."]}),(0,i.jsx)(r,{product:"kubernetes",children:(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"access key"})," cannot be duplicated for other projects and separate access keys are required also in the ",(0,i.jsx)(n.strong,{children:"namespace project"}),"."]})})}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["After a project has been created, the ",(0,i.jsx)(t,{sid:"agent_installation",className:"uitext"})," page appears automatically. If the ",(0,i.jsx)(t,{sid:"agent_installation",className:"uitext"})," does not appear, select ",(0,i.jsx)(t,{sid:"management",className:"uitext"})," > ",(0,i.jsx)(t,{sid:"agent_installation",className:"uitext"})," on the left of the screen."]})})]})}function o(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}function l(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},39040:function(e,n,t){t.d(n,{ZP:function(){return o},d$:function(){return r}});var i=t(85893),s=t(50065);let r=[{value:"Creating a project",id:"create-project",level:2}];function a(e){let n={a:"a",admonition:"admonition",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",ul:"ul",...(0,s.a)(),...e.components},{Cmdname:t,ImgLang:r,InDoc:a,Xclude:o}=n;return!t&&l("Cmdname",!0),!r&&l("ImgLang",!0),!a&&l("InDoc",!0),!o&&l("Xclude",!0),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"create-project",children:"Creating a project"}),(0,i.jsxs)(a,{product:"kafka",children:[(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.strong,{children:"feature project"})," (",(0,i.jsx)("code",{class:"Features",children:"Feature"}),") before installing the agent."]}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Log in ",(0,i.jsx)(n.a,{href:"https://service.whatap.io",children:"WhaTap monitoring service"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To create a project, on the left of the screen, select ",(0,i.jsx)(t,{sid:"BTN07332",className:"uitext"})," > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"+"})})," ",(0,i.jsx)(t,{sid:"BTN06696",className:"uitext"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["On the ",(0,i.jsx)(t,{sid:"TTL07073",className:"uitext"})," screen, select the ",(0,i.jsx)(n.strong,{children:"feature product"})," to install in the project."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Configure the settings for ",(0,i.jsx)(t,{sid:"project_name",className:"uitext"}),", ",(0,i.jsx)(t,{sid:"data_server_region",className:"uitext"}),", and ",(0,i.jsx)(t,{sid:"project_time_zone",className:"uitext"}),"."]}),"\n",(0,i.jsx)(r,{img:"create-project-v3.png",desc:"Create Project"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(t,{sid:"TTL07727",className:"uitext"}),", select the language for alert messages."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["After all settings are finished, select ",(0,i.jsx)(t,{sid:"creating_a_project",className:"uitext"}),"."]}),"\n"]}),"\n"]})]}),(0,i.jsxs)(o,{product:"kafka",children:[(0,i.jsx)(n.p,{children:"Create a project before installing the agent."}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Log in ",(0,i.jsx)(n.a,{href:"https://service.whatap.io",children:"WhaTap monitoring service"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To create a project, on the left of the screen, select ",(0,i.jsx)(t,{sid:"BTN07332",className:"uitext"})," > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"+"})})," ",(0,i.jsx)(t,{sid:"BTN06696",className:"uitext"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Select a product in ",(0,i.jsx)(t,{sid:"TTL07073",className:"uitext"})," for installation."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Configure the settings for ",(0,i.jsx)(t,{sid:"project_name",className:"uitext"}),", ",(0,i.jsx)(t,{sid:"data_server_region",className:"uitext"}),", and ",(0,i.jsx)(t,{sid:"project_time_zone",className:"uitext"}),"."]}),"\n",(0,i.jsx)(r,{img:"create-project-v3.png",desc:"Create Project"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(t,{sid:"TTL07727",className:"uitext"}),", select the language for alert messages."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["After all settings are finished, select ",(0,i.jsx)(t,{sid:"creating_a_project",className:"uitext"}),"."]}),"\n"]}),"\n"]})]}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(t,{sid:"data_server_region",className:"uitext"})," refers to a region (a bundle of data centers installed to provide cloud services). Selecting a specific region stores your data in the datacenter that belongs to that region."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(t,{sid:"project_time_zone",className:"uitext"})," is the reference time for generating alerts and reports."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To group multiple projects for management, select a group from ",(0,i.jsx)(t,{sid:"project_groups",className:"uitext"})," or add a group. For more information about grouping, see ",(0,i.jsx)(n.a,{href:"../project/group",children:"the following"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To add a project with an organization selected, ",(0,i.jsx)(t,{sid:"group_of_organization",className:"uitext"})," must be set."]}),"\n"]}),"\n"]})})]})}function o(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}function l(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},23406:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,contentTitle:()=>h,default:()=>g,assets:()=>p,toc:()=>j,frontMatter:()=>d});var i=JSON.parse('{"id":"nodejs/install-agent","title":"Installation of the Node.js agent","description":"The following explains how to install an agent on the application server in the Node.js environment.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/nodejs/install-agent.mdx","sourceDirName":"nodejs","slug":"/nodejs/install-agent","permalink":"/en/nodejs/install-agent","draft":false,"unlisted":false,"editUrl":"undefined/docs/nodejs/install-agent.mdx","tags":[],"version":"current","frontMatter":{"id":"install-agent","title":"Installation of the Node.js agent","description":"The following explains how to install an agent on the application server in the Node.js environment.","keywords":["Node.js"],"isTranslationMissing":false},"sidebar":"nodejsSidebar","previous":{"title":"\uC9C0\uC6D0 \uD658\uACBD","permalink":"/en/nodejs/supported-spec"},"next":{"title":"Installing the Docker environment","permalink":"/en/nodejs/install-agent-docker"}}'),s=t("85893"),r=t("50065");t("98519");var a=t("25687"),o=t("39040"),l=t("10174"),c=t("67033");let d={id:"install-agent",title:"Installation of the Node.js agent",description:"The following explains how to install an agent on the application server in the Node.js environment.",keywords:["Node.js"],isTranslationMissing:!1},h=void 0,p={},j=[...a.d$,...o.d$,...l.d$,{value:"Download agent",id:"download-agent",level:2},{value:"Using",id:"using",level:2},{value:"Setting agent options by environment",id:"setting-agent-options-by-environment",level:3},{value:"Using the agent group unit function",id:"using-the-agent-group-unit-function",level:3},{value:"PaaS application environment",id:"paas-application-environment",level:2},{value:"Configuring the default environment variables",id:"configuring-the-default-environment-variables",level:3},{value:"Options that can be configured as environment variables",id:"options-that-can-be-configured-as-environment-variables",level:3},...c.d$];function x(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,r.a)(),...e.components},{Filetree:t,FiletreeItem:i,TabItem:d,Tabs:h,Youtube:p}=n;return!t&&u("Filetree",!0),!i&&u("FiletreeItem",!0),!d&&u("TabItem",!0),!h&&u("Tabs",!0),!p&&u("Youtube",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.ZP,{}),"\n",(0,s.jsx)(p,{ko:"i8P8wrKgm40",en:"i8P8wrKgm40",ja:"i8P8wrKgm40"}),"\n",(0,s.jsx)(n.p,{children:"To use the Node.js monitoring service, the monitoring agent must be installed on the monitored application. For installation, use NPM (Node Package Manager)."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Install the WhaTap agent module in the active Node.js application directory."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Write the configuration of WhaTap agent (",(0,s.jsx)(n.em,{children:"whatap.conf"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Run the Node.js service again."}),"\n"]}),"\n"]}),"\n","\n",(0,s.jsx)(o.ZP,{}),"\n","\n",(0,s.jsx)(l.ZP,{}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"download-agent",children:"Download agent"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Install the agent in the active Node.js application directory."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ npm install --save whatap\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Copy the ",(0,s.jsx)(n.em,{children:"whatap.conf"})," file in the ",(0,s.jsx)(n.em,{children:"node_modules/whatap"})," path and then paste it into the root path of the project (same location as in the ",(0,s.jsx)(n.em,{children:"package.json"})," file)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Go to the ",(0,s.jsx)(n.a,{href:"https://service.whatap.io",children:"WhaTap Monitoring Service"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Select the created project and then copy the following among the ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"downloaded items from the agent"})})," in the ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"Install guide"})})," section."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",metastring:"title='Example'",children:"license={access key}\nwhatap.server.host={collection server IP}\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Paste it into the ",(0,s.jsx)(n.em,{children:"whatap.conf"})," file."]}),"\n"]}),"\n"]}),(0,s.jsxs)(n.p,{children:["The host (",(0,s.jsx)(n.code,{children:"whatap.server.host"}),") address is the server address in which the WhaTap proxy has been installed. You can use a forward slash (/) as the delimiter to enter all addresses of the servers where the proxy server is running among the WhaTap servers."]}),(0,s.jsx)(n.p,{children:"For the agent configuration file, see the following."}),(0,s.jsxs)(t,{name:"whatap",children:[(0,s.jsx)(i,{name:"whatap.conf",type:"file",children:"Sample of the agent configuration file. Copy the file and enter the access key."}),(0,s.jsx)(i,{name:"README.md",type:"file",children:"Guide to the agent installation"}),(0,s.jsx)(i,{name:"package.json",type:"file",children:"Configuration file for the NPM module environment"}),(0,s.jsx)(i,{name:"index.js",type:"file",children:"Main export declaration file"}),(0,s.jsx)(i,{name:"paramkey.txt",type:"file",children:"It stores the security key that is entered for viewing SQL variables and HTTP queries, or using the Thread stop function."}),(0,s.jsx)(i,{name:"lib",type:"folder",children:"Agent and tracer program"})]}),(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["Server-side rendering (SSR) frameworks such as ",(0,s.jsx)(n.strong,{children:"Next.js"})," and ",(0,s.jsx)(n.strong,{children:"Nuxt.js"})," require the Custom Server settings for application monitoring. It requires an approach different from typical Node.js frameworks (e.g. Express.js, Nest.js). For more information, see the following:"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"install-agent-nextjs",children:"Agent installation in the Next.js environment"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"install-agent-nuxtjs",children:"Agent installation in the Nuxt.js environment"})}),"\n"]}),"\n"]})]})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"using",children:"Using"}),(0,s.jsxs)(n.p,{children:["Add the following code at the top of the entry point (main module) file of the application. For example, in the Express.js application, ",(0,s.jsx)(n.em,{children:"app.js"})," and ",(0,s.jsx)(n.em,{children:"server.js"})," are the entry points (main module). When using a framework like Nest.js, ",(0,s.jsx)(n.em,{children:"main.ts"})," is the entry point."]}),(0,s.jsxs)(h,{groupId:"javascript",children:[(0,s.jsx)(d,{value:"commonjs",label:"CommonJS",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:"title='CommonJS'",children:"var whatap = require('whatap').NodeAgent;\n"})})}),(0,s.jsxs)(d,{value:"ecmascript",label:"ECMAScript Module(ESM)",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:'title="ECMAScript Module(ESM)"',children:"import WhatapAgent from 'whatap';\nWhatapAgent.NodeAgent;\n"})}),(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Because the agent executable code needs to be run first after starting node.js, it must be placed before the first ",(0,s.jsx)(n.code,{children:"import"}),"."]})})]})]})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,s.jsx)(n.h3,{id:"setting-agent-options-by-environment",children:"Setting agent options by environment"}),(0,s.jsxs)(n.p,{children:["To apply settings tailored to each environment of the application, you can modify the settings in the entry point file of the application instead of the ",(0,s.jsx)(n.em,{children:"whatap.conf"})," file. Noting the code below, apply the settings tailored to your environment."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"process.env.WHATAP_CONF = 'whatapdev'; // Setting for development environment\nprocess.env.WHATAP_NAME = 'NodeAgent-{ip2}-{ip3}-{cluster}'; //Dynamically configure agent name with IP and cluster info\nvar WhatapAgent = require('whatap').NodeAgent;\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"In case different projects are run for each environment"})}),"\n",(0,s.jsxs)(n.p,{children:["Even for the same application, settings are required for each environment, such as development (dev), test (test), and operation (prod). As in the example above, you can use the ",(0,s.jsx)(n.code,{children:"WHATAP_CONF"})," environment variables to apply settings that are appropriate for the development environment. This allows you to easily manage different settings for each environment."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"In case you must configure different agent options depending on the environment"})}),"\n",(0,s.jsx)(n.p,{children:"For development environment, you can increase the logging level. In production environment, you can configure different options for performance optimization. In this case, modify the agent options in the application's entry point file to suit the environment."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"In case of running applications in cluster mode for PM2"})}),"\n",(0,s.jsx)(n.p,{children:"When running multiple application instances in cluster mode, you can apply separate agent options to each individual instance. In this case, you can also configure a flexible monitoring by applying environment-specific settings in the entry point file instead of the configuration file."}),"\n"]}),"\n"]}),(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsxs)(n.p,{children:["The arguments that can be set by the ",(0,s.jsx)(n.code,{children:"WHATAP_NAME"})," option are as follows."]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"ipN"}),": ip0, ip1, ip2, ip3"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"cluster"}),": Cluster ID"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"pid"}),": Process ID"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"hostname"}),": Host name"]}),"\n"]}),"\n"]})]})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,s.jsx)(n.h3,{id:"using-the-agent-group-unit-function",children:"Using the agent group unit function"}),(0,s.jsxs)(n.p,{children:["Agent group unit function includes group topology and integrated topology. Replace ",(0,s.jsx)(n.code,{children:"{group identifier}"})," with agent group name in the following code."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"process.env.WHATAP_OKIND = '{group identifier}';\nvar WhatapAgent = require('whatap').NodeAgent;\n"})})]}),"\n",(0,s.jsx)(n.section,{className:"remark-sectionize-h2",children:(0,s.jsx)(n.h2,{id:"paas-application-environment",children:"PaaS application environment"})}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,s.jsx)(n.h3,{id:"configuring-the-default-environment-variables",children:"Configuring the default environment variables"}),(0,s.jsxs)(n.p,{children:["When installing the agent in the PaaS application, all settings must be configured in the source file (",(0,s.jsx)(n.em,{children:"app.js"}),"). The ",(0,s.jsx)(n.em,{children:"whatap.conf"})," file cannot be used."]}),(0,s.jsxs)(n.p,{children:["Set the access key (",(0,s.jsx)(n.code,{children:"WHATAP_LICENSE"}),") and collection server IP (",(0,s.jsx)(n.code,{children:"WHATAP_SERVER_HOST"}),") as environment variables."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:"title='app.js'",children:"process.env.WHATAP_LICENSE={Access Key};\nprocess.env.WHATAP_SERVER_HOST={Collection Server IP};\nvar whatap=require('whatap').NodeAgent;\n...\n"})})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,s.jsx)(n.h3,{id:"options-that-can-be-configured-as-environment-variables",children:"Options that can be configured as environment variables"}),(0,s.jsxs)(n.p,{children:["Because you cannot use the ",(0,s.jsx)(n.em,{children:"whatap.conf"})," file, set the WhaTap agent options as environment variables in the source file."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:"title='app.js'",children:"process.env.profile_http_header_enabled=false;\nprocess.env.profile_http_parameter_enabled=false;\n\nprocess.env.profile_basetime=500;\n\nprocess.env.auto_oname_enabled=false;\nprocess.env.auto_oname_prefix='nodejs';\n\nprocess.env.mtrace_rate=0;\nprocess.env.mtrace_spec='v1';\nprocess.env.stat_mtrace_enabled=false;\nprocess.env.stat_domain_enabled=false;\n"})}),(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["For more information about the options that can be set in Node.js, see ",(0,s.jsx)(n.a,{href:"set-agent",children:"the following"}),"."]})}),(0,s.jsx)(c.ZP,{})]})]})}function g(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}function u(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},98519:function(e,n,t){t.d(n,{Z:function(){return r}});var i=t(85893);t(67294);var s=t(96025);function r(e){let{sid:n}=e;return(0,i.jsx)(s.Z,{id:n})}},50065:function(e,n,t){t.d(n,{Z:function(){return o},a:function(){return a}});var i=t(67294);let s={},r=i.createContext(s);function a(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);