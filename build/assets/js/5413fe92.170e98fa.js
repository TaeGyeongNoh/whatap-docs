"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([[24586],{37790:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>a});var i=t(74848),s=t(28453);const a=[];function r(e){const n={a:"a",p:"p",...(0,s.R)(),...e.components},{Xclude:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Xclude",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["To use the WhaTap monitoring service, after ",(0,i.jsx)(n.a,{href:"https://www.whatap.io/en/signup/",children:"Sign in"}),", create a project and install the agent to the target server. For more information about registration as a member, see ",(0,i.jsx)(n.a,{href:"../account/account-manage",children:"the following"}),"."]}),"\n",(0,i.jsx)(t,{product:"oracle-pro,oracle",children:(0,i.jsx)(n.p,{children:"See the following video guide."})})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},365:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>a});var i=t(74848),s=t(28453);const a=[{value:"Checking the access key",id:"check-accesskey",level:2}];function r(e){const n={admonition:"admonition",h2:"h2",p:"p",section:"section",strong:"strong",...(0,s.R)(),...e.components},{Cmdname:t,InDoc:a}=n;return t||l("Cmdname",!0),a||l("InDoc",!0),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"check-accesskey",children:"Checking the access key"}),(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"access key"})," is the unique ID to enable the WhaTap service."]}),(0,i.jsxs)(n.p,{children:["In the installation guide section, select ",(0,i.jsx)(t,{sid:"issue_project_access_key",className:"uitext"}),". After the ",(0,i.jsx)(n.strong,{children:"access key"})," has been issued automatically, proceed to the next step."]}),(0,i.jsx)(a,{product:"kubernetes",children:(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"access key"})," cannot be duplicated for other projects and separate access keys are required also in the ",(0,i.jsx)(n.strong,{children:"namespace project"}),"."]})})}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["After a project has been created, the ",(0,i.jsx)(t,{sid:"agent_installation",className:"uitext"})," page appears automatically. If the ",(0,i.jsx)(t,{sid:"agent_installation",className:"uitext"})," does not appear, select ",(0,i.jsx)(t,{sid:"management",className:"uitext"})," > ",(0,i.jsx)(t,{sid:"agent_installation",className:"uitext"})," on the left of the screen."]})})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}function l(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},88116:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>a});var i=t(74848),s=t(28453);const a=[{value:"Creating a project",id:"create-project",level:2}];function r(e){const n={a:"a",admonition:"admonition",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Cmdname:t,ImgLang:a,InDoc:r,Xclude:o}=n;return t||l("Cmdname",!0),a||l("ImgLang",!0),r||l("InDoc",!0),o||l("Xclude",!0),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"create-project",children:"Creating a project"}),(0,i.jsxs)(r,{product:"kafka",children:[(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.strong,{children:"feature project"})," (",(0,i.jsx)("code",{class:"Features",children:"Feature"}),") before installing the agent."]}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Log in ",(0,i.jsx)(n.a,{href:"https://service.whatap.io",children:"WhaTap monitoring service"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To create a project, on the left of the screen, select ",(0,i.jsx)(t,{sid:"BTN07332",className:"uitext"})," > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"+"})})," ",(0,i.jsx)(t,{sid:"BTN06696",className:"uitext"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["On the ",(0,i.jsx)(t,{sid:"TTL07073",className:"uitext"})," screen, select the ",(0,i.jsx)(n.strong,{children:"feature product"})," to install in the project."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Configure the settings for ",(0,i.jsx)(t,{sid:"project_name",className:"uitext"}),", ",(0,i.jsx)(t,{sid:"data_server_region",className:"uitext"}),", and ",(0,i.jsx)(t,{sid:"project_time_zone",className:"uitext"}),"."]}),"\n",(0,i.jsx)(a,{img:"create-project-v3.png",desc:"Create Project"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(t,{sid:"TTL07727",className:"uitext"}),", select the language for alert messages."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["After all settings are finished, select ",(0,i.jsx)(t,{sid:"creating_a_project",className:"uitext"}),"."]}),"\n"]}),"\n"]})]}),(0,i.jsxs)(o,{product:"kafka",children:[(0,i.jsx)(n.p,{children:"Create a project before installing the agent."}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Log in ",(0,i.jsx)(n.a,{href:"https://service.whatap.io",children:"WhaTap monitoring service"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To create a project, on the left of the screen, select ",(0,i.jsx)(t,{sid:"BTN07332",className:"uitext"})," > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"+"})})," ",(0,i.jsx)(t,{sid:"BTN06696",className:"uitext"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Select a product in ",(0,i.jsx)(t,{sid:"TTL07073",className:"uitext"})," for installation."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Configure the settings for ",(0,i.jsx)(t,{sid:"project_name",className:"uitext"}),", ",(0,i.jsx)(t,{sid:"data_server_region",className:"uitext"}),", and ",(0,i.jsx)(t,{sid:"project_time_zone",className:"uitext"}),"."]}),"\n",(0,i.jsx)(a,{img:"create-project-v3.png",desc:"Create Project"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(t,{sid:"TTL07727",className:"uitext"}),", select the language for alert messages."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["After all settings are finished, select ",(0,i.jsx)(t,{sid:"creating_a_project",className:"uitext"}),"."]}),"\n"]}),"\n"]})]}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(t,{sid:"data_server_region",className:"uitext"})," refers to a region (a bundle of data centers installed to provide cloud services). Selecting a specific region stores your data in the datacenter that belongs to that region."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(t,{sid:"project_time_zone",className:"uitext"})," is the reference time for generating alerts and reports."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To group multiple projects for management, select a group from ",(0,i.jsx)(t,{sid:"project_groups",className:"uitext"})," or add a group. For more information about grouping, see ",(0,i.jsx)(n.a,{href:"../project/group",children:"the following"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To add a project with an organization selected, ",(0,i.jsx)(t,{sid:"group_of_organization",className:"uitext"})," must be set."]}),"\n"]}),"\n"]})})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}function l(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},37101:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>x,frontMatter:()=>l,metadata:()=>h,toc:()=>p});var i=t(74848),s=t(28453),a=(t(21024),t(37790)),r=t(88116),o=t(365);const l={id:"install-agent",title:"Agent Installation",description:"The following explains how to install an agent on the application server in the Python environment.",tags:["Python","Application","Agent","Installation"]},c=void 0,h={id:"python/install-agent",title:"Agent Installation",description:"The following explains how to install an agent on the application server in the Python environment.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/python/install-agent.mdx",sourceDirName:"python",slug:"/python/install-agent",permalink:"/python/install-agent",draft:!1,unlisted:!1,editUrl:"undefined/docs/python/install-agent.mdx",tags:[{inline:!0,label:"Python",permalink:"/tags/python"},{inline:!0,label:"Application",permalink:"/tags/application"},{inline:!0,label:"Agent",permalink:"/tags/agent"},{inline:!0,label:"Installation",permalink:"/tags/installation"}],version:"current",frontMatter:{id:"install-agent",title:"Agent Installation",description:"The following explains how to install an agent on the application server in the Python environment.",tags:["Python","Application","Agent","Installation"]},sidebar:"pySidebar",previous:{title:"Support Environment",permalink:"/python/supported-spec"},next:{title:"Installation checking items",permalink:"/python/install-check"}},d={},p=[...a.RM,...r.RM,...o.RM,{value:"Enabling the virtual environment",id:"enabling-the-virtual-environment",level:2},{value:"Download agent",id:"download-agent",level:2},{value:"Agent structure file",id:"agent-structure-file",level:3},{value:"Agent CONFIG.",id:"agent-config",level:2},{value:"WHATAP_HOME default path configuration",id:"whatap_home-default-path-configuration",level:3},{value:"Configuring the access key and collection server IP",id:"configuring-the-access-key-and-collection-server-ip",level:3},{value:"Show Configuration",id:"show-configuration",level:3},{value:"Applying by the application server environment",id:"applying-by-the-application-server-environment",level:2},{value:"Checking the service running",id:"checking-the-service-running",level:2},{value:"Next steps",id:"next-steps",level:2}];function g(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Cmdname:t,Filetree:l,FiletreeItem:c,Steps:h,TabItem:d,Tabs:p,Youtube:g}=n;return t||m("Cmdname",!0),l||m("Filetree",!0),c||m("FiletreeItem",!0),h||m("Steps",!0),d||m("TabItem",!0),p||m("Tabs",!0),g||m("Youtube",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Ay,{}),"\n",(0,i.jsx)(g,{ko:"MWDFeegF6mQ",en:"MWDFeegF6mQ",ja:"MWDFeegF6mQ"}),"\n",(0,i.jsxs)(h,{children:[(0,i.jsx)(r.Ay,{}),(0,i.jsx)(o.Ay,{}),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"enabling-the-virtual-environment",children:"Enabling the virtual environment"}),(0,i.jsxs)(n.p,{children:["While the applications are using ",(0,i.jsx)(n.a,{href:"https://docs.python.org/ko/3.7/library/venv.html",children:"virtualenv"}),", enable the virtual environment. Run the ",(0,i.jsx)(n.em,{children:"bin/activate"})," file."]})]}),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"download-agent",children:"Download agent"}),(0,i.jsxs)(n.p,{children:["Get the ",(0,i.jsx)(n.strong,{children:"access key"})," and then go to the ",(0,i.jsx)(t,{sid:"urlcheck-agent-setup-1-subject",className:"uitext"})," section. Copy the following command to install the agent."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install whatap-python\n"})}),(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.p,{children:["If installation is impossible with the pip command, download the installation file in ",(0,i.jsx)(n.a,{href:"https://pypi.org/project/whatap-python/#files",children:"pypi WhaTap page"}),". Unzip the downloaded file and then proceed with installation."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tar xzvf whatap_python-1.x.x.tar.gz \\\ncd whatap_python-1.X.Y.Z \\\npython setup.py install\n"})})]})]}),(0,i.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(n.h3,{id:"agent-structure-file",children:"Agent structure file"}),(0,i.jsx)(n.p,{children:"The Python agent file consists of a tracer that extracts data for application monitoring and passes to the WhaTap collection server, and the elements that help the tracer send the data. For the agent file configuration, see the following."}),(0,i.jsxs)(l,{name:"whatap",children:[(0,i.jsx)(c,{name:"agent",type:"folder",children:"A directory consisting of monitoring agent files that collect various performance metrics of the application server and transmit them to the server."}),(0,i.jsx)(c,{name:"bootstrap",type:"folder",children:"A directory having the files that collect various data from the Python agents. It runs when the Python agent starts."}),(0,i.jsx)(c,{name:"conf / control",type:"folder",children:"A directory that consists of the files for configuring and controlling the Python agent."}),(0,i.jsx)(c,{name:"net / pack",type:"folder",children:"A directory that consists of the files related to UDP communication. It is responsible for transmitting the collected data to the server."}),(0,i.jsx)(c,{name:"trace",type:"folder",children:"A directory that consists of the files that collect various transaction data for each application."}),(0,i.jsxs)(c,{name:"paramkey.txt",type:"file",children:[(0,i.jsx)(n.p,{children:"It is used to check the parameters of HTTP and SQL data collected as the trace information of the traced transactions. To store the security keys in a file and view the actual data in the browser, enter the security key saved in the file. You can modify your security key by manually changing the content of the file. For more information about related options, see the following:"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"agent-transaction#profile_http_parameter",children:"profile_http_parameter_enabled"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"agent-dbsql#profile-sql-param",children:"profile_sql_param_enabled"})})]}),(0,i.jsx)(c,{name:"setup.py",type:"file",children:"Definition file for packaging the whatap directories."})]})]}),(0,i.jsx)(n.section,{className:"remark-sectionize-h2",children:(0,i.jsx)(n.h2,{id:"agent-config",children:"Agent CONFIG."})}),(0,i.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(n.h3,{id:"whatap_home-default-path-configuration",children:"WHATAP_HOME default path configuration"}),(0,i.jsxs)(n.p,{children:["Specify the ",(0,i.jsx)(n.code,{children:"$WHATAP_HOME"})," path for log and configuration files. It is recommended to create a new whatap directory."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ export WHATAP_HOME=[PATH]\n"})})]}),(0,i.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(n.h3,{id:"configuring-the-access-key-and-collection-server-ip",children:"Configuring the access key and collection server IP"}),(0,i.jsxs)(n.p,{children:["Execute the ",(0,i.jsx)(n.code,{children:"whatap-setting-config"})," command to set the access key and collection server IP."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ whatap-setting-config \\\n--host [ COLLECTION_SERVER_IP ] \\\n--license [ ACCESS_KEY ] \\\n--app_name [ USER_DEFINED_AGENT_NAME ] \\\n--app_process_name [ APPLICATION_PROCESS_NAME(uwsgi, gunicorn etc..) ]\n"})})]}),(0,i.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(n.h3,{id:"show-configuration",children:"Show Configuration"}),(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.em,{children:"whatap.conf"})," file is created and set in the path specified in ",(0,i.jsx)(n.code,{children:"$WHATAP_HOME"}),". Execute the following command to check whether the ",(0,i.jsx)(n.em,{children:"whatap.conf"})," file has been created."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ cat $WHATAP_HOME/whatap.conf\n"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="whatap.conf"',children:"license=[ACCESS_KEY]\nwhatap.server.host=[COLLECTION_SERVER_IP]\n\n# application name\napp_name=[ USER_DEFINED_AGENT_NAME ]\n\n# middleware process name ex)uwsgi, gunicorn ..\napp_process_name=[ APPLICATION_PROCESS_NAME(uwsgi, gunicorn etc..) ]\n"})}),(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"In case the role issue occurs"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Read and write permissions of ",(0,i.jsx)(n.em,{children:"$WHATAP_HOME/whatap.conf"})," for configuration"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Read and write permissions of ",(0,i.jsx)(n.em,{children:"$WHATAP_HOME/logs"})," and the subordinate files for logging"]}),"\n"]}),"\n"]}),(0,i.jsxs)(n.p,{children:["If you have role issues for the ",(0,i.jsx)(n.code,{children:"$WHATAP_HOME"})," path, execute the following command to assign roles."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"echo `sudo chmod -R 777 $WHATAP_HOME`\n"})})]})]}),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"applying-by-the-application-server-environment",children:"Applying by the application server environment"}),(0,i.jsx)(n.p,{children:"The application method may differ depending on the application server environment. Use the application method that suits your environment."}),(0,i.jsxs)(p,{children:[(0,i.jsxs)(d,{value:"command",label:"Command",children:[(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.strong,{children:"Command"})," environment, add the ",(0,i.jsx)(n.code,{children:"whatap-start-agent"})," command before the application startup command as follows:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="BASH"',children:"# $ whatap-start-agent [Application start command]\n$ whatap-start-agent python manage.py runserver\n"})})]}),(0,i.jsxs)(d,{value:"uwsgi",label:"uWSGI",children:[(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.strong,{children:"uWSGI"})," environment, add the ",(0,i.jsx)(n.code,{children:"whatap-start-agent"})," command before the ",(0,i.jsx)(n.code,{children:"uwsgi"})," command as follows:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="BASH"',children:"$ whatap-start-agent uwsgi --ini myapp.ini\n"})}),(0,i.jsx)(n.p,{children:"When running applications by registering uWSGI with the service, see the following example code."}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="/etc/init.d/uwsgi"',children:'description "uWSGI application server handling myapp"\nstart on runlevel [2345]\nstop on runlevel [!2345]\nexec whatap-start-agent [YOUR_APPLICATION_START_COMMAND]\n# or if you are using a virtual environment\nexec env WHATAP_HOME=[PATH] [ABSOLUTE_PATH]/whatap-start-agent [YOUR_APPLICATION_START_COMMAND]\n'})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="/etc/init/uwsgi.conf"',children:'...\nNAME="uwsgi"\nPATH=/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\nDAEMON=/usr/local/bin/uwsgi\nPID=$RUN/$NAME.pid\nINI_PATH=/etc/$NAME/$NAME.ini\n\n########## WHATAP_AGENT_CONF ##########\nWHATAP_HOME=[PATH]\nWHATAP_AGENT=[ABSOLUTE_PATH]/whatap-start-agent\n...\ndo_start(){\n  env WHATAP_HOME=$WHATAP_HOME $WHATAP_AGENT [YOUR_APPLICATION_START_COMMAND]\n}\n'})}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If the user has been changed, you have to add the ",(0,i.jsx)(n.code,{children:"WHATAP_HOME"})," environment variable."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If the virtual environment has been used, add the agent startup command in the absolute path."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Modify the service execution file (",(0,i.jsx)(n.em,{children:"/etc/init/uwsgi.conf"}),") and then start the application with the agent startup command."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Depending on the user environment, the path of the service executable file may differ."}),"\n"]}),"\n"]})})]}),(0,i.jsxs)(d,{value:"gunicorn",label:"Gunicorn",children:[(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.strong,{children:"Gunicorn"})," environment, add the ",(0,i.jsx)(n.code,{children:"whatap-start-agent"})," command before the ",(0,i.jsx)(n.code,{children:"Gunicorn"})," command as follows:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:"title=SH",children:"$ whatap-start-agent gunicorn myapp.wsgi\n"})}),(0,i.jsx)(n.p,{children:"When running applications by registering Gunicorn with the service, see the following example code."}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="/etc/init.d/gunicorn"',children:'description "gunicorn application server handling myapp"\nstart on runlevel [2345]\nstop on runlevel [!2345]\nexec whatap-start-agent [YOUR_APPLICATION_START_COMMAND]\n# or if you are using a virtual environment\nexec env WHATAP_HOME=[PATH] [ABSOLUTE_PATH]/whatap-start-agent [YOUR_APPLICATION_START_COMMAND]\n'})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="/etc/init/gunicorn.conf"',children:'...\nNAME="gunicorn"\nPATH=/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\nDAEMON=/usr/local/bin/gunicorn\nPID=$RUN/$NAME.pid\nINI_PATH=/etc/$NAME/$NAME.ini\n\n########## WHATAP_AGENT_CONF ##########\nWHATAP_HOME=[PATH]\nWHATAP_AGENT=[ABSOLUTE_PATH]/whatap-start-agent\n\n...\ndo_start(){\n  env WHATAP_HOME=$WHATAP_HOME $WHATAP_AGENT [YOUR_APPLICATION_START_COMMAND]\n}\n'})}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If the user has been changed, you have to add the ",(0,i.jsx)(n.code,{children:"WHATAP_HOME"})," environment variable."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If the virtual environment has been used, add the agent startup command in the absolute path."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Modify the service execution file (",(0,i.jsx)(n.em,{children:"/etc/init/gunicorn.conf"}),") and then start the application with the agent startup command."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Depending on the user environment, the path of the service executable file may differ."}),"\n"]}),"\n"]})})]}),(0,i.jsxs)(d,{value:"supervisor",label:"Supervisor",children:[(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.strong,{children:"Supervisor"})," environment, add the following settings in the ",(0,i.jsx)(n.em,{children:"supervisor.conf"})," file to apply:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="supervisor.conf"',children:"[program:app-uwsgi]\nenvironment = WHATAP_HOME=[PATH]\ncommand = [ABSOLUTE_PATH]/whatap-start-agent /usr/local/bin/uwsgi --ini /home/blog/backend/config/uwsgi.ini\n\n[program:nginx-app]\ncommand = /usr/sbin/nginx\n"})}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If the user has been changed, you have to add the ",(0,i.jsx)(n.code,{children:"WHATAP_HOME"})," environment variable."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If the virtual environment has been used, add the agent startup command in the absolute path."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Modify the service execution file (",(0,i.jsx)(n.em,{children:"/etc/supervisor/conf.d/supervisor.conf"}),") and then start the application with the agent startup command."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Depending on the user environment, the path of the service executable file may differ."}),"\n"]}),"\n"]})})]}),(0,i.jsxs)(d,{value:"wsgi",label:"WSGI",children:[(0,i.jsx)(n.p,{children:"Implementing your own WSGI application is provided. See the following:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="PYTHON"',children:"import whatap\n\n@whatap.register_app\ndef simple_app(environ, start_response):\n    \"\"\"Simplest possible application object\"\"\"\n    status = '200 OK'\n    response_headers = [('Content-type', 'text/plain')]\n    start_response(status, response_headers)\n    return ['Hello world!\\n']\n"})})]}),(0,i.jsxs)(d,{value:"docker",label:"Docker",children:[(0,i.jsxs)(n.p,{children:["In case of the application that is serviced to the docker container, add the following content to ",(0,i.jsx)(n.em,{children:"DockerFile"}),"."]}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Installing the ",(0,i.jsx)(n.strong,{children:"Python agent"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-docker",metastring:"title='Dockerfile' {3}",children:"ENV WHATAP_HOME /whatap\nRUN mkdir -p /whatap\nRUN pip install whatap-python\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["If you use ",(0,i.jsx)(n.em,{children:"requirements.txt"}),", add ",(0,i.jsx)(n.strong,{children:"whatap-python"})," to that file."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Register the settings for ",(0,i.jsx)(n.strong,{children:"access key"})," and ",(0,i.jsx)(n.strong,{children:"collection server IP"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-docker",metastring:"title='Dockerfile'",children:'RUN touch /whatap/whatap.conf\nRUN echo "license=[ ACCESS_KEY ]" > /whatap/whatap.conf\nRUN echo "whatap.server.host=[ COLLECTION_SERVER_IP ]" >> /whatap/whatap.conf\nRUN echo "app_name=[ AGENT_NAME ]" >> /whatap/whatap.conf\nRUN echo "app_process_name=[ APPLICATION_PROCESS_NAME(uwsgi, gunicorn etc..) ]" >> /whatap/whatap.conf\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Before the previous command, ",(0,i.jsx)(n.code,{children:"python manage.py runserver"}),", add ",(0,i.jsx)(n.code,{children:"whatap-start-agent"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-docker",metastring:"title='Dockerfile'",children:'CMD ["whatap-start-agent", "python", "manage.py", "runserver", "0.0.0.0:8000"]\n'})}),"\n"]}),"\n"]})]}),(0,i.jsxs)(d,{value:"code",label:"Code",children:[(0,i.jsx)(n.p,{children:"You can apply the agent by adding the code that calls the API at the top line of the code as follows:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="PYTHON"',children:"import whatap\nwhatap.agent()\n"})})]})]}),(0,i.jsx)(n.p,{children:"When you run the application server, the agent starts collecting the monitoring data."})]}),(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"checking-the-service-running",children:"Checking the service running"}),(0,i.jsx)(n.p,{children:"Execute the following command to check whether the WhaTap Python service is running properly."}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ps -ef | grep whatap_python\n"})})]})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),(0,i.jsx)("div",{className:"nextstep",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Checking the installation"})}),"\n",(0,i.jsx)(n.p,{children:"If you have applied all for project creation and agent installation, check the checklist in [the following] (install-check)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Installation troubleshooting"})}),"\n",(0,i.jsxs)(n.p,{children:["It provides various problems while installing the agent and the detailed instructions for resolving them. For more information, see ",(0,i.jsx)(n.a,{href:"agent-troubleshooting",children:"the following"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Agent setting"})}),"\n",(0,i.jsxs)(n.p,{children:["It provides various features for monitoring by applying options in the agent configuration (",(0,i.jsx)(n.em,{children:"whatap.conf"}),") file. It covers everything from basic configuration to settings for server connection and data transfer, the method how to manage the configuration files for multiple application servers, transaction tracing, and more. For more information, see ",(0,i.jsx)(n.a,{href:"set-agent",children:"the following"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Starting the monitoring"})}),"\n",(0,i.jsxs)(n.p,{children:["After all settings are made, restart the application server. The agents start collecting the data. First, check whether the monitoring data is collected in ",(0,i.jsx)(t,{sid:"side_appDashboard",className:"uitext"}),". For more information about ",(0,i.jsx)(t,{sid:"side_appDashboard",className:"uitext"}),", see ",(0,i.jsx)(n.a,{href:"dashboard",children:"the following"}),"."]}),"\n"]}),"\n"]})})]})]})}function x(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}function m(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},21024:(e,n,t)=>{t.d(n,{A:()=>a});var i=t(74848),s=(t(96540),t(15418));function a({sid:e}){return(0,i.jsx)(s.A,{id:e})}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(96540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);