"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([[26298],{87850:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>a});var s=t(74848),i=t(28453);const a=[];function r(e){const n={code:"code",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(n.p,{children:["The end point is the start method of the transaction. In case of the HTTP transaction, ",(0,s.jsx)(n.code,{children:"HttpServlet.service()"})," or ",(0,s.jsx)(n.code,{children:"Filter.doFilter()"}),' is the start point of transaction, and this point is called "',(0,s.jsx)(n.strong,{children:"transaction end point"}),'."']})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},65921:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>a});var s=t(74848),i=t(28453);const a=[];function r(e){const n={code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Generally, transactions are identified by the method name."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",metastring:"title='whatap.conf'",children:"service_name_mode=[full,class,method,string,arg]\nservice_name_index=0\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"service_name_mode"})}),"\n",(0,s.jsxs)(n.p,{children:["You can specify any of 5 options: ",(0,s.jsx)(n.code,{children:"full"}),", ",(0,s.jsx)(n.code,{children:"class"}),", ",(0,s.jsx)(n.code,{children:"method"}),", ",(0,s.jsx)(n.code,{children:"string"}),", and ",(0,s.jsx)(n.code,{children:"arg"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"full"}),": The full class name is used as the service name."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"class"}),": The class name is used as the service name."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"method"}),": The method name is used as the service name."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"string"}),": The first parameter in the text string is used as the service name."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"arg"}),": Among parameters, the parameter of the index specified in the ",(0,s.jsx)(n.code,{children:"service_name_index"})," option is used as the service name."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},63003:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>a});var s=t(74848),i=t(28453);const a=[];function r(e){const n={admonition:"admonition",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Method Trace Setting"})}),"\n",(0,s.jsxs)(n.p,{children:["Set the method trace. Be sure to specify a class that is called in transactions. The ",(0,s.jsx)(n.strong,{children:"JDBC driver"})," is useful for the programs that use the database."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",metastring:"title='whatap.conf'",children:"hook_method_patterns=jdbc.*.*\nhook_method_access_public_enabled=true\nhook_method_access_protected_enabled=true\nhook_method_access_none_enabled=true\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Transaction start option setting"})}),"\n",(0,s.jsx)(n.p,{children:"Start a transaction when the method is called. Turn on the transaction start option and the option to dump the stack at the start of a transaction."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",metastring:"title='whatap.conf'",children:"trace_auto_transaction_enabled=true\ntrace_auto_transaction_backstack_enabled=true\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Trace analysis after restart"})}),"\n",(0,s.jsx)(n.p,{children:"Restart it. After calling the service, you can see the transaction being traced."}),"\n",(0,s.jsxs)(n.p,{children:["If you view the transaction, you can see that the methods of all classes starting with ",(0,s.jsx)(n.code,{children:"jdbc.*"})," appear in this transaction. If you view the transaction trace, you can see the message step called ",(0,s.jsx)(n.strong,{children:"TRANSACTION BACKSTACK"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"title='TRANSACTION BACKSTACK'",children:"jdbc.FakePreparedStatement.executeQuery(FakePreparedStatement.java),\ncom.virtual.dao.SelectDAO.execute2(SelectDAO.java:29),\ncom.virtual.web.SimulaNonHttp.execute(SimulaNonHttp.java:147),\ncom.virtual.web.SimulaNonHttp.process(SimulaNonHttp.java:76),\ncom.virtual.web.SimulaNonHttp.run(SimulaNonHttp.java:100)\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Check Stack Content"})}),"\n",(0,s.jsx)(n.p,{children:"By checking the stack content, you can infer which method the transaction is departing from."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"title='Example'",children:"com.virtual.web.SimulaNonHttp.execute(SimulaNonHttp.java:147),\ncom.virtual.web.SimulaNonHttp.process(SimulaNonHttp.java:76),\ncom.virtual.web.SimulaNonHttp.run(SimulaNonHttp.java:100)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["One of the above three methods can be determined as the start point of a transaction. In this situation, perform reverse compilation to determine the appropriate ",(0,s.jsx)(n.strong,{children:"transaction end point"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Looking at the logic, ",(0,s.jsx)(n.code,{children:"while()"})," runs within ",(0,s.jsx)(n.code,{children:"SimulaNonHttp.run"}),", ",(0,s.jsx)(n.code,{children:"SimulaNonHttp.process()"})," is called, and then ",(0,s.jsx)(n.code,{children:"SimulaNonHttp.execute()"})," is run. We can guess that ",(0,s.jsx)(n.code,{children:"process()"})," is appropriate. This part must be determined by looking at the source."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The most ",(0,s.jsx)(n.strong,{children:"important criterion for end point is that it must be ended"}),". Under normal circumstances, it must terminate immediately without any delay so that the performance evaluation can be made."]})}),"\n"]}),"\n"]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},74831:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>a});var s=t(74848),i=t(28453);const a=[];function r(e){const n={admonition:"admonition",code:"code",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:['The performance from the start to the end of the method specified as the transaction end point, is called "transaction performance." To trace non HTTP transactions, be sure to specify the ',(0,s.jsx)(n.strong,{children:"end point"}),"."]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.mdxAdmonitionTitle,{}),(0,s.jsxs)(n.p,{children:["Finding the ",(0,s.jsx)(n.strong,{children:"end point"})]}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Set the transaction trace for all methods where transactions are supposed to be called."}),"\n",(0,s.jsx)(n.li,{children:"After restarting, trigger a transaction for monitoring."}),"\n",(0,s.jsxs)(n.li,{children:["Turn on the ",(0,s.jsx)(n.code,{children:"back stack"})," option to pinpoint the entry method."]}),"\n"]})]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},45897:(e,n,t)=>{t.d(n,{Ay:()=>o,RM:()=>a});var s=t(74848),i=t(28453);const a=[];function r(e){const n={admonition:"admonition",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Set the transaction start point as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",metastring:'title="whatap.conf"',children:"hook_service_patterns=com.virtual.web.SimulaNonHttp.process\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Restart the application."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"process()"})," method becomes the ",(0,s.jsx)(n.strong,{children:"end point"})," of a new transaction."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["For the ",(0,s.jsx)(n.code,{children:"hook_service_patterns"})," option, wildcard characters cannot be used. To set multiple values, use comma (,) as the delimiter."]})})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},46043:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>x,contentTitle:()=>m,default:()=>f,frontMatter:()=>p,metadata:()=>u,toc:()=>j});var s=t(74848),i=t(28453),a=t(87850),r=t(74831),o=t(63003),c=t(45897),l=t(65921);function d(e){const n={admonition:"admonition",code:"code",em:"em",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"It is recommended to use a plug-in only if you are familiar with it."})}),"\n",(0,s.jsxs)(n.p,{children:["Create the ",(0,s.jsx)(n.em,{children:"plugin"})," folder under the ",(0,s.jsx)(n.em,{children:"WHATAP_HOME"})," path and move to ",(0,s.jsx)(n.em,{children:"plugin"}),". Create the ",(0,s.jsx)(n.em,{children:"AppServiceStart.x"})," file with the ",(0,s.jsx)(n.code,{children:"vi"})," command."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://img.whatap.io/media/agent_python/data/app_start_plug.png",alt:"Plugin usage example"})}),"\n",(0,s.jsxs)(n.p,{children:["If you type ",(0,s.jsx)(n.code,{children:'println("test");'}),' and save it, you can see that the string "test" is displayed on the screen. After checking it, extract data from the parameter.']}),"\n",(0,s.jsxs)(n.p,{children:["In the following example, ",(0,s.jsx)(n.code,{children:"HashMap"})," is passed as a parameter, and this ",(0,s.jsx)(n.code,{children:"HashMap"})," contains the key called 'url'."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:"title=JAVA",children:'Object url =((java.util.HashMap)$point.getArgs()[0]).get("url");\n$ctx.service((String)url);\n//println("url="+url);\n'})}),"\n",(0,s.jsx)(n.p,{children:"If you create a plugin like this, you can change the transaction name."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}const p={id:"trs-endpoint-setting",title:"Setting the transaction endpoint",description:"It guides you to the transaction endpoint setting.",tags:["Java","Transactions"]},m=void 0,u={id:"java/trs-endpoint-setting",title:"Setting the transaction endpoint",description:"It guides you to the transaction endpoint setting.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/java/trs-endpoint-setting.mdx",sourceDirName:"java",slug:"/java/trs-endpoint-setting",permalink:"/java/trs-endpoint-setting",draft:!1,unlisted:!1,editUrl:"undefined/docs/java/trs-endpoint-setting.mdx",tags:[{inline:!0,label:"Java",permalink:"/tags/java"},{inline:!0,label:"Transactions",permalink:"/tags/transactions"}],version:"current",frontMatter:{id:"trs-endpoint-setting",title:"Setting the transaction endpoint",description:"It guides you to the transaction endpoint setting.",tags:["Java","Transactions"]},sidebar:"javaSidebar",previous:{title:"Multi-transaction",permalink:"/java/trs-multi-trace"},next:{title:"Transaction step collection method",permalink:"/java/collect-stacks"}},x={},j=[...a.RM,{value:"Non-HTTP tracing",id:"non-http-tracing",level:2},...r.RM,{value:"Selecting the target",id:"selecting-the-target",level:2},...o.RM,{value:"Set the transaction endpoint",id:"set-the-transaction-endpoint",level:2},...c.RM,{value:"Defining the transaction name",id:"defining-the-transaction-name",level:2},...l.RM,{value:"Using the plug-in",id:"using-the-plug-in",level:2}];function g(e){const n={h2:"h2",section:"section",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Ay,{}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"non-http-tracing",children:"Non-HTTP tracing"}),(0,s.jsx)(r.Ay,{})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"selecting-the-target",children:"Selecting the target"}),(0,s.jsx)(o.Ay,{})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"set-the-transaction-endpoint",children:"Set the transaction endpoint"}),(0,s.jsx)(c.Ay,{})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"defining-the-transaction-name",children:"Defining the transaction name"}),(0,s.jsx)(l.Ay,{})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"using-the-plug-in",children:"Using the plug-in"}),(0,s.jsx)(h,{})]})]})}function f(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);