"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([[84126],{96700:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>h});var s=t(74848),i=t(28453);const r={id:"agent-troubleshooting",title:"Agent troubleshooting",description:"You can check the problems that may occur during the agent installation.",hide_table_of_contents:!0,toc_max_heading_level:2,tags:["Kubernetes","Kubernetes Monitoring","Troubleshooting","Troubleshooting","Agent issues"]},o=void 0,a={id:"kubernetes/agent-troubleshooting",title:"Agent troubleshooting",description:"You can check the problems that may occur during the agent installation.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/kubernetes/agent-troubleshooting.mdx",sourceDirName:"kubernetes",slug:"/kubernetes/agent-troubleshooting",permalink:"/kubernetes/agent-troubleshooting",draft:!1,unlisted:!1,editUrl:"undefined/docs/kubernetes/agent-troubleshooting.mdx",tags:[{inline:!0,label:"Kubernetes",permalink:"/tags/kubernetes"},{inline:!0,label:"Kubernetes Monitoring",permalink:"/tags/kubernetes-monitoring"},{inline:!0,label:"Troubleshooting",permalink:"/tags/troubleshooting"},{inline:!0,label:"Troubleshooting",permalink:"/tags/troubleshooting"},{inline:!0,label:"Agent issues",permalink:"/tags/agent-issues"}],version:"current",frontMatter:{id:"agent-troubleshooting",title:"Agent troubleshooting",description:"You can check the problems that may occur during the agent installation.",hide_table_of_contents:!0,toc_max_heading_level:2,tags:["Kubernetes","Kubernetes Monitoring","Troubleshooting","Troubleshooting","Agent issues"]},sidebar:"kubeSidebar",previous:{title:"Creating a namespace project",permalink:"/kubernetes/create-name-space-project"},next:{title:"\uc124\uc815\ud558\uae30",permalink:"/kubernetes/set-agent"}},l={},h=[{value:"Installation troubleshooting based on the Helm chart",id:"troubleshooting-helm-chart",level:2},{value:"In case there is a <code>whatap</code> Helm repository with the same name",id:"in-case-there-is-a-whatap-helm-repository-with-the-same-name",level:3},{value:"In case there is another namespace named <code>whatap-monitoring</code> in the cluster",id:"in-case-there-is-another-namespace-named-whatap-monitoring-in-the-cluster",level:3},{value:"In case the <code>clusterrole</code> and <code>clusterrolebinding</code> resources exist in the cluster",id:"in-case-the-clusterrole-and-clusterrolebinding-resources-exist-in-the-cluster",level:3},{value:"Troubleshooting issues that occur when starting the agent",id:"troubleshooting-agent",level:2},{value:"In case of installation of WhaTap Kubernetes Monitoring via an old YAML file",id:"in-case-of-installation-of-whatap-kubernetes-monitoring-via-an-old-yaml-file",level:3},{value:"Cause",id:"cause",level:4},{value:"solved",id:"solved",level:4}];function c(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"troubleshooting-helm-chart",children:"Installation troubleshooting based on the Helm chart"}),(0,s.jsxs)("div",{class:"faq",children:[(0,s.jsxs)(n.h3,{id:"in-case-there-is-a-whatap-helm-repository-with-the-same-name",children:["In case there is a ",(0,s.jsx)(n.code,{children:"whatap"})," Helm repository with the same name"]}),(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsx)(n.tr,{children:(0,s.jsx)(n.th,{children:'"whatap" already exists with the same configuration, skipping'})})})}),(0,s.jsxs)(n.p,{children:["If another ",(0,s.jsx)(n.code,{children:"whatap"})," repository with the same name already exists, delete the existing ",(0,s.jsx)(n.code,{children:"whatap"})," repository by using the following command and then proceed with installation."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"helm repo remove whatap\n"})}),(0,s.jsxs)(n.h3,{id:"in-case-there-is-another-namespace-named-whatap-monitoring-in-the-cluster",children:["In case there is another namespace named ",(0,s.jsx)(n.code,{children:"whatap-monitoring"})," in the cluster"]}),(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsx)(n.tr,{children:(0,s.jsx)(n.th,{children:'Error: INSTALLATION FAILED: Unable to continue with install: Namespace "whatap-monitoring" in namespace "" exists and cannot be imported into the current release'})})})}),(0,s.jsxs)(n.p,{children:["If the ",(0,s.jsx)(n.code,{children:"whatap-monitoring"})," namespace exists in the cluster, it is because the user has already installed the Whatap Kubernetes agent based on the ",(0,s.jsx)(n.em,{children:"yaml"})," file. In this case, delete the existing ",(0,s.jsx)(n.code,{children:"whatap-monitoring"})," namespace and related resources by using the following commands."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"kubectl delete namespace whatap-monitoring\nkubectl delete clusterrolebinding whatap\nkubectl delete clusterrole whatap\n"})}),(0,s.jsxs)(n.h3,{id:"in-case-the-clusterrole-and-clusterrolebinding-resources-exist-in-the-cluster",children:["In case the ",(0,s.jsx)(n.code,{children:"clusterrole"})," and ",(0,s.jsx)(n.code,{children:"clusterrolebinding"})," resources exist in the cluster"]}),(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsx)(n.tr,{children:(0,s.jsx)(n.th,{children:'Error: INSTALLATION FAILED: Unable to continue with install: ClusterRole "whatap" in namespace "" exists and cannot be imported into the current release'})})})}),(0,s.jsxs)(n.p,{children:["If the ",(0,s.jsx)(n.code,{children:"clusterrole"})," and ",(0,s.jsx)(n.code,{children:"clusterrolebinding"})," resources already exist in the cluster, delete them by using the following commands."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"kubectl delete clusterrolebinding whatap\nkubectl delete clusterrole whatap\n"})})]})]}),"\n",(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"troubleshooting-agent",children:"Troubleshooting issues that occur when starting the agent"}),(0,s.jsxs)("div",{class:"faq",children:[(0,s.jsx)(n.h3,{id:"in-case-of-installation-of-whatap-kubernetes-monitoring-via-an-old-yaml-file",children:"In case of installation of WhaTap Kubernetes Monitoring via an old YAML file"}),(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsx)(n.tr,{children:(0,s.jsxs)(n.th,{children:["Unrecognized VM option 'UseCGroupMemoryLimitForHeap'",(0,s.jsx)("br",{}),"Error: Could not create the Java Virtual Machine.",(0,s.jsx)("br",{}),"Error: A fatal exception has occurred. Program will exit."]})})})}),(0,s.jsxs)(n.p,{children:["If you installed WhaTap Kubernetes Monitoring via the installation ",(0,s.jsx)(n.em,{children:"YAML"})," downloaded before ",(0,s.jsx)(n.strong,{children:"August 24, 2022"}),", you may encounter an error or failure to start the node agent (whatap-node-agent)."]}),(0,s.jsx)(n.h4,{id:"cause",children:"Cause"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The installation ",(0,s.jsx)(n.em,{children:"YAML"})," file downloaded before August 24, 2022 contains a node agent launch script using the ",(0,s.jsx)(n.code,{children:"UseCGroupMemoryLimitForHeap"})," JVM option."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Starting from WhaTap node agent 1.2.0 (released on November 21, 2022), the JDK used in the agent has been upgraded, and the upgraded JDK version no longer provides the ",(0,s.jsx)(n.code,{children:"UseCGroupMemoryLimitForHeap"})," option."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If you run the node agent 1.2.0 or later with the WhaTap Kubernetes Monitoring installed using a ",(0,s.jsx)(n.em,{children:"YAML"})," file downloaded before August 24, 2022, the startup fails with the message ",(0,s.jsx)(n.code,{children:"Unrecognized VM option 'UseCGroupMemoryLimitForHeap\u2019"}),"."]}),"\n"]}),"\n"]}),(0,s.jsx)(n.h4,{id:"solved",children:"solved"}),(0,s.jsx)(n.p,{children:"Reinstall WhaTap Kubernetes Monitoring by following the steps below:"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Download the latest ",(0,s.jsx)(n.em,{children:"YAML"})," file by using ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"Management"})})," > ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"Agent install"})}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Install the agent by using the ",(0,s.jsx)(n.em,{children:"YAML"})," file downloaded from the Kubernetes environment."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Check whether any errors are output during installation in the Kubernetes environment."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Make sure the WhaTap monitoring agent Pod is in Running state."}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.mdxAdmonitionTitle,{}),(0,s.jsxs)(n.p,{children:["Check the Kubernetes environment and the ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"Workload"})})," > ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"Pod list"})})," menu."]})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Check the logs generated by each monitoring agent through ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"Management"})})," > ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"Kubernetes agent list"})}),"."]}),"\n"]}),"\n"]})]})]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);