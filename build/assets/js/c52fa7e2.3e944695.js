"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([[43834],{88829:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var a=t(74848),o=t(28453);const s=[];function i(e){const n={a:"a",admonition:"admonition",p:"p",...(0,o.R)(),...e.components};return(0,a.jsx)(n.admonition,{type:"caution",children:(0,a.jsxs)(n.p,{children:["OpenTelemetry monitoring is a Beta version so unexpected errors may occur. It is not recommended for using it for sensitive data or in the operation environment. If you have any feedback or issues, feel free to contact the support team at ",(0,a.jsx)(n.a,{href:"mailto:support@whatap.io",children:"support@whatap.io"}),"."]})})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(i,{...e})}):i(e)}},1730:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>h});var a=t(74848),o=t(28453),s=t(88829);const i={id:"install-agent",title:"Agent Installation",description:"It guides you how to install the OpenTelemetry agent."},l=void 0,r={id:"opentelemetry/install-agent",title:"Agent Installation",description:"It guides you how to install the OpenTelemetry agent.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/opentelemetry/install-agent.mdx",sourceDirName:"opentelemetry",slug:"/opentelemetry/install-agent",permalink:"/opentelemetry/install-agent",draft:!1,unlisted:!1,editUrl:"undefined/docs/opentelemetry/install-agent.mdx",tags:[],version:"current",frontMatter:{id:"install-agent",title:"Agent Installation",description:"It guides you how to install the OpenTelemetry agent."},sidebar:"otelSidebar",previous:{title:"OpenTelemetry",permalink:"/opentelemetry/introduction"},next:{title:"Configuration",permalink:"/opentelemetry/set-agent"}},c={},h=[...s.RM,{value:"Download agent",id:"download-agent",level:2},{value:"Default agent settings",id:"default-agent-settings",level:2},{value:"Configuring the whatap.conf file",id:"configuring-the-whatapconf-file",level:3},{value:"Configuring with environment variables",id:"configuring-with-environment-variables",level:3},{value:"Configuring the Opentelemetry Collector",id:"configuring-the-opentelemetry-collector",level:2},{value:"Other platforms",id:"other-platforms",level:2},{value:"Tyk Gateway",id:"tyk-gateway",level:3},{value:"Starting the monitoring",id:"starting-the-monitoring",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",ul:"ul",...(0,o.R)(),...e.components},{Cmdname:t,Head:i,TabItem:l,Tabs:r}=n;return t||u("Cmdname",!0),i||u("Head",!0),l||u("TabItem",!0),r||u("Tabs",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{children:(0,a.jsx)("meta",{name:"robots",content:"noindex, nofollow"})}),"\n","\n",(0,a.jsx)(s.Ay,{}),"\n",(0,a.jsx)(n.p,{children:"It guides you how to install the OpenTelemetry agent."}),"\n",(0,a.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,a.jsx)(n.h2,{id:"download-agent",children:"Download agent"}),(0,a.jsx)(n.p,{children:"Execute the following command to download the agent to the instance where the OpenTelemetry Collector has been installed."}),(0,a.jsxs)(r,{groupId:"os",children:[(0,a.jsx)(l,{value:"rc",label:"Red Hat/Centos",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Register package repository\n$ sudo rpm -Uvh https://repo.whatap.io/centos/5/noarch/whatap-repo-1.0-1.noarch.rpm\n\n# Install package\n$ sudo yum install whatap-otel\n"})})}),(0,a.jsx)(l,{value:"du",label:"Debian/Ubuntu",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Register package repository\n$ wget https://repo.whatap.io/debian/release.gpg -O -|sudo apt-key add -\n$ wget https://repo.whatap.io/debian/whatap-repo_1.0_all.deb\n$ sudo dpkg -i whatap-repo_1.0_all.deb\n$ sudo apt-get update\n\n# Install package\n$ sudo apt-get install whatap-otel\n"})})}),(0,a.jsx)(l,{value:"al",label:"Amazon Linux",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Register package repository\n$ sudo rpm --import https://repo.whatap.io/centos/release.gpg\n$ echo "[whatap]" | sudo tee /etc/yum.repos.d/whatap.repo > /dev/null\n$ echo "name=whatap packages for enterprise linux" | sudo tee -a /etc/yum.repos.d/whatap.repo > /dev/null\n$ echo "baseurl=https://repo.whatap.io/centos/latest/\\$basearch" | sudo tee -a /etc/yum.repos.d/whatap.repo > /dev/null\n$ echo "enabled=1" | sudo tee -a /etc/yum.repos.d/whatap.repo > /dev/null\n$ echo "gpgcheck=0" | sudo tee -a /etc/yum.repos.d/whatap.repo > /dev/null\n\n# Install package\n$ sudo yum install whatap-otel\n'})})}),(0,a.jsx)(l,{value:"apl",label:"Alpine Linux",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ wget https://s3.ap-northeast-2.amazonaws.com/repo.whatap.io/alpine/x86_64/whatap-otel.tar.gz\n$ tar -xvzf whatap-otel.tar.gz -C /\n"})})}),(0,a.jsx)(l,{value:"apldocker",label:"Alpine Linux Docker",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:'title="FROM alpine"',children:"FROM alpine\n\nRUN apk update && apk upgrade\n# Install WhaTap Go monitoring agent\nRUN wget https://s3.ap-northeast-2.amazonaws.com/repo.whatap.io/alpine/x86_64/whatap-otel.tar.gz\nRUN tar -xvzf whatap-otel.tar.gz -C /\n"})})})]})]}),"\n",(0,a.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,a.jsx)(n.h2,{id:"default-agent-settings",children:"Default agent settings"}),(0,a.jsxs)(n.p,{children:["To configure the agent, the WhaTap project's access key and collection server IP address are required. In ",(0,a.jsx)(n.a,{href:"https://service.whatap.io",children:"WhaTap monitoring service"}),", move to the project for the application product. In ",(0,a.jsx)(t,{sid:"management",className:"uitext"})," > ",(0,a.jsx)(t,{sid:"agentInstall",className:"uitext"}),", check the access key and collection server IP address for preparation."]})]}),"\n",(0,a.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,a.jsx)(n.h3,{id:"configuring-the-whatapconf-file",children:"Configuring the whatap.conf file"}),(0,a.jsxs)(n.p,{children:["Set the access key and collection server IP address in the agent configuration (",(0,a.jsx)(n.em,{children:"whatap.conf"}),") file."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'echo "accesskey={ACCESS_KEY}" >> /usr/whatap/otel/whatap.conf \necho "whatap.server.host={COLLECTOR_SERVER_IP_ADDRESS}" >> /usr/whatap/otel/whatap.conf \n'})})]}),"\n",(0,a.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,a.jsx)(n.h3,{id:"configuring-with-environment-variables",children:"Configuring with environment variables"}),(0,a.jsx)(n.p,{children:"You can set the access key and collection server IP address as environment variables."}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ini",children:"WHATAP_ACCESSKEY={ACCESS_KEY}\nWHATAP_SERVER_HOST={COLLECTOR_SERVER_IP_ADDRESS}\nWHATAP_OTEL_GRPC_SERVER_PORT={gRPC_SERVER_LISTENING_PORT}\n"})}),(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["If both environment variables and the ",(0,a.jsx)(n.em,{children:"whatap.conf"})," file have been configured, the settings in the ",(0,a.jsx)(n.em,{children:"whatap.conf"})," file take precedence."]})})]}),"\n",(0,a.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,a.jsx)(n.h2,{id:"configuring-the-opentelemetry-collector",children:"Configuring the Opentelemetry Collector"}),(0,a.jsx)(n.p,{children:"Configure the OTLP Exporter to forward data to whatap-otel."}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="otel-collector-config.yaml" showLineNumbers{13,14-15}',children:"receivers:\n  otlp:\n    protocols:\n      grpc:\n        endpoint: 0.0.0.0:4317\nprocessors:\n  batch:\n\nexporters:\n  logging:\n  # otlp exporter\uc5d0 whatap-otel\uc744 \ub300\uc0c1\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4.\n  otlp:\n    endpoint: 127.0.0.1:6600\n    tls:\n      insecure: true\n\nservice:\n  pipelines:\n    traces:\n      receivers:\n      - otlp\n      processors:\n      - batch\n      exporters:\n      - logging\n      - otlp\n  telemetry:\n    logs:\n      level: debug #activate debug mode\n"})}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["End point (",(0,a.jsx)(n.code,{children:"endpoint"}),") setting: ",(0,a.jsx)(n.code,{children:"127.0.0.1:6600"})]}),"\n",(0,a.jsx)(n.p,{children:"The default port for local agents is 6600."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"tls.secure"})," setting: ",(0,a.jsx)(n.code,{children:"insecure: true"})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"The gzip compression settings are used by default. (gzip is used)"}),"\n"]}),"\n"]}),(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:"For more information about the OpenTelemetry Collector installation, see the following link."}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://opentelemetry.io/docs/collector/installation/",children:"Install the Collector"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://opentelemetry.io/docs/collector/custom-collector/",children:"Building a custom collector"})}),"\n"]}),"\n"]})]})]}),"\n",(0,a.jsx)(n.section,{className:"remark-sectionize-h2",children:(0,a.jsx)(n.h2,{id:"other-platforms",children:"Other platforms"})}),"\n",(0,a.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,a.jsx)(n.h3,{id:"tyk-gateway",children:"Tyk Gateway"}),(0,a.jsxs)(n.p,{children:["Enable the OpenTelemetry function of ",(0,a.jsx)(n.a,{href:"https://tyk.io/",children:"Tyk Gateway"})," and then check the transaction information through the OpenTelemetry Collecotr."]}),(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Connect the OpenTelemetry Collector to the Tyk Gateway."}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",metastring:'title="tyk.conf"',children:'{\n  "log_level": "debug" ,\n  "listen_port": 8081,\n\n  ...\n\n  "opentelemetry": {\n      "enabled": true,\n      "endpoint": "111.222.333.444:4317",\n  }\n}\n'})}),(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"When the whatap-otel agent is connected to the OpenTelemetry Collector, trace data is collected."}),"\n"]})]}),"\n",(0,a.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,a.jsx)(n.h2,{id:"starting-the-monitoring",children:"Starting the monitoring"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["If the application server is restarted after all settings are made, the agent collects data. Go to the ",(0,a.jsx)(t,{sid:"dashboard",className:"uitext"})," > ",(0,a.jsx)(t,{sid:"application_dashboard",className:"uitext"})," menu and then perform monitoring for the collected data in real time."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["For more information about the agent configuration, see ",(0,a.jsx)(n.a,{href:"set-agent",children:"the following"}),"."]}),"\n"]}),"\n"]})]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}function u(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var a=t(96540);const o={},s=a.createContext(o);function i(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);