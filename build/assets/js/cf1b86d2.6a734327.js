"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([[66349],{59376:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>d});var s=n(74848),i=n(28453),o=n(7519);const l={id:"agent-aws",title:"Using AWS CloudWatch",description:"The description of the agent configuration using the AWS CloudWatch",tags:["Altibase","Database","Database Monitoring","Agent","AWS"]},a=void 0,r={id:"altibase/agent-aws",title:"Using AWS CloudWatch",description:"The description of the agent configuration using the AWS CloudWatch",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/altibase/agent-aws.mdx",sourceDirName:"altibase",slug:"/altibase/agent-aws",permalink:"/altibase/agent-aws",draft:!1,unlisted:!1,editUrl:"undefined/docs/altibase/agent-aws.mdx",tags:[{inline:!0,label:"Altibase",permalink:"/tags/altibase"},{inline:!0,label:"Database",permalink:"/tags/database"},{inline:!0,label:"Database Monitoring",permalink:"/tags/database-monitoring"},{inline:!0,label:"Agent",permalink:"/tags/agent"},{inline:!0,label:"AWS",permalink:"/tags/aws"}],version:"current",frontMatter:{id:"agent-aws",title:"Using AWS CloudWatch",description:"The description of the agent configuration using the AWS CloudWatch",tags:["Altibase","Database","Database Monitoring","Agent","AWS"]},sidebar:"altibaseSidebar",previous:{title:"Agent name identification",permalink:"/altibase/agent-naming"},next:{title:"Collecting the agent data",permalink:"/altibase/agent-data"}},c={},d=[...o.RM];function h(e){return(0,s.jsx)(o.Ay,{})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h()}},7519:(e,t,n)=>{n.d(t,{Ay:()=>a,RM:()=>o});var s=n(74848),i=n(28453);const o=[{value:"Example of configuration for RDS CloudWatch collection",id:"example-of-configuration-for-rds-cloudwatch-collection",level:3}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"aws_region"})," ",(0,s.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,s.jsx)(t.p,{children:"Set the AWS region."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"aws_arn"})," ",(0,s.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,s.jsx)(t.p,{children:"You can use the ARN of an IAM ROLE with appropriate roles for AWS authentication."}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Required role"}),(0,s.jsx)(t.p,{children:"For the roles, the following policies are required."}),(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Role"}),(0,s.jsx)(t.th,{children:"Role details"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["rds",":DescribeDBInstances"]}),(0,s.jsx)(t.td,{children:"Collection of the instance class data"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["rds",":DescribeDBClusters"]}),(0,s.jsx)(t.td,{children:"Collection of cluster data when using the autoscale"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["rds",":DescribeDBLogFiles"]}),(0,s.jsx)(t.td,{children:"Collection of CloudWatch logs"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["rds",":DownloadDBLogFilePortion"]}),(0,s.jsx)(t.td,{children:"Collection of CloudWatch logs"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["ec2",":DescribeInstanceTypes"]}),(0,s.jsx)(t.td,{children:"Collection of CPU counts for each instance class"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["elasticache",":DescribeCacheClusters"]}),(0,s.jsx)(t.td,{children:"Collection of instance class data when using the elasticache"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["cloudwatch",":ListMetrics"]}),(0,s.jsx)(t.td,{children:"Collection of the list of CloudWatch metrics"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["cloudwatch",":GetMetricStatistics"]}),(0,s.jsx)(t.td,{children:"Collection of the values of the CloudWatch metrics"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["logs",":DescribeLogStreams"]}),(0,s.jsx)(t.td,{children:"Collection of CloudWatch logs (in case of using the posted logs)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["logs",":GetLogEvents"]}),(0,s.jsx)(t.td,{children:"Collection of CloudWatch logs (in case of using the posted logs)"})]})]})]})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"cloud_watch"})," ",(0,s.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,s.jsxs)(t.p,{children:["Set whether or not to use the CloudWatch Monitoring. The value is ",(0,s.jsx)(t.code,{children:"on"})," or ",(0,s.jsx)(t.code,{children:"off"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"cloud_watch_instance"})," ",(0,s.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,s.jsx)(t.p,{children:"Set the instance name of the CloudWatch."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"cloud_watch_interval"})," ",(0,s.jsx)("span",{class:"type",children:"Second"})]}),"\n",(0,s.jsx)(t.p,{children:"Set the interval to get monitoring values by CloudWatch (unit: second)."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"cloud_watch_metrics"})," ",(0,s.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,s.jsx)(t.p,{children:"Set the monitoring metric name to be imported into the CloudWatch. You can set it as follows:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ini",children:"cloud_watch_metrics=CPUUtilization,FreeableMemory,FreeStorageSpace,NetworkTransmitThroughput,NetworkReceiveThroughput\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.section,{className:"remark-sectionize-h3",children:[(0,s.jsx)(t.h3,{id:"example-of-configuration-for-rds-cloudwatch-collection",children:"Example of configuration for RDS CloudWatch collection"}),(0,s.jsx)(t.p,{children:"You must create the following default settings to monitor the RDS CloudWatch and collect the related data."}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ini",metastring:"title='whatap.conf'",children:"cloud_watch=on\naws_region=ap-northeast-2\n\n# Create roles in AWS IAM and then copy and paste the role ARN value.\naws_arn=arn:aws:iam::999999999999:role/UpdateApp\ncloud_watch_metrics=CPUUtilization,FreeableMemory,FreeStorageSpace,NetworkTransmitThroughput,NetworkReceiveThroughput\n\n#Example of the instance name\ncloud_watch_instance=pg-rds \n"})}),(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["For more information about the ",(0,s.jsx)(t.strong,{children:"role ARN"}),", see the ",(0,s.jsx)(t.a,{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_cross-account-with-roles.html",children:"following link"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["For information on how to collect data after granting the RDS CloudWatch metric collection role to EC2 without using the IAM ROLE's ARN value, see ",(0,s.jsx)(t.a,{href:"../reference/cloudwatch-metric-guide",children:"the following"}),"."]}),"\n"]}),"\n"]})})]})]})}function a(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var s=n(96540);const i={},o=s.createContext(i);function l(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);