<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-best-practice-guides/about-apm-dbc" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.1">
<title data-rh="true">DB connection delay and connection pool | WhaTap Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" name="twitter:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" property="og:url" content="https://docs.whatap.io/en/best-practice-guides/about-apm-dbc"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="ko_KR"><meta data-rh="true" property="og:locale:alternate" content="ja_JP"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="naver-site-verification" content="0c21fc5664a467108fb762ade47a3f81ee9b88ed"><meta data-rh="true" name="google-site-verification" content="rIlfJkbbogFOIDc3DgJZmOGbUMJWytyvZSKEgV7EMsE"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DB connection delay and connection pool | WhaTap Docs"><meta data-rh="true" name="description" content="The following guides you to the DBC delay issue (one of application performance failures) and the connection pool."><meta data-rh="true" property="og:description" content="The following guides you to the DBC delay issue (one of application performance failures) and the connection pool."><meta data-rh="true" name="keywords" content="Application,Application Monitoring,APM,DBC,Performance failure"><link data-rh="true" rel="icon" href="/en/img/whatap-favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.whatap.io/en/best-practice-guides/about-apm-dbc"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/best-practice-guides/about-apm-dbc" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/en/best-practice-guides/about-apm-dbc" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/ja/best-practice-guides/about-apm-dbc" hreflang="ja-JP"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/best-practice-guides/about-apm-dbc" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="WhaTap Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="WhaTap Docs Atom Feed">








<script>!function(e,t,a,o,r,s){e=e[r]=e[r]||{config:{projectAccessKey:"x4t5020boh2ln-z6pi7d91ds6c1a-z7t4b2lrgnub4o",pcode:29856,sampleRate:100,sessionReplaySampleRate:50,ignoreOrigins:[/^.*localhost.*$/i,/^.*ngrok-free.app.*$/i,/^.*whatap.github.io.*$/i],collectUserClick:!0}},(r=t.createElement(a)).async=1,r.src=o,(o=t.getElementsByTagName(a)[0]).parentNode.insertBefore(r,o)}(window,document,"script","https://repo.whatap-browser-agent.io/rum/prod/v1/whatap-browser-agent.js","WhatapBrowserAgent")</script>
<script>let curLang=document.documentElement.lang.split("-")[0];CRISP_RUNTIME_CONFIG={locale:curLang},window.$crisp=[],window.CRISP_WEBSITE_ID="9a0c342f-a5b1-4c4a-a22f-92c7b4b9b477",d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)</script>


<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E46TQ5VSCT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E46TQ5VSCT",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-WJSZDJR",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/en/assets/css/styles.92725c12.css">
<script src="/en/assets/js/runtime~main.1d769202.js" defer="defer"></script>
<script src="/en/assets/js/main.62964fd5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<script async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&amp;version=v17.0&amp;appId=169051789422006&amp;autoLogAppEvents=1" nonce="y4U7YSrt"></script>
<div id="fb-root"></div>




<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJSZDJR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedComponent_mlkZ themedComponent--light_NVdE" height="28" width="152"><img src="/en/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="28" width="152"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/en/whatap-overview">Getting started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/learning-guides">Learning</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Product</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/java/introduction">Java</a></li><li><a class="dropdown__link" href="/en/php/introduction">PHP</a></li><li><a class="dropdown__link" href="/en/nodejs/introduction">Node.js</a></li><li><a class="dropdown__link" href="/en/python/introduction">Python</a></li><li><a class="dropdown__link" href="/en/dotnet/introduction">.NET</a></li><li><a class="dropdown__link" href="/en/golang/introduction">Go</a></li><li><a class="dropdown__link" href="/en/server/introduction">Server</a></li><li><a class="dropdown__link" href="/en/kubernetes/introduction">Kubernetes</a></li><li><a class="dropdown__link" href="/en/postgresql/monitoring-intro">PostgreSQL</a></li><li><a class="dropdown__link" href="/en/oracle/monitoring-intro">Oracle</a></li><li><a class="dropdown__link" href="/en/oracle-pro/monitoring-intro">Oracle Pro</a></li><li><a class="dropdown__link" href="/en/mysql/monitoring-intro">MySQL</a></li><li><a class="dropdown__link" href="/en/mssql/monitoring-intro">SQL Server</a></li><li><a class="dropdown__link" href="/en/tibero/monitoring-intro">Tibero</a></li><li><a class="dropdown__link" href="/en/cubrid/monitoring-intro">CUBRID</a></li><li><a class="dropdown__link" href="/en/altibase/monitoring-intro">Altibase</a></li><li><a class="dropdown__link" href="/en/redis/monitoring-intro">Redis</a></li><li><a class="dropdown__link" href="/en/mongodb/monitoring-intro">MongoDB</a></li><li><a class="dropdown__link" href="/en/url/url-intro">URL</a></li><li><a class="dropdown__link" href="/en/browser">Browser</a></li><li><a class="dropdown__link narrow" href="/en/amazon-cloudwatch/install-agent">Amazon CloudWatch</a></li><li><a class="dropdown__link" href="/en/amazon-ecs/introduction">Amazon ECS</a></li><li><a class="dropdown__link" href="/en/aws-log/introduction">AWS Log</a></li><li><a class="dropdown__link" href="/en/azure/install-agent">Azure Monitor</a></li><li><a class="dropdown__link narrow" href="/en/ncloud/install-agent">Naver Cloud Monitoring</a></li><li><a class="dropdown__link narrow" href="/en/oracle-cloud/install-agent">Oracle Cloud Monitor</a></li><li><a class="dropdown__link narrow" href="/en/npm/introduction">Network Performance Monitoring</a></li><li><a class="dropdown__link narrow" href="/en/features/introduction">Feature Project</a></li><li><a class="dropdown__link" href="/en/log/introduction">Log</a></li><li><a class="dropdown__link" href="/en/extensions">Extensions</a></li></ul></div><a class="navbar__item navbar__link hidden" href="/en/java/introduction">Java Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/php/introduction">PHP Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/nodejs/introduction">Node.js Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/python/introduction">Python Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/dotnet/introduction">.NET Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/golang/introduction">Go Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/server/introduction">Server Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/kubernetes/introduction">Kubernetes Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/postgresql/monitoring-intro">PostgreSQL Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/oracle-v1/monitoring-intro">Oracle V1 Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/oracle/monitoring-intro">Oracle V2 Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/oracle-pro/monitoring-intro">Oracle Pro Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/mysql/monitoring-intro">MySQL Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/mssql/monitoring-intro">SQL Server Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/tibero/monitoring-intro">Tibero Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/cubrid/monitoring-intro">CUBRID Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/altibase/monitoring-intro">Altibase Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/redis/monitoring-intro">Redis Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/mongodb/monitoring-intro">MongoDB Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/url/url-intro">URL Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/amazon-cloudwatch/install-agent">Amazon CloudWatch</a><a class="navbar__item navbar__link hidden" href="/en/amazon-ecs/introduction">Amazon ECS</a><a class="navbar__item navbar__link hidden" href="/en/aws-log/introduction">AWS Log</a><a class="navbar__item navbar__link hidden" href="/en/azure/install-agent">Azure Monitor</a><a class="navbar__item navbar__link hidden" href="/en/ncloud/install-agent">Naver Cloud Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/oracle-cloud/install-agent">Oracle Cloud Monitor</a><a class="navbar__item navbar__link hidden" href="/en/log/introduction">Log Monitoring</a><a class="navbar__item navbar__link hidden" href="/en/browser">Browser</a><a class="navbar__item navbar__link hidden" href="/en/npm/introduction">NPM</a><a class="navbar__item navbar__link hidden" href="/en/extensions">Extension Tool</a><a class="navbar__item navbar__link hidden" href="/en/opentelemetry/introduction">OpenTelemetry</a><a class="navbar__item navbar__link" href="/en/manage">Management</a><a class="navbar__item navbar__link" href="/en/openapi-spec">Open API</a><a class="navbar__item navbar__link" href="/en/license/licenses">License</a><a class="navbar__item navbar__link" href="/en/release-notes">Release Notes</a><a class="navbar__item navbar__link" href="/en/faq/">FAQ</a><a class="navbar__item navbar__link" href="/en/blog">New features</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link oneColumn localeDropdown"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="iconLanguage_DSK9"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM18.92 8H15.97C15.65 6.75 15.19 5.55 14.59 4.44C16.43 5.07 17.96 6.35 18.92 8ZM12 4.04C12.83 5.24 13.48 6.57 13.91 8H10.09C10.52 6.57 11.17 5.24 12 4.04ZM4.26 14C4.1 13.36 4 12.69 4 12C4 11.31 4.1 10.64 4.26 10H7.64C7.56 10.66 7.5 11.32 7.5 12C7.5 12.68 7.56 13.34 7.64 14H4.26ZM5.08 16H8.03C8.35 17.25 8.81 18.45 9.41 19.56C7.57 18.93 6.04 17.66 5.08 16ZM8.03 8H5.08C6.04 6.34 7.57 5.07 9.41 4.44C8.81 5.55 8.35 6.75 8.03 8ZM12 19.96C11.17 18.76 10.52 17.43 10.09 16H13.91C13.48 17.43 12.83 18.76 12 19.96ZM14.34 14H9.66C9.57 13.34 9.5 12.68 9.5 12C9.5 11.32 9.57 10.65 9.66 10H14.34C14.43 10.65 14.5 11.32 14.5 12C14.5 12.68 14.43 13.34 14.34 14ZM14.59 19.56C15.19 18.45 15.65 17.25 15.97 16H18.92C17.96 17.65 16.43 18.93 14.59 19.56ZM16.36 14C16.44 13.34 16.5 12.68 16.5 12C16.5 11.32 16.44 10.66 16.36 10H19.74C19.9 10.64 20 11.31 20 12C20 12.69 19.9 13.36 19.74 14H16.36Z" fill="currentColor"></path></svg><span class="langLabel_L4uU">ENG</span></a><ul class="dropdown__menu"><li><a href="/best-practice-guides/about-apm-dbc" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko-KR">KOR</a></li><li><a href="/en/best-practice-guides/about-apm-dbc" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">ENG</a></li><li><a href="/ja/best-practice-guides/about-apm-dbc" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja-JP">JPN</a></li></ul></div><div class="navbarSearchContainer_dCNk"><div id="docsearch"></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently Light mode)" aria-label="Switch between dark and light mode (currently Light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" class="lightToggleIcon_pyhR"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10.9901 0H13.0099V4.06189C15.2205 4.33486 17.1538 5.49222 18.4373 7.16513L21.9901 5.13397L23 6.86603L19.4486 8.89635C19.8546 9.8507 20.0791 10.8994 20.0791 12C20.0791 13.1006 19.8546 14.1493 19.4486 15.1036L23 17.134L21.9901 18.866L18.4373 16.8349C17.1538 18.5078 15.2205 19.6651 13.0099 19.9381V24H10.9901V19.9381C8.77946 19.6651 6.84617 18.5078 5.56273 16.8349L2.00989 18.866L1 17.134L4.5514 15.1036C4.14535 14.1493 3.9209 13.1006 3.9209 12C3.9209 10.8994 4.14535 9.8507 4.5514 8.89635L1 6.86603L2.00989 5.13397L5.56273 7.16513C6.84617 5.49222 8.77946 4.33486 10.9901 4.06189V0ZM5.94068 12C5.94068 8.68629 8.65353 6 12 6C15.3465 6 18.0593 8.68629 18.0593 12C18.0593 15.3137 15.3465 18 12 18C8.65353 18 5.94068 15.3137 5.94068 12Z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M5.05011 4.409C6.46482 2.9943 8.14585 2.02264 9.90788 1.5C8.84446 5.08024 9.63565 8.99454 12.3303 11.6892C15.025 14.3839 18.9393 15.1751 22.5191 14.1129C21.9969 15.8737 21.0253 17.5548 19.6106 18.9695C15.322 23.2581 8.58587 23.4752 4.56511 19.4545C0.544352 15.4337 0.761495 8.69762 5.05011 4.409ZM7.26586 5.19608C6.97785 5.42391 6.70099 5.67022 6.43684 5.93437C2.99054 9.38066 2.80435 14.782 6.02096 17.9986C9.23756 21.2152 14.6389 21.029 18.0852 17.5827C18.4373 17.2307 18.7577 16.856 19.0448 16.4625C15.9881 16.4646 13.0552 15.3261 10.8743 13.1452C8.77411 11.045 7.6407 8.24751 7.56194 5.31354L7.55754 4.97444L7.26586 5.19608ZM17.3387 2.30478H19.3979V4.36394H21.4571V6.4231H19.3979V8.48226H17.3387V6.4231H15.2795V4.36394H17.3387V2.30478Z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><div class="hold-menu"><ul><li><a href="/en" class="home">WhaTap Docs</a></li><li><a href="https://www.whatap.io/en" target="_blank" rel="noopener noreferrer" class="ext">Shortcut for WhaTap Home</a></li></ul></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/en/learning-guides">Learning</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/best-practice-guides/about-dashboard">Dashboard analysis</a><button aria-label="Collapse sidebar category &#x27;Dashboard analysis&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/best-practice-guides/about-apm-dashboard">Application Dashboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/best-practice-guides/about-apm-hitmap-class">HITMAP Transaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/best-practice-guides/about-server-dashboard">Server Resource Board</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/best-practice-guides/using-browser-monitoring">Browser Monitoring</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/en/best-practice-guides/about-apm-dbc">Performance failure type</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/best-practice-guides/about-apm-dbc">DB connection delay and connection pool</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/en/best-practice-guides/about-apm-heap-memory">Setting the metrics alert</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/best-practice-guides/about-apm-heap-memory">Heap memory metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/best-practice-guides/set-db-metric-warning-notice">Database</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/en/best-practice-guides/about-instance-performance-analysis">Learn More</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/best-practice-guides/about-instance-performance-analysis">Using the Instance Performance Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/best-practice-guides/about-tcp-port">TCP 포트 감시 활용</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/learning-guides"><span itemprop="name">Learning</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Performance failure type</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DB connection delay and connection pool</span><meta itemprop="position" content="3"></li></ul><div class="breadcrumbs-hidden"><span itemprop="name">Learning<cite>&gt;</cite></span><span>Performance failure type<cite>&gt;</cite></span><span itemprop="name">DB connection delay and connection pool</span></div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_XdKt"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DB connection delay and connection pool</h1></header>
<p>This document introduces the correlations between <strong>DB connection delay</strong> (DBC delay) that is one of application performance failures, and the <strong>connection pool</strong> from the monitoring perspective.</p>
<p>First, assuming that the failure situation has been recognized through the <strong><em>Hitmap</em></strong> widget on the dashboard, go to the <strong><em>Hitmap</em></strong> menu under the <strong><em>Analysis</em></strong> menu to specify the time to look at the before and after of the failure situation. Based on this, let&#x27;s look at the process of inferring the cause of the failure through the <strong><em>Trace information</em></strong> window and <strong><em>Metrics chart</em></strong>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p><strong>Learning in advance</strong></p><p><strong><em>Application dashboard</em></strong> → <strong><em>HITMAP transaction</em></strong> → <strong><em>Trace information</em></strong> → <strong><em>Metrics chart</em></strong></p><ul>
<li>
<p>If you have recognized the problem, check the past records to see before and after the problem situation. After checking the transaction overload pattern in the <strong><em>Hitmap transaction</em></strong> chart, you can consider the cause of transaction delay as DB connection problem through the <strong><em>TX trace</em></strong> list.</p>
</li>
<li>
<p>After searching for each section, let&#x27;s look at the detailed execution history step by step through trace analysis. We can see that the DBC step took the most of the elapsed time.</p>
</li>
<li>
<p>Let&#x27;s look at various metrics together through the <strong><em>metrics chart</em></strong>. By comparing the <strong><em>DB pool count</em></strong> and <strong><em>DB active count</em></strong> charts, you can determine that the cause is the shortage of DB connection pool.</p>
</li>
<li>
<p>Depending on the operating environment, you can gradually adjust the connection pool size or configure the optimization settings to prevent water leak.</p>
</li>
</ul></div></div>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detecting-the-hitmap-anomaly-pattern">Detecting the hitmap anomaly pattern<a href="#detecting-the-hitmap-anomaly-pattern" class="hash-link" aria-label="Direct link to Detecting the hitmap anomaly pattern" title="Direct link to Detecting the hitmap anomaly pattern">​</a></h2><p><img loading="lazy" src="/en/img/best-p/apm-dbc-hitmap-hl-en.png" alt="히트맵 이상 패턴 감지" width="1200" height="526"></p><p>Speed is the key to recognizing failures and tracing their causes through primary analysis. WhaTap provides an intuitive view and the history search function to obtain additional information for root causes. If a sudden abnormality is detected as in the example in the <strong><em>Hitmap</em></strong> widget on <strong><em>Application dashboard</em></strong>, what is the next step?</p><p>You can quickly perform the transaction trace analysis by dragging the problem section in the <strong><em>Hitmap</em></strong> widget, or move to <strong><em>Hitmap</em></strong> under the <strong><em>Analysis</em></strong> menu to expand the time range to look at before and after the problem situation.</p><p><img loading="lazy" src="/en/img/best-p/apm-dbc-hitmap-hitmap-tx-en.png" alt="히트맵 트랜잭션 차트 이동 sc" width="1408" height="877"></p><p>Let&#x27;s proceed with the latter route. The dashboard <strong><em>hitmap</em></strong> widget is a distribution chart of transaction response times completed in the last 10 minutes. In other words, to check the past history for the last 10 minutes or more by specifying the time range, go to <strong><em>Hitmap</em></strong> under the <strong><em>Analysis</em></strong> menu. You can move as shown in the example by selecting the <img decoding="async" loading="lazy" alt="Right arrow icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjUgMTMuOTMwOEw4Ljc5NTQzIDE1TDEzLjUgOS45NzkxTDguNzk1NDMgNUw3LjUgNi4wMjczN0wxMS4yMjk3IDkuOTc5MUw3LjUgMTMuOTMwOFoiIGZpbGw9IiM3NTc1NzUiLz4KPC9zdmc+Cg==" width="20" height="20" class="img_ev3q"> arrow icon on the upper right of the widget.</p><p>Through the time selector at the top of <strong><em>HITMAP transaction</em></strong>, you can search for the past history by specifying the desired time range. To confirm abnormal patterns, we searched widely before and after the problem section and could identify an overload pattern with a high concentration of transactions with delayed responses.</p><p><img loading="lazy" src="/en/img/best-p/apm-dbc-hitmap-drag-en.png" alt="히트맵 드래그" width="1000" height="377"></p><p>To find the cause of this sudden increase in response time and transaction overload, drag each problem section on the <strong><em>Hitmap transaction</em></strong> chart to view the transaction trace list (<strong><em>TX trace</em></strong> list).</p><p><img loading="lazy" src="/en/img/best-p/apm-dbc-hitmap-tr-list-en.png" alt="히트맵 트랜잭션 목록" width="1328" height="660"></p><p>Through the <strong><em>TX trace</em></strong> list, you can see that the ratio of <strong><em>DB connect time</em></strong> to <strong><em>Elapsed time</em></strong> is great in many transactions. For example, in case of <code>/api/system/test</code> URL, of the total <strong><em>elapsed time</em></strong> of 25,057 ms, only the DB connection took 24,931 ms. In other words, we can assume that there is a problem primarily with the DB connection. Next, select the transaction and then look at the details in the <strong><em>Transaction information</em></strong> window.</p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>The horizontal axis of the hitmap indicates the transaction end time, and the vertical axis the response time. You can view the response time delay section on the vertical axis up to 80 seconds by selecting the <img decoding="async" loading="lazy" alt="Up arrow icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA2OTE2IDEzTDUgMTEuNzA0NkwxMC4wMjA5IDdMMTUgMTEuNzA0NkwxMy45NzI2IDEzTDEwLjAyMDkgOS4yNzAyN0w2LjA2OTE2IDEzWiIgZmlsbD0iIzc1NzU3NSIvPgo8L3N2Zz4K" width="20" height="20" class="img_ev3q"> arrow icon on the hitmap.</p>
</li>
<li>
<p>For more information about the analysis on hitmap patterns other than overload patterns, see <a href="/en/best-practice-guides/about-apm-hitmap-class#about-hitmap-pattern-analysis">the following</a>.</p>
</li>
</ul></div></div></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="analysis-on-the-transaction-trace">Analysis on the transaction trace<a href="#analysis-on-the-transaction-trace" class="hash-link" aria-label="Direct link to Analysis on the transaction trace" title="Direct link to Analysis on the transaction trace">​</a></h2><p>In the <strong><em>Trace information</em></strong> window, you can see the transaction performance history by step. Through this transaction tracing, you can trace the causes of poor performance or errors in transactions. When viewing the <strong><em>Trace analysis</em></strong> window, the information for you to look at first is the <strong><em>elapsed</em></strong> times for each step. This is because comparing the elapsed times allows you to quickly identify the cause of poor performance or errors.</p><p><img loading="lazy" src="/en/img/best-p/apm-dbc-tx-tr-en.png" alt="트랜잭션 트레이스 분석 sc" width="1679" height="907"></p><p>Let&#x27;s look at the detailed trace of the URL. The query execution time that connects the PostgreSQL DB while running <code>/api/system/test</code> is between 1 ms and 6 ms. Accordingly, there is no critical problem. However, you can find that the waiting time for DB connection is significantly longer than the time, and the <strong><em>DB Connection</em></strong> step is the longest <strong><em>elapsed</em></strong> time.</p><p>In other words, in this case, the transaction delay occurred due to the DB connection delay, as assumed earlier. What causes this DB connection delay?</p></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="checking-the-db-connection-pool">Checking the DB connection pool<a href="#checking-the-db-connection-pool" class="hash-link" aria-label="Direct link to Checking the DB connection pool" title="Direct link to Checking the DB connection pool">​</a></h2><p>One of the causes of <strong>DB connection delay</strong> is the <strong>shortage of connection pool</strong>. The connection pool size means the number of connections that can be made simultaneously. The database consumes lots of time while creating and ending connections based on the requests. The connection pool creates a specific number of connections in advance and makes the current connection pool reused when other requests occur. This can decrease the response time because creating connection is not required each time. The problem is that the number of pre-created connections is insufficient compared to the number of connections required by the application. In this case, a delay in DB connection is followed.</p><p>To check the status of the DB connection pool, go to <strong><em>Metrics chart</em></strong> in the <strong><em>Analysis</em></strong> menu. First, select <strong><em>Database</em></strong> from the list on the left of <strong><em>Metrics chart</em></strong>, and then check the <strong><em>DB pool count</em></strong> and <strong><em>DB active count</em></strong> charts.</p><p><img loading="lazy" src="/en/img/best-p/apm-dbc-mcht-en.png" alt="메트릭스 차트" width="1489" height="937"></p><p>As you can see in each chart, the maximum number of connections for <strong><em>DB Pool</em></strong> is set to 20. If you look at the <strong><em>DB active count</em></strong> chart, you can see that 20 pools are continuously occupied. If the requests that exceed the specified pool count are raised, a delay is followed until there is any remaining pool in the DB. When checking the resource status such as CPU and memory usage, there were no special happenings. In other words, in case of this project, the shortage in DB connection pool is considered as the root cause of DBC delay.</p><p>What is required if the DB connection pool is insufficient? Of course, the solution may differ depending on the user environment. In this document, the required steps are briefly explained through <strong>Connection pool resizing</strong> and <strong>Connection reuse and optimization</strong>.</p></section>
<section class="remark-sectionize-h3"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adjusting-the-connection-pool-size">Adjusting the connection pool size<a href="#adjusting-the-connection-pool-size" class="hash-link" aria-label="Direct link to Adjusting the connection pool size" title="Direct link to Adjusting the connection pool size">​</a></h3><p>First, you can use the method to adjust the maximum number of connections in the pool. Set the appropriate number of pools by gradually increasing pools and checking that the DB active count is kept within the maximum number of pools. However, if the pool count is set too large, it may adversely affect the application performance due to an excessive increase in resource consumption. After ensuring sufficient memory and capacity, adjust it depending on the operating environment.</p></section>
<section class="remark-sectionize-h3"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="q12">Reusing and optimizing the connections<a href="#q12" class="hash-link" aria-label="Direct link to Reusing and optimizing the connections" title="Direct link to Reusing and optimizing the connections">​</a></h3><p>Second, use the method using the connection reuse and optimization. For example, if a connection leak occurs because the application does not return used connections, it cannot be resolved even though you increase the connection pool count. In this case, the DB active count trend draws an upward trend graph. To prevent the connection leaks, you must manage to return the used connections. After using the connection, you can explicitly set to return it or try reusing it.</p></section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/tags/application">Application</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/tags/application-monitoring">Application Monitoring</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/tags/apm">APM</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/tags/dbc">DBC</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/en/tags/performance-failure">Performance failure</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">Feedback</button></div></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/best-practice-guides/using-browser-monitoring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">브라우저 모니터링</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/best-practice-guides/about-apm-heap-memory"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">힙 메모리 메트릭스</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pzBX thin-scrollbar"></div><div class="fbsharebutton_dZBI" data-href="https://docs.whatap.io/en/best-practice-guides/about-apm-dbc" data-layout="" data-size=""><button type="button" class="fb_xfbml_parse_ignore_BpHP">Shared</button></div><div class="btnprint_EBmh"><button>PDF</button></div><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">Feedback</button></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WhaTap Labs Inc. All right reserved. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>