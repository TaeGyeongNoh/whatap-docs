<!doctype html>
<html lang="ja-JP" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-nodejs/agent-network" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.1">
<title data-rh="true">エージェントの通信設定 | WhaTap Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" name="twitter:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" property="og:url" content="https://docs.whatap.io/ja/nodejs/agent-network"><meta data-rh="true" property="og:locale" content="ja_JP"><meta data-rh="true" property="og:locale:alternate" content="ko_KR"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="keywords" content="WhaTap, 와탭, 매뉴얼, 사용법, WhaTap 사용법, WhaTap 매뉴얼, 기술 문서, APM, 애플리케이션 모니터링, 로그 모니터링, 쿠버네티스 모니터링, 서버 모니터링, 데이터베이스 모니터링, URL 모니터링, 클라우드 모니터링, 브라우저 모니터링, Browser monitoring, Application Monitoring, Log Monitoring, Kubernetes Monitoring, Server Monitoring, Database Monitoring, URL Monitoring, Cloud Monitoring, Manual, User Guide, Docs, WhaTap Manual, WhaTap Docs, WhaTap Documents, 트랜잭션, Transaction, 트레이싱, Tracing, 마스터, Master, 노드, Node, 데드락, Deadlock, 락 트리, Lock tree, 멀티 트랜잭션, Multi Trancsaction, 메트릭스, Metrics, 소프트웨어 프록시, Software proxy, 스택, Stack, 슬로우 쿼리, Slow query, 액티브 트랜잭션, Active transaction, 컨테이너, Container, 히트맵, Hitmap, Garbage Collection, GC, MXQL, Method 추적, Trace method, OOM Killed 컨테이너, OOM Killed Container, Oracle, Tibero, PostgreSQL, MySQL, MongoDB, SQL Server, CUBRID, Altibase, Redis, WebLogic, WebSphere"><meta data-rh="true" name="naver-site-verification" content="0c21fc5664a467108fb762ade47a3f81ee9b88ed"><meta data-rh="true" name="google-site-verification" content="rIlfJkbbogFOIDc3DgJZmOGbUMJWytyvZSKEgV7EMsE"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="エージェントの通信設定 | WhaTap Docs"><meta data-rh="true" name="description" content="エージェントとサーバー間の接続設定"><meta data-rh="true" property="og:description" content="エージェントとサーバー間の接続設定"><link data-rh="true" rel="icon" href="/ja/img/whatap-favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.whatap.io/ja/nodejs/agent-network"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/nodejs/agent-network" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/en/nodejs/agent-network" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/ja/nodejs/agent-network" hreflang="ja-JP"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/nodejs/agent-network" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/ja/blog/rss.xml" title="WhaTap Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ja/blog/atom.xml" title="WhaTap Docs Atom Feed">








<script>!function(e,t,a,o,r,s){e=e[r]=e[r]||{config:{projectAccessKey:"x4t5020boh2ln-z6pi7d91ds6c1a-z7t4b2lrgnub4o",pcode:29856,sampleRate:100,sessionReplaySampleRate:50,ignoreOrigins:[/^.*localhost.*$/i,/^.*ngrok-free.app.*$/i,/^.*whatap.github.io.*$/i],collectUserClick:!0}},(r=t.createElement(a)).async=1,r.src=o,(o=t.getElementsByTagName(a)[0]).parentNode.insertBefore(r,o)}(window,document,"script","https://repo.whatap-browser-agent.io/rum/prod/v1/whatap-browser-agent.js","WhatapBrowserAgent")</script>
<script>let curLang=document.documentElement.lang.split("-")[0];CRISP_RUNTIME_CONFIG={locale:curLang},window.$crisp=[],window.CRISP_WEBSITE_ID="9a0c342f-a5b1-4c4a-a22f-92c7b4b9b477",d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)</script>


<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E46TQ5VSCT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E46TQ5VSCT",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-WJSZDJR",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/ja/assets/css/styles.a518fa42.css">
<script src="/ja/assets/js/runtime~main.bb357651.js" defer="defer"></script>
<script src="/ja/assets/js/main.eeef8701.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<script async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&amp;version=v17.0&amp;appId=169051789422006&amp;autoLogAppEvents=1" nonce="y4U7YSrt"></script>
<div id="fb-root"></div>




<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJSZDJR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="本文へスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">本文へスキップ</a></div><nav aria-label="メイン" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ナビゲーションバーをトーグルする" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ja/"><div class="navbar__logo"><img src="/ja/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedComponent_mlkZ themedComponent--light_NVdE" height="28" width="152"><img src="/ja/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="28" width="152"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/ja/whatap-overview">はじめに</a><a class="navbar__item navbar__link" href="/ja/learning-guides">WhaTap活用</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">製品</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ja/java/introduction">Java</a></li><li><a class="dropdown__link" href="/ja/php/introduction">PHP</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/ja/nodejs/introduction">Node.js</a></li><li><a class="dropdown__link" href="/ja/python/introduction">Python</a></li><li><a class="dropdown__link" href="/ja/dotnet/introduction">.NET</a></li><li><a class="dropdown__link" href="/ja/golang/introduction">Go</a></li><li><a class="dropdown__link" href="/ja/server/introduction">Server</a></li><li><a class="dropdown__link" href="/ja/kubernetes/introduction">Kubernetes</a></li><li><a class="dropdown__link" href="/ja/postgresql/monitoring-intro">PostgreSQL</a></li><li><a class="dropdown__link" href="/ja/oracle/monitoring-intro">Oracle</a></li><li><a class="dropdown__link" href="/ja/oracle-pro/monitoring-intro">Oracle Pro</a></li><li><a class="dropdown__link" href="/ja/mysql/monitoring-intro">MySQL</a></li><li><a class="dropdown__link" href="/ja/mssql/monitoring-intro">SQL Server</a></li><li><a class="dropdown__link" href="/ja/tibero/monitoring-intro">Tibero</a></li><li><a class="dropdown__link" href="/ja/cubrid/monitoring-intro">CUBRID</a></li><li><a class="dropdown__link" href="/ja/altibase/monitoring-intro">Altibase</a></li><li><a class="dropdown__link" href="/ja/redis/monitoring-intro">Redis</a></li><li><a class="dropdown__link" href="/ja/mongodb/monitoring-intro">MongoDB</a></li><li><a class="dropdown__link" href="/ja/url/url-intro">URL</a></li><li><a class="dropdown__link" href="/ja/browser">Browser</a></li><li><a class="dropdown__link narrow" href="/ja/amazon-cloudwatch/install-agent">Amazon CloudWatch</a></li><li><a class="dropdown__link" href="/ja/amazon-ecs/introduction">Amazon ECS</a></li><li><a class="dropdown__link" href="/ja/aws-log/introduction">AWS Log</a></li><li><a class="dropdown__link" href="/ja/azure/install-agent">Azure Monitor</a></li><li><a class="dropdown__link narrow" href="/ja/ncloud/install-agent">Naver Cloud Monitoring</a></li><li><a class="dropdown__link narrow" href="/ja/oracle-cloud/install-agent">Oracle Cloud Monitor</a></li><li><a class="dropdown__link narrow" href="/ja/npm/introduction">Network Performance Monitoring</a></li><li><a class="dropdown__link narrow" href="/ja/features/introduction">Feature Project</a></li><li><a class="dropdown__link" href="/ja/log/introduction">Log</a></li><li><a class="dropdown__link" href="/ja/extensions">Extensions</a></li></ul></div><a class="navbar__item navbar__link hidden" href="/ja/java/introduction">Javaモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/php/introduction">PHPモニタリング</a><a aria-current="page" class="navbar__item navbar__link hidden navbar__link--active" href="/ja/nodejs/introduction">Node.jsモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/python/introduction">Pythonモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/dotnet/introduction">.NETモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/golang/introduction">Goモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/server/introduction">Serverモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/kubernetes/introduction">Kubernetesモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/postgresql/monitoring-intro">PostgreSQLモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/oracle-v1/monitoring-intro">Oracle V1モニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/oracle/monitoring-intro">Oracle V2モニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/oracle-pro/monitoring-intro">Oracle Proモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/mysql/monitoring-intro">MySQLモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/mssql/monitoring-intro">SQL Serverモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/tibero/monitoring-intro">Tiberoモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/cubrid/monitoring-intro">CUBRIDモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/altibase/monitoring-intro">Altibaseモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/redis/monitoring-intro">Redisモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/mongodb/monitoring-intro">MongoDBモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/url/url-intro">URLモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/amazon-cloudwatch/install-agent">Amazon CloudWatch</a><a class="navbar__item navbar__link hidden" href="/ja/amazon-ecs/introduction">Amazon ECS</a><a class="navbar__item navbar__link hidden" href="/ja/aws-log/introduction">AWS Log</a><a class="navbar__item navbar__link hidden" href="/ja/azure/install-agent">Azure Monitor</a><a class="navbar__item navbar__link hidden" href="/ja/ncloud/install-agent">Naver Cloud Monitoring</a><a class="navbar__item navbar__link hidden" href="/ja/oracle-cloud/install-agent">Oracle Cloud Monitor</a><a class="navbar__item navbar__link hidden" href="/ja/log/introduction">Logモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/browser">Browser</a><a class="navbar__item navbar__link hidden" href="/ja/npm/introduction">NPM</a><a class="navbar__item navbar__link hidden" href="/ja/extensions">拡張ツール</a><a class="navbar__item navbar__link hidden" href="/ja/opentelemetry/introduction">OpenTelemetry</a><a class="navbar__item navbar__link" href="/ja/manage">管理機能</a><a class="navbar__item navbar__link" href="/ja/openapi-spec">Open API</a><a class="navbar__item navbar__link" href="/ja/license/licenses">ライセンス</a><a class="navbar__item navbar__link" href="/ja/release-notes">リリースノート</a><a class="navbar__item navbar__link" href="/ja/faq/">FAQ</a><a class="navbar__item navbar__link" href="/ja/blog">新しい機能</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link oneColumn localeDropdown"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="iconLanguage_DSK9"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM18.92 8H15.97C15.65 6.75 15.19 5.55 14.59 4.44C16.43 5.07 17.96 6.35 18.92 8ZM12 4.04C12.83 5.24 13.48 6.57 13.91 8H10.09C10.52 6.57 11.17 5.24 12 4.04ZM4.26 14C4.1 13.36 4 12.69 4 12C4 11.31 4.1 10.64 4.26 10H7.64C7.56 10.66 7.5 11.32 7.5 12C7.5 12.68 7.56 13.34 7.64 14H4.26ZM5.08 16H8.03C8.35 17.25 8.81 18.45 9.41 19.56C7.57 18.93 6.04 17.66 5.08 16ZM8.03 8H5.08C6.04 6.34 7.57 5.07 9.41 4.44C8.81 5.55 8.35 6.75 8.03 8ZM12 19.96C11.17 18.76 10.52 17.43 10.09 16H13.91C13.48 17.43 12.83 18.76 12 19.96ZM14.34 14H9.66C9.57 13.34 9.5 12.68 9.5 12C9.5 11.32 9.57 10.65 9.66 10H14.34C14.43 10.65 14.5 11.32 14.5 12C14.5 12.68 14.43 13.34 14.34 14ZM14.59 19.56C15.19 18.45 15.65 17.25 15.97 16H18.92C17.96 17.65 16.43 18.93 14.59 19.56ZM16.36 14C16.44 13.34 16.5 12.68 16.5 12C16.5 11.32 16.44 10.66 16.36 10H19.74C19.9 10.64 20 11.31 20 12C20 12.69 19.9 13.36 19.74 14H16.36Z" fill="currentColor"></path></svg><span class="langLabel_L4uU">JPN</span></a><ul class="dropdown__menu"><li><a href="/nodejs/agent-network" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko-KR">KOR</a></li><li><a href="/en/nodejs/agent-network" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">ENG</a></li><li><a href="/ja/nodejs/agent-network" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja-JP">JPN</a></li></ul></div><div class="navbarSearchContainer_dCNk"><div id="docsearch"></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードとライトモードの切り替え(現在 ライトモード)" aria-label="ダークモードとライトモードの切り替え(現在 ライトモード)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" class="lightToggleIcon_pyhR"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10.9901 0H13.0099V4.06189C15.2205 4.33486 17.1538 5.49222 18.4373 7.16513L21.9901 5.13397L23 6.86603L19.4486 8.89635C19.8546 9.8507 20.0791 10.8994 20.0791 12C20.0791 13.1006 19.8546 14.1493 19.4486 15.1036L23 17.134L21.9901 18.866L18.4373 16.8349C17.1538 18.5078 15.2205 19.6651 13.0099 19.9381V24H10.9901V19.9381C8.77946 19.6651 6.84617 18.5078 5.56273 16.8349L2.00989 18.866L1 17.134L4.5514 15.1036C4.14535 14.1493 3.9209 13.1006 3.9209 12C3.9209 10.8994 4.14535 9.8507 4.5514 8.89635L1 6.86603L2.00989 5.13397L5.56273 7.16513C6.84617 5.49222 8.77946 4.33486 10.9901 4.06189V0ZM5.94068 12C5.94068 8.68629 8.65353 6 12 6C15.3465 6 18.0593 8.68629 18.0593 12C18.0593 15.3137 15.3465 18 12 18C8.65353 18 5.94068 15.3137 5.94068 12Z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M5.05011 4.409C6.46482 2.9943 8.14585 2.02264 9.90788 1.5C8.84446 5.08024 9.63565 8.99454 12.3303 11.6892C15.025 14.3839 18.9393 15.1751 22.5191 14.1129C21.9969 15.8737 21.0253 17.5548 19.6106 18.9695C15.322 23.2581 8.58587 23.4752 4.56511 19.4545C0.544352 15.4337 0.761495 8.69762 5.05011 4.409ZM7.26586 5.19608C6.97785 5.42391 6.70099 5.67022 6.43684 5.93437C2.99054 9.38066 2.80435 14.782 6.02096 17.9986C9.23756 21.2152 14.6389 21.029 18.0852 17.5827C18.4373 17.2307 18.7577 16.856 19.0448 16.4625C15.9881 16.4646 13.0552 15.3261 10.8743 13.1452C8.77411 11.045 7.6407 8.24751 7.56194 5.31354L7.55754 4.97444L7.26586 5.19608ZM17.3387 2.30478H19.3979V4.36394H21.4571V6.4231H19.3979V8.48226H17.3387V6.4231H15.2795V4.36394H17.3387V2.30478Z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="一番上へスクロールする" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><div class="hold-menu"><ul><li><a href="/ja" class="home">WhaTap Docs</a></li><li><a href="https://www.whatap.io/ja" target="_blank" rel="noopener noreferrer" class="ext">WhaTapのホームページへ移動します。</a></li></ul></div><nav aria-label="Docsサイドバー" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/ja/nodejs/introduction">Node.jsモニタリング</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/supported-spec">サポート環境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/install-agent">エージェントのインストール</a><button aria-label="Expand sidebar category &#x27;エージェントのインストール&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/install-check">インストー ル点検</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/ja/nodejs/set-agent">設定</a><button aria-label="Collapse sidebar category &#x27;設定&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-name">エージェント名の識別</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-control-function">エージェント機能の制御</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ja/nodejs/agent-network">エージェントの通信設定</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-log">エージェントログの設定</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-transaction">トランザクション</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-dbsql">DB、SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-httpcapicall">HTTPC, API Call</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-number-of-user">ユーザー数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-static">統計</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-topology">トポロジーマップ</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/agent-manage">管理</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/learn-apm-main-menu">メインメニュー</a><button aria-label="Collapse sidebar category &#x27;メインメニュー&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/dashboard-intro">ダッシュボード</a><button aria-label="Expand sidebar category &#x27;ダッシュボード&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/flex-board">Flexボード</a><button aria-label="Expand sidebar category &#x27;Flexボード&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/analysis-report-intro">分析</a><button aria-label="Expand sidebar category &#x27;分析&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/metrics-intro">メトリックス</a><button aria-label="Expand sidebar category &#x27;メトリックス&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/track-transactions-intro">トランザクション</a><button aria-label="Expand sidebar category &#x27;トランザクション&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/topology">トポロジー</a><button aria-label="Expand sidebar category &#x27;トポロジー&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/analysis-apm-trs">統計</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/report-intro">レポート</a><button aria-label="Expand sidebar category &#x27;レポート&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/nodejs/apm-set-notice">アラート通知</a><button aria-label="Expand sidebar category &#x27;アラート通知&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/instance-performance-analysis">インスタンスの性能管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/nodejs/labs">ラボラトリー</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホーム" class="breadcrumbs__link" href="/ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/ja/nodejs/introduction"><span itemprop="name">Node.jsモ ニタリング</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/ja/nodejs/set-agent"><span itemprop="name">設定</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">エージェントの通信設定</span><meta itemprop="position" content="3"></li></ul><div class="breadcrumbs-hidden"><span itemprop="name">Node.jsモニタリング<cite>&gt;</cite></span><span itemprop="name">設定<cite>&gt;</cite></span><span itemprop="name">エージェントの通信設定</span></div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_XdKt"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページでは</button></div><div class="theme-doc-markdown markdown"><header><h1>エージェントの通信設定</h1></header><section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="network--security">Network &amp; security<a href="#network--security" class="hash-link" aria-label="Network &amp; securityへの直接リンク" title="Network &amp; securityへの直接リンク">​</a></h2><p>WhaTapは、エージェントにサーバー通信でTCP接続してからモニタリングデータを送信します。</p><p><img decoding="async" loading="lazy" src="https://img.whatap.io/media/agent_node/agent_net.png" alt="WhaTapエージェントのネットワーク" class="img_ev3q"></p><p>エージェントは、1つのTCP セッションを介してデータ送信とサーバーの制御要求を処理します。 NodeエージェントはUDPを使用しません。 NodeエージェントからWhaTap収集サーバーの通信ではファイアウォールを開きます。</p></section>
<section class="remark-sectionize-h3"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="収集サーバーのアドレスとポート">収集サーバーのアドレスとポート<a href="#収集サーバーのアドレスとポート" class="hash-link" aria-label="収集サーバーのアドレスとポートへの直接リンク" title="収集サーバーのアドレスとポートへの直接リンク">​</a></h3><p>WhaTapサーバーは、データリージョンサーバーとフロントサーバー、ユーレカなどに区分します。データリージョンにはProxy、Yard、Gateway、Keeperなどがあります。エージェントは、Proxyサーバーと通信します。</p><p>NodeエージェントにWhaTapサーバのproxyサーバのアドレスを設定します。(exwhatap.server.host=10.0.3.1/10.0.3.2)サーバアドレスを設定する場合は、proxyサーバの数を入力します。WhaTapサーバは、インストール方法によって、proxyサーバを1つまたは複数使用できます。</p><p>WhaTap Proxyサーバは6600番ポートでリスニング(Listening)します。エージェントで何も設定しない場合、エージェントは6600番ポートへの接続を試みます。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key attr-name" style="color:rgb(255, 203, 107)">whatap.server.port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">6600</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>2つのProxyサーバーが異なるポートを使用することはできません。複数のProxyサーバーを使用している場合は、(Listening) ポートが同じである必要があります。</p></div></div></section>
<section class="remark-sectionize-h3"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="通信接続およびセキュリティ">通信接続およびセキュリティ<a href="#通信接続およびセキュリティ" class="hash-link" aria-label="通信接続およびセキュリティへの直接リンク" title="通信接続およびセキュリティへの直接リンク">​</a></h3><p>WhaTapは、パブリックネットワークからモニタリングデータを収集することを前提に設計されています。その結果、  すべてのモニタリングデータは暗号化され、サーバーに送信されます。大量のデータを暗号化して送信すると、オーバーヘッドを引き起こす可能性があります。WhaTapはデータを自動的に暗号化します。エージェントとサーバー間の通信プロセスは次のとおりです。</p><ol>
<li>
<p>プロジェクト作成メニューから<strong>アクセスキー</strong>を作成してから、コピーしてください。</p>
</li>
<li>
<p><strong>アクセスキー</strong>にはパスワードが含まれます。外部に知られないように注意してください。</p>
</li>
<li>
<p>Node.jsアプリケーションサーバーを再起動します。</p>
</li>
<li>
<p>WhaTapエージェントは、サーバーへのTCP セッションを確立します。</p>
</li>
<li>
<p><strong>アクセスキー</strong>に含まれる通信用秘密キーを使用してデータを暗号化し、新しいセッション用のセキュリティキーを要求します。</p>
</li>
<li>
<p>サーバーは、エージェントによって要求されたセッション用のセキュリティキーを新しく生成して、エージェントに送信します。</p>
</li>
<li>
<p>セッション用のセキュリティキーには、2つの暗号化キーを含まれています。ASCアルゴリズム用の暗号キーと単純なパスワードの暗号化キーです。</p>
</li>
<li>
<p>その後、エージェントはテキストや制御などの機密データにASC暗号化キーを使用します。数値データなどの比較的安全なデータは、単純な暗号化によってデータをサーバーに送信します。</p>
</li>
</ol></section>
<section class="remark-sectionize-h3"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="エージェント通信バッファー">エージェント通信バッファー<a href="#エージェント通信バッファー" class="hash-link" aria-label="エージェント通信バッフ ァーへの直接リンク" title="エージェント通信バッファーへの直接リンク">​</a></h3><p>エージェントは、サーバー間のTCP接続が遅延すると、エージェントが障害を起こす可能性があります。そのため、収集された性能データをネットワークに直接送信することはありません。</p><p>エージェントは、内部に2つの通信バッファーと通信します。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key attr-name" style="color:rgb(255, 203, 107)">net_send_queue1_size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">512</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">net_send_queue2_size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">1024</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Queue1</strong>には、ほとんどの性能データのうち、定期的に送信する性能データをバッファリングします。<strong>Queue2</strong>は、トランザクショントレース(ProfilePack)とアクティブスタック(ActiveStackPack)のみを個別に処理します。</p><p>エージェントは、キューを基準にサーバーと通信します。サーバーがダウンするとエージェントがメモリを消費します。それ以上の問題は発生しません。</p></section>
<section class="remark-sectionize-h3"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="エージェント再接続">エージェント再接続<a href="#エージェント再接続" class="hash-link" aria-label="エージェント再接続への直接リンク" title="エージェント再接続への直接リンク">​</a></h3><p>エージェントがサーバーとの接続が切断された場合、5~10秒ごとに 3回の再接続を試みます。その後の再接続は行われません。</p></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ネットワーク設定オプション">ネットワーク設定オプション<a href="#ネットワーク設定オプション" class="hash-link" aria-label="ネットワーク設定オプションへの直接リンク" title="ネットワーク設定オプションへの直接リンク">​</a></h2><p>エージェントがアプリケーションサーバーから収集したデータをサーバーに転送するためのネットワーク設定方法を案内します。主な設定オプションとしては、収集サーバーホスト、ポート、タイムアウト値、ネットワーク転送サイズ、データ転送キューサイズなどがあり、エージェントの効率的なデータ管理と安定したサーバー通信を保証するために重要です。</p>
<ul>
<li>
<p><strong>whatap_server_host</strong> <span class="type">ip_address</span></p>
<p>既定値<code>127.0.0.1,127.0.1</code></p>
<p>エージェントが収集したデータを送信するサーバーを設定します。収集サーバーの二重化により2つ以上のIPアドレスを持つ場合は、コンマ(,)を区切り文字として使用します。設定するIPアドレスには収集サーバーであるproxyサーバーがリスニング(Listening)状態でサービスする必要があります。</p>
</li>
<li>
<p><strong>whatap_server_port</strong> <span class="type">tcp_port</span></p>
<p>既定値<code>6600</code></p>
<p>収集サーバーのポートを設定します。ポートは1つだけ設定できるので、<code>whatap_server_host</code>オプションに設定した収集サーバーは同一のポートを使用する必要があります。</p>
</li>
<li>
<p><strong>tcp_so_timeout</strong> <span class="type">MiliSecond</span></p>
<p>既定値<code>60000</code></p>
<p>収集サーバーと通信するTCPセッションのSocket Timeout値を設定します。</p>
</li>
<li>
<p><strong>tcp_connection_timeout</strong> <span class="type">MiliSecond</span></p>
<p>既定値<code>5000</code></p>
<p>収集サーバーと通信するTCPセッションのConnection Timeout値を設定します。</p>
</li>
<li>
<p><strong>net_send_max_bytes</strong> <span class="type">Byte</span></p>
<p>既定値<code>5242880</code></p>
<p>エージェントがデータを収集して、ネットワークに一度に送信できる最大byteサイズです。</p>
</li>
</ul><ul>
<li>
<p><strong>net_send_queue1_size</strong> <span class="type">Int</span></p>
<p>既定値 <code>512</code></p>
<p>トレース情報以外のデータ転送に使用するQueueのサイズを設定します。</p>
</li>
<li>
<p><strong>net_send_queue2_size</strong> <span class="type">Int</span></p>
<p>既定値 <code>1024</code></p>
<p>トレース情報の送信に使用するQueueのサイズを設定します。</p>
</li>
</ul></section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>タグ：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/ja/tags/node-js">Node.js</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/ja/tags/通信">通信</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/ja/tags/ネットワーク">ネットワーク</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">フィードバック</button></div></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文書検索"><a class="pagination-nav__link pagination-nav__link--prev" href="/ja/nodejs/agent-control-function"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">エージェント機能の制御</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ja/nodejs/agent-log"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">エージェントログの設定</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pzBX thin-scrollbar"></div><div class="fbsharebutton_dZBI" data-href="https://docs.whatap.io/ja/nodejs/agent-network" data-layout="" data-size=""><button type="button" class="fb_xfbml_parse_ignore_BpHP">共有</button></div><div class="btnprint_EBmh"><button>PDF</button></div><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">フィードバック</button></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WhaTap Labs Inc. All right reserved. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>